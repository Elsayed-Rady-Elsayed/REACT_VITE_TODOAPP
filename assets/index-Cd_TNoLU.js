function aS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function lS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uS={exports:{}},$d={},cS={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),RN=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),CN=Symbol.for("react.strict_mode"),AN=Symbol.for("react.profiler"),kN=Symbol.for("react.provider"),PN=Symbol.for("react.context"),NN=Symbol.for("react.forward_ref"),bN=Symbol.for("react.suspense"),xN=Symbol.for("react.memo"),DN=Symbol.for("react.lazy"),a0=Symbol.iterator;function LN(t){return t===null||typeof t!="object"?null:(t=a0&&t[a0]||t["@@iterator"],typeof t=="function"?t:null)}var hS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dS=Object.assign,fS={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=fS,this.updater=n||hS}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pS(){}pS.prototype=Ga.prototype;function e_(t,e,n){this.props=t,this.context=e,this.refs=fS,this.updater=n||hS}var t_=e_.prototype=new pS;t_.constructor=e_;dS(t_,Ga.prototype);t_.isPureReactComponent=!0;var l0=Array.isArray,mS=Object.prototype.hasOwnProperty,n_={current:null},gS={key:!0,ref:!0,__self:!0,__source:!0};function _S(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mS.call(e,r)&&!gS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zu,type:t,key:s,ref:o,props:i,_owner:n_.current}}function ON(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function r_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function MN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var u0=/\/+/g;function ap(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MN(""+t.key):e.toString(36)}function gh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zu:case RN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ap(o,0):r,l0(i)?(n="",t!=null&&(n=t.replace(u0,"$&/")+"/"),gh(i,e,n,"",function(c){return c})):i!=null&&(r_(i)&&(i=ON(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(u0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",l0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ap(s,a);o+=gh(s,e,n,l,i)}else if(l=LN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ap(s,a++),o+=gh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jc(t,e,n){if(t==null)return t;var r=[],i=0;return gh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},_h={transition:null},FN={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:_h,ReactCurrentOwner:n_};function yS(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:jc,forEach:function(t,e,n){jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jc(t,function(){e++}),e},toArray:function(t){return jc(t,function(e){return e})||[]},only:function(t){if(!r_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Ga;Fe.Fragment=IN;Fe.Profiler=AN;Fe.PureComponent=e_;Fe.StrictMode=CN;Fe.Suspense=bN;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;Fe.act=yS;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=n_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mS.call(e,l)&&!gS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zu,type:t.type,key:i,ref:s,props:r,_owner:o}};Fe.createContext=function(t){return t={$$typeof:PN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kN,_context:t},t.Consumer=t};Fe.createElement=_S;Fe.createFactory=function(t){var e=_S.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:NN,render:t}};Fe.isValidElement=r_;Fe.lazy=function(t){return{$$typeof:DN,_payload:{_status:-1,_result:t},_init:VN}};Fe.memo=function(t,e){return{$$typeof:xN,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};Fe.unstable_act=yS;Fe.useCallback=function(t,e){return Ln.current.useCallback(t,e)};Fe.useContext=function(t){return Ln.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return Ln.current.useEffect(t,e)};Fe.useId=function(){return Ln.current.useId()};Fe.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return Ln.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};Fe.useRef=function(t){return Ln.current.useRef(t)};Fe.useState=function(t){return Ln.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return Ln.current.useTransition()};Fe.version="18.3.1";cS.exports=Fe;var B=cS.exports;const ut=lS(B),UN=aS({__proto__:null,default:ut},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN=B,$N=Symbol.for("react.element"),BN=Symbol.for("react.fragment"),zN=Object.prototype.hasOwnProperty,WN=jN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function vS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zN.call(e,r)&&!HN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$N,type:t,key:s,ref:o,props:i,_owner:WN.current}}$d.Fragment=BN;$d.jsx=vS;$d.jsxs=vS;uS.exports=$d;var U=uS.exports,dm={},wS={exports:{}},ur={},ES={exports:{}},TS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,de){var Z=J.length;J.push(de);e:for(;0<Z;){var le=Z-1>>>1,O=J[le];if(0<i(O,de))J[le]=de,J[Z]=O,Z=le;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var de=J[0],Z=J.pop();if(Z!==de){J[0]=Z;e:for(var le=0,O=J.length,H=O>>>1;le<H;){var Q=2*(le+1)-1,ce=J[Q],ie=Q+1,Te=J[ie];if(0>i(ce,Z))ie<O&&0>i(Te,ce)?(J[le]=Te,J[ie]=Z,le=ie):(J[le]=ce,J[Q]=Z,le=Q);else if(ie<O&&0>i(Te,Z))J[le]=Te,J[ie]=Z,le=ie;else break e}}return de}function i(J,de){var Z=J.sortIndex-de.sortIndex;return Z!==0?Z:J.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,_=!1,y=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(J){for(var de=n(c);de!==null;){if(de.callback===null)r(c);else if(de.startTime<=J)r(c),de.sortIndex=de.expirationTime,e(l,de);else break;de=n(c)}}function M(J){if(E=!1,I(J),!y)if(n(l)!==null)y=!0,St(z);else{var de=n(c);de!==null&&Le(M,de.startTime-J)}}function z(J,de){y=!1,E&&(E=!1,R(v),v=-1),_=!0;var Z=p;try{for(I(de),d=n(l);d!==null&&(!(d.expirationTime>de)||J&&!k());){var le=d.callback;if(typeof le=="function"){d.callback=null,p=d.priorityLevel;var O=le(d.expirationTime<=de);de=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&r(l),I(de)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var Q=n(c);Q!==null&&Le(M,Q.startTime-de),H=!1}return H}finally{d=null,p=Z,_=!1}}var P=!1,S=null,v=-1,T=5,A=-1;function k(){return!(t.unstable_now()-A<T)}function D(){if(S!==null){var J=t.unstable_now();A=J;var de=!0;try{de=S(!0,J)}finally{de?C():(P=!1,S=null)}}else P=!1}var C;if(typeof g=="function")C=function(){g(D)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Nt=Ae.port2;Ae.port1.onmessage=D,C=function(){Nt.postMessage(null)}}else C=function(){b(D,0)};function St(J){S=J,P||(P=!0,C())}function Le(J,de){v=b(function(){J(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,St(z))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var de=3;break;default:de=p}var Z=p;p=de;try{return J()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,de){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Z=p;p=J;try{return de()}finally{p=Z}},t.unstable_scheduleCallback=function(J,de,Z){var le=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?le+Z:le):Z=le,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Z+O,J={id:h++,callback:de,priorityLevel:J,startTime:Z,expirationTime:O,sortIndex:-1},Z>le?(J.sortIndex=Z,e(c,J),n(l)===null&&J===n(c)&&(E?(R(v),v=-1):E=!0,Le(M,Z-le))):(J.sortIndex=O,e(l,J),y||_||(y=!0,St(z))),J},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(J){var de=p;return function(){var Z=p;p=de;try{return J.apply(this,arguments)}finally{p=Z}}}})(TS);ES.exports=TS;var qN=ES.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=B,lr=qN;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SS=new Set,vu={};function Ro(t,e){Ra(t,e),Ra(t+"Capture",e)}function Ra(t,e){for(vu[t]=e,t=0;t<e.length;t++)SS.add(e[t])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,GN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c0={},h0={};function QN(t){return fm.call(h0,t)?!0:fm.call(c0,t)?!1:GN.test(t)?h0[t]=!0:(c0[t]=!0,!1)}function YN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XN(t,e,n,r){if(e===null||typeof e>"u"||YN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var i_=/[\-:]([a-z])/g;function s_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(i_,s_);dn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(i_,s_);dn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(i_,s_);dn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function o_(t,e,n,r){var i=dn.hasOwnProperty(e)?dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XN(e,n,i,r)&&(n=null),r||i===null?QN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xi=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$c=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),RS=Symbol.for("react.provider"),IS=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),u_=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),d0=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=d0&&t[d0]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,lp;function Ul(t){if(lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lp=e&&e[1]||""}return`
`+lp+t}var up=!1;function cp(t,e){if(!t||up)return"";up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function JN(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=cp(t.type,!1),t;case 11:return t=cp(t.type.render,!1),t;case 1:return t=cp(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Yo:return"Portal";case pm:return"Profiler";case a_:return"StrictMode";case mm:return"Suspense";case gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IS:return(t.displayName||"Context")+".Consumer";case RS:return(t._context.displayName||"Context")+".Provider";case l_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case u_:return e=t.displayName||null,e!==null?e:_m(t.type)||"Memo";case zi:e=t._payload,t=t._init;try{return _m(t(e))}catch{}}return null}function ZN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(e);case 8:return e===a_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eb(t){var e=AS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bc(t){t._valueTracker||(t._valueTracker=eb(t))}function kS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ym(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function f0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PS(t,e){e=e.checked,e!=null&&o_(t,"checked",e,!1)}function vm(t,e){PS(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||Fh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function ha(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Em(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function m0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(jl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function NS(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function g0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zc,xS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(t){tb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yl[e]=Yl[t]})});function DS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yl.hasOwnProperty(t)&&Yl[t]?(""+e).trim():e+"px"}function LS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=DS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nb=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sm(t,e){if(e){if(nb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Rm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function c_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,da=null,fa=null;function _0(t){if(t=nc(t)){if(typeof Cm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=qd(e),Cm(t.stateNode,t.type,e))}}function OS(t){da?fa?fa.push(t):fa=[t]:da=t}function MS(){if(da){var t=da,e=fa;if(fa=da=null,_0(t),e)for(t=0;t<e.length;t++)_0(e[t])}}function VS(t,e){return t(e)}function FS(){}var hp=!1;function US(t,e,n){if(hp)return t(e,n);hp=!0;try{return VS(t,e,n)}finally{hp=!1,(da!==null||fa!==null)&&(FS(),MS())}}function Eu(t,e){var n=t.stateNode;if(n===null)return null;var r=qd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Am=!1;if(Ii)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Am=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Am=!1}function rb(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Xl=!1,Uh=null,jh=!1,km=null,ib={onError:function(t){Xl=!0,Uh=t}};function sb(t,e,n,r,i,s,o,a,l){Xl=!1,Uh=null,rb.apply(ib,arguments)}function ob(t,e,n,r,i,s,o,a,l){if(sb.apply(this,arguments),Xl){if(Xl){var c=Uh;Xl=!1,Uh=null}else throw Error(Y(198));jh||(jh=!0,km=c)}}function Io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y0(t){if(Io(t)!==t)throw Error(Y(188))}function ab(t){var e=t.alternate;if(!e){if(e=Io(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return y0(i),t;if(s===r)return y0(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function $S(t){return t=ab(t),t!==null?BS(t):null}function BS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BS(t);if(e!==null)return e;t=t.sibling}return null}var zS=lr.unstable_scheduleCallback,v0=lr.unstable_cancelCallback,lb=lr.unstable_shouldYield,ub=lr.unstable_requestPaint,Ut=lr.unstable_now,cb=lr.unstable_getCurrentPriorityLevel,h_=lr.unstable_ImmediatePriority,WS=lr.unstable_UserBlockingPriority,$h=lr.unstable_NormalPriority,hb=lr.unstable_LowPriority,HS=lr.unstable_IdlePriority,Bd=null,Yr=null;function db(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Bd,t,void 0,(t.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:mb,fb=Math.log,pb=Math.LN2;function mb(t){return t>>>=0,t===0?32:31-(fb(t)/pb|0)|0}var Wc=64,Hc=4194304;function $l(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$l(a):(s&=o,s!==0&&(r=$l(s)))}else o=n&~i,o!==0?r=$l(o):s!==0&&(r=$l(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dr(e),i=1<<n,r|=t[n],e&=~i;return r}function gb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _b(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Dr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gb(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Pm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qS(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dr(e),t[e]=n}function yb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Dr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function d_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nt=0;function KS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GS,f_,QS,YS,XS,Nm=!1,qc=[],ts=null,ns=null,rs=null,Tu=new Map,Su=new Map,qi=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(e.pointerId)}}function wl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&f_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wb(t,e,n,r,i){switch(e){case"focusin":return ts=wl(ts,t,e,n,r,i),!0;case"dragenter":return ns=wl(ns,t,e,n,r,i),!0;case"mouseover":return rs=wl(rs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tu.set(s,wl(Tu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Su.set(s,wl(Su.get(s)||null,t,e,n,r,i)),!0}return!1}function JS(t){var e=Hs(t.target);if(e!==null){var n=Io(e);if(n!==null){if(e=n.tag,e===13){if(e=jS(n),e!==null){t.blockedOn=e,XS(t.priority,function(){QS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Im=r,n.target.dispatchEvent(r),Im=null}else return e=nc(n),e!==null&&f_(e),t.blockedOn=n,!1;e.shift()}return!0}function E0(t,e,n){yh(t)&&n.delete(e)}function Eb(){Nm=!1,ts!==null&&yh(ts)&&(ts=null),ns!==null&&yh(ns)&&(ns=null),rs!==null&&yh(rs)&&(rs=null),Tu.forEach(E0),Su.forEach(E0)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,Nm||(Nm=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,Eb)))}function Ru(t){function e(i){return El(i,t)}if(0<qc.length){El(qc[0],t);for(var n=1;n<qc.length;n++){var r=qc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&El(ts,t),ns!==null&&El(ns,t),rs!==null&&El(rs,t),Tu.forEach(e),Su.forEach(e),n=0;n<qi.length;n++)r=qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)JS(n),n.blockedOn===null&&qi.shift()}var pa=xi.ReactCurrentBatchConfig,zh=!0;function Tb(t,e,n,r){var i=nt,s=pa.transition;pa.transition=null;try{nt=1,p_(t,e,n,r)}finally{nt=i,pa.transition=s}}function Sb(t,e,n,r){var i=nt,s=pa.transition;pa.transition=null;try{nt=4,p_(t,e,n,r)}finally{nt=i,pa.transition=s}}function p_(t,e,n,r){if(zh){var i=bm(t,e,n,r);if(i===null)Tp(t,e,r,Wh,n),w0(t,r);else if(wb(i,t,e,n,r))r.stopPropagation();else if(w0(t,r),e&4&&-1<vb.indexOf(t)){for(;i!==null;){var s=nc(i);if(s!==null&&GS(s),s=bm(t,e,n,r),s===null&&Tp(t,e,r,Wh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tp(t,e,r,null,n)}}var Wh=null;function bm(t,e,n,r){if(Wh=null,t=c_(r),t=Hs(t),t!==null)if(e=Io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wh=t,null}function ZS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cb()){case h_:return 1;case WS:return 4;case $h:case hb:return 16;case HS:return 536870912;default:return 16}default:return 16}}var Ji=null,m_=null,vh=null;function eR(){if(vh)return vh;var t,e=m_,n=e.length,r,i="value"in Ji?Ji.value:Ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vh=i.slice(t,1<r?1-r:void 0)}function wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kc(){return!0}function T0(){return!1}function cr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kc:T0,this.isPropagationStopped=T0,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kc)},persist:function(){},isPersistent:Kc}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g_=cr(Qa),tc=Pt({},Qa,{view:0,detail:0}),Rb=cr(tc),fp,pp,Tl,zd=Pt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:__,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(fp=t.screenX-Tl.screenX,pp=t.screenY-Tl.screenY):pp=fp=0,Tl=t),fp)},movementY:function(t){return"movementY"in t?t.movementY:pp}}),S0=cr(zd),Ib=Pt({},zd,{dataTransfer:0}),Cb=cr(Ib),Ab=Pt({},tc,{relatedTarget:0}),mp=cr(Ab),kb=Pt({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Pb=cr(kb),Nb=Pt({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bb=cr(Nb),xb=Pt({},Qa,{data:0}),R0=cr(xb),Db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ob[t])?!!e[t]:!1}function __(){return Mb}var Vb=Pt({},tc,{key:function(t){if(t.key){var e=Db[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:__,charCode:function(t){return t.type==="keypress"?wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fb=cr(Vb),Ub=Pt({},zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I0=cr(Ub),jb=Pt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:__}),$b=cr(jb),Bb=Pt({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zb=cr(Bb),Wb=Pt({},zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hb=cr(Wb),qb=[9,13,27,32],y_=Ii&&"CompositionEvent"in window,Jl=null;Ii&&"documentMode"in document&&(Jl=document.documentMode);var Kb=Ii&&"TextEvent"in window&&!Jl,tR=Ii&&(!y_||Jl&&8<Jl&&11>=Jl),C0=" ",A0=!1;function nR(t,e){switch(t){case"keyup":return qb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jo=!1;function Gb(t,e){switch(t){case"compositionend":return rR(e);case"keypress":return e.which!==32?null:(A0=!0,C0);case"textInput":return t=e.data,t===C0&&A0?null:t;default:return null}}function Qb(t,e){if(Jo)return t==="compositionend"||!y_&&nR(t,e)?(t=eR(),vh=m_=Ji=null,Jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tR&&e.locale!=="ko"?null:e.data;default:return null}}var Yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yb[t.type]:e==="textarea"}function iR(t,e,n,r){OS(r),e=Hh(e,"onChange"),0<e.length&&(n=new g_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,Iu=null;function Xb(t){mR(t,0)}function Wd(t){var e=ta(t);if(kS(e))return t}function Jb(t,e){if(t==="change")return e}var sR=!1;if(Ii){var gp;if(Ii){var _p="oninput"in document;if(!_p){var P0=document.createElement("div");P0.setAttribute("oninput","return;"),_p=typeof P0.oninput=="function"}gp=_p}else gp=!1;sR=gp&&(!document.documentMode||9<document.documentMode)}function N0(){Zl&&(Zl.detachEvent("onpropertychange",oR),Iu=Zl=null)}function oR(t){if(t.propertyName==="value"&&Wd(Iu)){var e=[];iR(e,Iu,t,c_(t)),US(Xb,e)}}function Zb(t,e,n){t==="focusin"?(N0(),Zl=e,Iu=n,Zl.attachEvent("onpropertychange",oR)):t==="focusout"&&N0()}function ex(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wd(Iu)}function tx(t,e){if(t==="click")return Wd(e)}function nx(t,e){if(t==="input"||t==="change")return Wd(e)}function rx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mr=typeof Object.is=="function"?Object.is:rx;function Cu(t,e){if(Mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fm.call(e,i)||!Mr(t[i],e[i]))return!1}return!0}function b0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x0(t,e){var n=b0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b0(n)}}function aR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lR(){for(var t=window,e=Fh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fh(t.document)}return e}function v_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ix(t){var e=lR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aR(n.ownerDocument.documentElement,n)){if(r!==null&&v_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=x0(n,s);var o=x0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sx=Ii&&"documentMode"in document&&11>=document.documentMode,Zo=null,xm=null,eu=null,Dm=!1;function D0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dm||Zo==null||Zo!==Fh(r)||(r=Zo,"selectionStart"in r&&v_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eu&&Cu(eu,r)||(eu=r,r=Hh(xm,"onSelect"),0<r.length&&(e=new g_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zo)))}function Gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},yp={},uR={};Ii&&(uR=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Hd(t){if(yp[t])return yp[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uR)return yp[t]=e[n];return t}var cR=Hd("animationend"),hR=Hd("animationiteration"),dR=Hd("animationstart"),fR=Hd("transitionend"),pR=new Map,L0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){pR.set(t,e),Ro(e,[t])}for(var vp=0;vp<L0.length;vp++){var wp=L0[vp],ox=wp.toLowerCase(),ax=wp[0].toUpperCase()+wp.slice(1);Es(ox,"on"+ax)}Es(cR,"onAnimationEnd");Es(hR,"onAnimationIteration");Es(dR,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(fR,"onTransitionEnd");Ra("onMouseEnter",["mouseout","mouseover"]);Ra("onMouseLeave",["mouseout","mouseover"]);Ra("onPointerEnter",["pointerout","pointerover"]);Ra("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function O0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ob(r,e,void 0,t),t.currentTarget=null}function mR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;O0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;O0(i,a,c),s=l}}}if(jh)throw t=km,jh=!1,km=null,t}function ft(t,e){var n=e[Fm];n===void 0&&(n=e[Fm]=new Set);var r=t+"__bubble";n.has(r)||(gR(e,t,2,!1),n.add(r))}function Ep(t,e,n){var r=0;e&&(r|=4),gR(n,t,r,e)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[Qc]){t[Qc]=!0,SS.forEach(function(n){n!=="selectionchange"&&(lx.has(n)||Ep(n,!1,t),Ep(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qc]||(e[Qc]=!0,Ep("selectionchange",!1,e))}}function gR(t,e,n,r){switch(ZS(e)){case 1:var i=Tb;break;case 4:i=Sb;break;default:i=p_}n=i.bind(null,e,n,t),i=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}US(function(){var c=s,h=c_(n),d=[];e:{var p=pR.get(t);if(p!==void 0){var _=g_,y=t;switch(t){case"keypress":if(wh(n)===0)break e;case"keydown":case"keyup":_=Fb;break;case"focusin":y="focus",_=mp;break;case"focusout":y="blur",_=mp;break;case"beforeblur":case"afterblur":_=mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Cb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=$b;break;case cR:case hR:case dR:_=Pb;break;case fR:_=zb;break;case"scroll":_=Rb;break;case"wheel":_=Hb;break;case"copy":case"cut":case"paste":_=bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=I0}var E=(e&4)!==0,b=!E&&t==="scroll",R=E?p!==null?p+"Capture":null:p;E=[];for(var g=c,I;g!==null;){I=g;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,R!==null&&(M=Eu(g,R),M!=null&&E.push(ku(g,M,I)))),b)break;g=g.return}0<E.length&&(p=new _(p,y,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Im&&(y=n.relatedTarget||n.fromElement)&&(Hs(y)||y[Ci]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?Hs(y):null,y!==null&&(b=Io(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(E=S0,M="onMouseLeave",R="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=I0,M="onPointerLeave",R="onPointerEnter",g="pointer"),b=_==null?p:ta(_),I=y==null?p:ta(y),p=new E(M,g+"leave",_,n,h),p.target=b,p.relatedTarget=I,M=null,Hs(h)===c&&(E=new E(R,g+"enter",y,n,h),E.target=I,E.relatedTarget=b,M=E),b=M,_&&y)t:{for(E=_,R=y,g=0,I=E;I;I=zo(I))g++;for(I=0,M=R;M;M=zo(M))I++;for(;0<g-I;)E=zo(E),g--;for(;0<I-g;)R=zo(R),I--;for(;g--;){if(E===R||R!==null&&E===R.alternate)break t;E=zo(E),R=zo(R)}E=null}else E=null;_!==null&&M0(d,p,_,E,!1),y!==null&&b!==null&&M0(d,b,y,E,!0)}}e:{if(p=c?ta(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var z=Jb;else if(k0(p))if(sR)z=nx;else{z=ex;var P=Zb}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=tx);if(z&&(z=z(t,c))){iR(d,z,n,h);break e}P&&P(t,p,c),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&wm(p,"number",p.value)}switch(P=c?ta(c):window,t){case"focusin":(k0(P)||P.contentEditable==="true")&&(Zo=P,xm=c,eu=null);break;case"focusout":eu=xm=Zo=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,D0(d,n,h);break;case"selectionchange":if(sx)break;case"keydown":case"keyup":D0(d,n,h)}var S;if(y_)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Jo?nR(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(tR&&n.locale!=="ko"&&(Jo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Jo&&(S=eR()):(Ji=h,m_="value"in Ji?Ji.value:Ji.textContent,Jo=!0)),P=Hh(c,v),0<P.length&&(v=new R0(v,t,null,n,h),d.push({event:v,listeners:P}),S?v.data=S:(S=rR(n),S!==null&&(v.data=S)))),(S=Kb?Gb(t,n):Qb(t,n))&&(c=Hh(c,"onBeforeInput"),0<c.length&&(h=new R0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}mR(d,e)})}function ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Eu(t,n),s!=null&&r.unshift(ku(t,s,i)),s=Eu(t,e),s!=null&&r.push(ku(t,s,i))),t=t.return}return r}function zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function M0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Eu(n,s),l!=null&&o.unshift(ku(n,l,a))):i||(l=Eu(n,s),l!=null&&o.push(ku(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ux=/\r\n?/g,cx=/\u0000|\uFFFD/g;function V0(t){return(typeof t=="string"?t:""+t).replace(ux,`
`).replace(cx,"")}function Yc(t,e,n){if(e=V0(e),V0(t)!==e&&n)throw Error(Y(425))}function qh(){}var Lm=null,Om=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(fx)}:Vm;function fx(t){setTimeout(function(){throw t})}function Sp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ru(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ru(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ya,Pu="__reactProps$"+Ya,Ci="__reactContainer$"+Ya,Fm="__reactEvents$"+Ya,px="__reactListeners$"+Ya,mx="__reactHandles$"+Ya;function Hs(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U0(t);t!==null;){if(n=t[qr])return n;t=U0(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[qr]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function qd(t){return t[Pu]||null}var Um=[],na=-1;function Ts(t){return{current:t}}function _t(t){0>na||(t.current=Um[na],Um[na]=null,na--)}function lt(t,e){na++,Um[na]=t.current,t.current=e}var ms={},An=Ts(ms),zn=Ts(!1),no=ms;function Ia(t,e){var n=t.type.contextTypes;if(!n)return ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wn(t){return t=t.childContextTypes,t!=null}function Kh(){_t(zn),_t(An)}function j0(t,e,n){if(An.current!==ms)throw Error(Y(168));lt(An,e),lt(zn,n)}function _R(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,ZN(t)||"Unknown",i));return Pt({},n,r)}function Gh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,no=An.current,lt(An,t),lt(zn,zn.current),!0}function $0(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=_R(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,_t(zn),_t(An),lt(An,t)):_t(zn),lt(zn,n)}var pi=null,Kd=!1,Rp=!1;function yR(t){pi===null?pi=[t]:pi.push(t)}function gx(t){Kd=!0,yR(t)}function Ss(){if(!Rp&&pi!==null){Rp=!0;var t=0,e=nt;try{var n=pi;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,Kd=!1}catch(i){throw pi!==null&&(pi=pi.slice(t+1)),zS(h_,Ss),i}finally{nt=e,Rp=!1}}return null}var ra=[],ia=0,Qh=null,Yh=0,fr=[],pr=0,ro=null,mi=1,gi="";function Us(t,e){ra[ia++]=Yh,ra[ia++]=Qh,Qh=t,Yh=e}function vR(t,e,n){fr[pr++]=mi,fr[pr++]=gi,fr[pr++]=ro,ro=t;var r=mi;t=gi;var i=32-Dr(r)-1;r&=~(1<<i),n+=1;var s=32-Dr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mi=1<<32-Dr(e)+i|n<<i|r,gi=s+t}else mi=1<<s|n<<i|r,gi=t}function w_(t){t.return!==null&&(Us(t,1),vR(t,1,0))}function E_(t){for(;t===Qh;)Qh=ra[--ia],ra[ia]=null,Yh=ra[--ia],ra[ia]=null;for(;t===ro;)ro=fr[--pr],fr[pr]=null,gi=fr[--pr],fr[pr]=null,mi=fr[--pr],fr[pr]=null}var sr=null,rr=null,Et=!1,Nr=null;function wR(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function B0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,rr=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,rr=null,!0):!1;default:return!1}}function jm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(Et){var e=rr;if(e){var n=e;if(!B0(t,e)){if(jm(t))throw Error(Y(418));e=is(n.nextSibling);var r=sr;e&&B0(t,e)?wR(r,n):(t.flags=t.flags&-4097|2,Et=!1,sr=t)}}else{if(jm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Et=!1,sr=t}}}function z0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function Xc(t){if(t!==sr)return!1;if(!Et)return z0(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=rr)){if(jm(t))throw ER(),Error(Y(418));for(;e;)wR(t,e),e=is(e.nextSibling)}if(z0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=sr?is(t.stateNode.nextSibling):null;return!0}function ER(){for(var t=rr;t;)t=is(t.nextSibling)}function Ca(){rr=sr=null,Et=!1}function T_(t){Nr===null?Nr=[t]:Nr.push(t)}var _x=xi.ReactCurrentBatchConfig;function Sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Jc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function W0(t){var e=t._init;return e(t._payload)}function TR(t){function e(R,g){if(t){var I=R.deletions;I===null?(R.deletions=[g],R.flags|=16):I.push(g)}}function n(R,g){if(!t)return null;for(;g!==null;)e(R,g),g=g.sibling;return null}function r(R,g){for(R=new Map;g!==null;)g.key!==null?R.set(g.key,g):R.set(g.index,g),g=g.sibling;return R}function i(R,g){return R=ls(R,g),R.index=0,R.sibling=null,R}function s(R,g,I){return R.index=I,t?(I=R.alternate,I!==null?(I=I.index,I<g?(R.flags|=2,g):I):(R.flags|=2,g)):(R.flags|=1048576,g)}function o(R){return t&&R.alternate===null&&(R.flags|=2),R}function a(R,g,I,M){return g===null||g.tag!==6?(g=bp(I,R.mode,M),g.return=R,g):(g=i(g,I),g.return=R,g)}function l(R,g,I,M){var z=I.type;return z===Xo?h(R,g,I.props.children,M,I.key):g!==null&&(g.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zi&&W0(z)===g.type)?(M=i(g,I.props),M.ref=Sl(R,g,I),M.return=R,M):(M=Ah(I.type,I.key,I.props,null,R.mode,M),M.ref=Sl(R,g,I),M.return=R,M)}function c(R,g,I,M){return g===null||g.tag!==4||g.stateNode.containerInfo!==I.containerInfo||g.stateNode.implementation!==I.implementation?(g=xp(I,R.mode,M),g.return=R,g):(g=i(g,I.children||[]),g.return=R,g)}function h(R,g,I,M,z){return g===null||g.tag!==7?(g=eo(I,R.mode,M,z),g.return=R,g):(g=i(g,I),g.return=R,g)}function d(R,g,I){if(typeof g=="string"&&g!==""||typeof g=="number")return g=bp(""+g,R.mode,I),g.return=R,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $c:return I=Ah(g.type,g.key,g.props,null,R.mode,I),I.ref=Sl(R,null,g),I.return=R,I;case Yo:return g=xp(g,R.mode,I),g.return=R,g;case zi:var M=g._init;return d(R,M(g._payload),I)}if(jl(g)||yl(g))return g=eo(g,R.mode,I,null),g.return=R,g;Jc(R,g)}return null}function p(R,g,I,M){var z=g!==null?g.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:a(R,g,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case $c:return I.key===z?l(R,g,I,M):null;case Yo:return I.key===z?c(R,g,I,M):null;case zi:return z=I._init,p(R,g,z(I._payload),M)}if(jl(I)||yl(I))return z!==null?null:h(R,g,I,M,null);Jc(R,I)}return null}function _(R,g,I,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return R=R.get(I)||null,a(g,R,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case $c:return R=R.get(M.key===null?I:M.key)||null,l(g,R,M,z);case Yo:return R=R.get(M.key===null?I:M.key)||null,c(g,R,M,z);case zi:var P=M._init;return _(R,g,I,P(M._payload),z)}if(jl(M)||yl(M))return R=R.get(I)||null,h(g,R,M,z,null);Jc(g,M)}return null}function y(R,g,I,M){for(var z=null,P=null,S=g,v=g=0,T=null;S!==null&&v<I.length;v++){S.index>v?(T=S,S=null):T=S.sibling;var A=p(R,S,I[v],M);if(A===null){S===null&&(S=T);break}t&&S&&A.alternate===null&&e(R,S),g=s(A,g,v),P===null?z=A:P.sibling=A,P=A,S=T}if(v===I.length)return n(R,S),Et&&Us(R,v),z;if(S===null){for(;v<I.length;v++)S=d(R,I[v],M),S!==null&&(g=s(S,g,v),P===null?z=S:P.sibling=S,P=S);return Et&&Us(R,v),z}for(S=r(R,S);v<I.length;v++)T=_(S,R,v,I[v],M),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?v:T.key),g=s(T,g,v),P===null?z=T:P.sibling=T,P=T);return t&&S.forEach(function(k){return e(R,k)}),Et&&Us(R,v),z}function E(R,g,I,M){var z=yl(I);if(typeof z!="function")throw Error(Y(150));if(I=z.call(I),I==null)throw Error(Y(151));for(var P=z=null,S=g,v=g=0,T=null,A=I.next();S!==null&&!A.done;v++,A=I.next()){S.index>v?(T=S,S=null):T=S.sibling;var k=p(R,S,A.value,M);if(k===null){S===null&&(S=T);break}t&&S&&k.alternate===null&&e(R,S),g=s(k,g,v),P===null?z=k:P.sibling=k,P=k,S=T}if(A.done)return n(R,S),Et&&Us(R,v),z;if(S===null){for(;!A.done;v++,A=I.next())A=d(R,A.value,M),A!==null&&(g=s(A,g,v),P===null?z=A:P.sibling=A,P=A);return Et&&Us(R,v),z}for(S=r(R,S);!A.done;v++,A=I.next())A=_(S,R,v,A.value,M),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?v:A.key),g=s(A,g,v),P===null?z=A:P.sibling=A,P=A);return t&&S.forEach(function(D){return e(R,D)}),Et&&Us(R,v),z}function b(R,g,I,M){if(typeof I=="object"&&I!==null&&I.type===Xo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case $c:e:{for(var z=I.key,P=g;P!==null;){if(P.key===z){if(z=I.type,z===Xo){if(P.tag===7){n(R,P.sibling),g=i(P,I.props.children),g.return=R,R=g;break e}}else if(P.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zi&&W0(z)===P.type){n(R,P.sibling),g=i(P,I.props),g.ref=Sl(R,P,I),g.return=R,R=g;break e}n(R,P);break}else e(R,P);P=P.sibling}I.type===Xo?(g=eo(I.props.children,R.mode,M,I.key),g.return=R,R=g):(M=Ah(I.type,I.key,I.props,null,R.mode,M),M.ref=Sl(R,g,I),M.return=R,R=M)}return o(R);case Yo:e:{for(P=I.key;g!==null;){if(g.key===P)if(g.tag===4&&g.stateNode.containerInfo===I.containerInfo&&g.stateNode.implementation===I.implementation){n(R,g.sibling),g=i(g,I.children||[]),g.return=R,R=g;break e}else{n(R,g);break}else e(R,g);g=g.sibling}g=xp(I,R.mode,M),g.return=R,R=g}return o(R);case zi:return P=I._init,b(R,g,P(I._payload),M)}if(jl(I))return y(R,g,I,M);if(yl(I))return E(R,g,I,M);Jc(R,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,g!==null&&g.tag===6?(n(R,g.sibling),g=i(g,I),g.return=R,R=g):(n(R,g),g=bp(I,R.mode,M),g.return=R,R=g),o(R)):n(R,g)}return b}var Aa=TR(!0),SR=TR(!1),Xh=Ts(null),Jh=null,sa=null,S_=null;function R_(){S_=sa=Jh=null}function I_(t){var e=Xh.current;_t(Xh),t._currentValue=e}function Bm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ma(t,e){Jh=t,S_=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function vr(t){var e=t._currentValue;if(S_!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(Jh===null)throw Error(Y(308));sa=t,Jh.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var qs=null;function C_(t){qs===null?qs=[t]:qs.push(t)}function RR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,C_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ai(t,r)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function A_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ai(t,n)}return i=r.interleaved,i===null?(e.next=e,C_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ai(t,n)}function Eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,d_(t,n)}}function H0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zh(t,e,n,r){var i=t.updateQueue;Wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(p=e,_=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(_,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(_,d,p):y,p==null)break e;d=Pt({},d,p);break e;case 2:Wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);so|=o,t.lanes=o,t.memoizedState=d}}function q0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var rc={},Xr=Ts(rc),Nu=Ts(rc),bu=Ts(rc);function Ks(t){if(t===rc)throw Error(Y(174));return t}function k_(t,e){switch(lt(bu,e),lt(Nu,t),lt(Xr,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tm(e,t)}_t(Xr),lt(Xr,e)}function ka(){_t(Xr),_t(Nu),_t(bu)}function CR(t){Ks(bu.current);var e=Ks(Xr.current),n=Tm(e,t.type);e!==n&&(lt(Nu,t),lt(Xr,n))}function P_(t){Nu.current===t&&(_t(Xr),_t(Nu))}var At=Ts(0);function ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ip=[];function N_(){for(var t=0;t<Ip.length;t++)Ip[t]._workInProgressVersionPrimary=null;Ip.length=0}var Th=xi.ReactCurrentDispatcher,Cp=xi.ReactCurrentBatchConfig,io=0,kt=null,qt=null,Zt=null,td=!1,tu=!1,xu=0,yx=0;function yn(){throw Error(Y(321))}function b_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mr(t[n],e[n]))return!1;return!0}function x_(t,e,n,r,i,s){if(io=s,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Th.current=t===null||t.memoizedState===null?Tx:Sx,t=n(r,i),tu){s=0;do{if(tu=!1,xu=0,25<=s)throw Error(Y(301));s+=1,Zt=qt=null,e.updateQueue=null,Th.current=Rx,t=n(r,i)}while(tu)}if(Th.current=nd,e=qt!==null&&qt.next!==null,io=0,Zt=qt=kt=null,td=!1,e)throw Error(Y(300));return t}function D_(){var t=xu!==0;return xu=0,t}function Hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?kt.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function wr(){if(qt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=Zt===null?kt.memoizedState:Zt.next;if(e!==null)Zt=e,qt=t;else{if(t===null)throw Error(Y(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Zt===null?kt.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function Du(t,e){return typeof e=="function"?e(t):e}function Ap(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=qt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((io&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,kt.lanes|=h,so|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Mr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,kt.lanes|=s,so|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kp(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Mr(s,e.memoizedState)||(Un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function AR(){}function kR(t,e){var n=kt,r=wr(),i=e(),s=!Mr(r.memoizedState,i);if(s&&(r.memoizedState=i,Un=!0),r=r.queue,L_(bR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Zt!==null&&Zt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,NR.bind(null,n,r,i,e),void 0,null),nn===null)throw Error(Y(349));io&30||PR(n,e,i)}return i}function PR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NR(t,e,n,r){e.value=n,e.getSnapshot=r,xR(e)&&DR(t)}function bR(t,e,n){return n(function(){xR(e)&&DR(t)})}function xR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mr(t,n)}catch{return!0}}function DR(t){var e=Ai(t,1);e!==null&&Lr(e,t,1,-1)}function K0(t){var e=Hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=Ex.bind(null,kt,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LR(){return wr().memoizedState}function Sh(t,e,n,r){var i=Hr();kt.flags|=t,i.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function Gd(t,e,n,r){var i=wr();r=r===void 0?null:r;var s=void 0;if(qt!==null){var o=qt.memoizedState;if(s=o.destroy,r!==null&&b_(r,o.deps)){i.memoizedState=Lu(e,n,s,r);return}}kt.flags|=t,i.memoizedState=Lu(1|e,n,s,r)}function G0(t,e){return Sh(8390656,8,t,e)}function L_(t,e){return Gd(2048,8,t,e)}function OR(t,e){return Gd(4,2,t,e)}function MR(t,e){return Gd(4,4,t,e)}function VR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FR(t,e,n){return n=n!=null?n.concat([t]):null,Gd(4,4,VR.bind(null,e,t),n)}function O_(){}function UR(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jR(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $R(t,e,n){return io&21?(Mr(n,e)||(n=qS(),kt.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function vx(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=Cp.transition;Cp.transition={};try{t(!1),e()}finally{nt=n,Cp.transition=r}}function BR(){return wr().memoizedState}function wx(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zR(t))WR(e,n);else if(n=RR(t,e,n,r),n!==null){var i=Dn();Lr(n,t,r,i),HR(n,e,r)}}function Ex(t,e,n){var r=as(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zR(t))WR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Mr(a,o)){var l=e.interleaved;l===null?(i.next=i,C_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=RR(t,e,i,r),n!==null&&(i=Dn(),Lr(n,t,r,i),HR(n,e,r))}}function zR(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function WR(t,e){tu=td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,d_(t,n)}}var nd={readContext:vr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},Tx={readContext:vr,useCallback:function(t,e){return Hr().memoizedState=[t,e===void 0?null:e],t},useContext:vr,useEffect:G0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4194308,4,VR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sh(4,2,t,e)},useMemo:function(t,e){var n=Hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wx.bind(null,kt,t),[r.memoizedState,t]},useRef:function(t){var e=Hr();return t={current:t},e.memoizedState=t},useState:K0,useDebugValue:O_,useDeferredValue:function(t){return Hr().memoizedState=t},useTransition:function(){var t=K0(!1),e=t[0];return t=vx.bind(null,t[1]),Hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=kt,i=Hr();if(Et){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),nn===null)throw Error(Y(349));io&30||PR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,G0(bR.bind(null,r,s,t),[t]),r.flags|=2048,Lu(9,NR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hr(),e=nn.identifierPrefix;if(Et){var n=gi,r=mi;n=(r&~(1<<32-Dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sx={readContext:vr,useCallback:UR,useContext:vr,useEffect:L_,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:MR,useMemo:jR,useReducer:Ap,useRef:LR,useState:function(){return Ap(Du)},useDebugValue:O_,useDeferredValue:function(t){var e=wr();return $R(e,qt.memoizedState,t)},useTransition:function(){var t=Ap(Du)[0],e=wr().memoizedState;return[t,e]},useMutableSource:AR,useSyncExternalStore:kR,useId:BR,unstable_isNewReconciler:!1},Rx={readContext:vr,useCallback:UR,useContext:vr,useEffect:L_,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:MR,useMemo:jR,useReducer:kp,useRef:LR,useState:function(){return kp(Du)},useDebugValue:O_,useDeferredValue:function(t){var e=wr();return qt===null?e.memoizedState=t:$R(e,qt.memoizedState,t)},useTransition:function(){var t=kp(Du)[0],e=wr().memoizedState;return[t,e]},useMutableSource:AR,useSyncExternalStore:kR,useId:BR,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qd={isMounted:function(t){return(t=t._reactInternals)?Io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=as(t),s=Ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Lr(e,t,i,r),Eh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=as(t),s=Ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Lr(e,t,i,r),Eh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),r=as(t),i=Ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(Lr(e,t,r,n),Eh(e,t,r))}};function Q0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cu(n,r)||!Cu(i,s):!0}function qR(t,e,n){var r=!1,i=ms,s=e.contextType;return typeof s=="object"&&s!==null?s=vr(s):(i=Wn(e)?no:An.current,r=e.contextTypes,s=(r=r!=null)?Ia(t,i):ms),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Y0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qd.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},A_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vr(s):(s=Wn(e)?no:An.current,i.context=Ia(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qd.enqueueReplaceState(i,i.state,null),Zh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pa(t,e){try{var n="",r=e;do n+=JN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function KR(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){id||(id=!0,tg=r),Hm(t,e)},n}function GR(t,e,n){n=Ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hm(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function X0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ix;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ux.bind(null,t,e,n),e.then(t,t))}function J0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Z0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var Cx=xi.ReactCurrentOwner,Un=!1;function xn(t,e,n,r){e.child=t===null?SR(e,null,n,r):Aa(e,t.child,n,r)}function ew(t,e,n,r,i){n=n.render;var s=e.ref;return ma(e,i),r=x_(t,e,n,r,s,i),n=D_(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Et&&n&&w_(e),e.flags|=1,xn(t,e,r,i),e.child)}function tw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!z_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,QR(t,e,s,r,i)):(t=Ah(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(o,r)&&t.ref===e.ref)return ki(t,e,i)}return e.flags|=1,t=ls(s,r),t.ref=e.ref,t.return=e,e.child=t}function QR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cu(s,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,ki(t,e,i)}return qm(t,e,n,r,i)}function YR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(aa,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(aa,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(aa,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,lt(aa,tr),tr|=r;return xn(t,e,i,n),e.child}function XR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qm(t,e,n,r,i){var s=Wn(n)?no:An.current;return s=Ia(e,s),ma(e,i),n=x_(t,e,n,r,s,i),r=D_(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Et&&r&&w_(e),e.flags|=1,xn(t,e,n,i),e.child)}function nw(t,e,n,r,i){if(Wn(n)){var s=!0;Gh(e)}else s=!1;if(ma(e,i),e.stateNode===null)Rh(t,e),qR(e,n,r),Wm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=vr(c):(c=Wn(n)?no:An.current,c=Ia(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Y0(e,o,r,c),Wi=!1;var p=e.memoizedState;o.state=p,Zh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||zn.current||Wi?(typeof h=="function"&&(zm(e,n,h,r),l=e.memoizedState),(a=Wi||Q0(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ar(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vr(l):(l=Wn(n)?no:An.current,l=Ia(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&Y0(e,o,r,l),Wi=!1,p=e.memoizedState,o.state=p,Zh(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||zn.current||Wi?(typeof _=="function"&&(zm(e,n,_,r),y=e.memoizedState),(c=Wi||Q0(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Km(t,e,n,r,s,i)}function Km(t,e,n,r,i,s){XR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$0(e,n,!1),ki(t,e,s);r=e.stateNode,Cx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,a,s)):xn(t,e,a,s),e.memoizedState=r.state,i&&$0(e,n,!0),e.child}function JR(t){var e=t.stateNode;e.pendingContext?j0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j0(t,e.context,!1),k_(t,e.containerInfo)}function rw(t,e,n,r,i){return Ca(),T_(i),e.flags|=256,xn(t,e,n,r),e.child}var Gm={dehydrated:null,treeContext:null,retryLane:0};function Qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZR(t,e,n){var r=e.pendingProps,i=At.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(At,i&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jd(o,r,0,null),t=eo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qm(n),e.memoizedState=Gm,t):M_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ax(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ls(a,s):(s=eo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gm,r}return s=t.child,t=s.sibling,r=ls(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function M_(t,e){return e=Jd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zc(t,e,n,r){return r!==null&&T_(r),Aa(e,t.child,null,n),t=M_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ax(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pp(Error(Y(422))),Zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jd({mode:"visible",children:r.children},i,0,null),s=eo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=Qm(o),e.memoizedState=Gm,s);if(!(e.mode&1))return Zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Pp(s,r,void 0),Zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Un||a){if(r=nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ai(t,i),Lr(r,t,i,-1))}return B_(),r=Pp(Error(Y(421))),Zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rr=is(i.nextSibling),sr=e,Et=!0,Nr=null,t!==null&&(fr[pr++]=mi,fr[pr++]=gi,fr[pr++]=ro,mi=t.id,gi=t.overflow,ro=e),e=M_(e,r.children),e.flags|=4096,e)}function iw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bm(t.return,e,n)}function Np(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function eI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xn(t,e,r.children,n),r=At.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iw(t,n,e);else if(t.tag===19)iw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(At,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ed(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Np(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ed(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Np(e,!0,n,null,s);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kx(t,e,n){switch(e.tag){case 3:JR(e),Ca();break;case 5:CR(e);break;case 1:Wn(e.type)&&Gh(e);break;case 4:k_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lt(Xh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(At,At.current&1),e.flags|=128,null):n&e.child.childLanes?ZR(t,e,n):(lt(At,At.current&1),t=ki(t,e,n),t!==null?t.sibling:null);lt(At,At.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(At,At.current),r)break;return null;case 22:case 23:return e.lanes=0,YR(t,e,n)}return ki(t,e,n)}var tI,Ym,nI,rI;tI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ym=function(){};nI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ks(Xr.current);var s=null;switch(n){case"input":i=ym(t,i),r=ym(t,r),s=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),s=[];break;case"textarea":i=Em(t,i),r=Em(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qh)}Sm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ft("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};rI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rl(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Px(t,e,n){var r=e.pendingProps;switch(E_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Wn(e.type)&&Kh(),vn(e),null;case 3:return r=e.stateNode,ka(),_t(zn),_t(An),N_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nr!==null&&(ig(Nr),Nr=null))),Ym(t,e),vn(e),null;case 5:P_(e);var i=Ks(bu.current);if(n=e.type,t!==null&&e.stateNode!=null)nI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return vn(e),null}if(t=Ks(Xr.current),Xc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qr]=e,r[Pu]=s,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(i=0;i<Bl.length;i++)ft(Bl[i],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":f0(r,s),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ft("invalid",r);break;case"textarea":m0(r,s),ft("invalid",r)}Sm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",""+a]):vu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ft("scroll",r)}switch(n){case"input":Bc(r),p0(r,s,!0);break;case"textarea":Bc(r),g0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=qh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qr]=e,t[Pu]=r,tI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rm(n,r),n){case"dialog":ft("cancel",t),ft("close",t),i=r;break;case"iframe":case"object":case"embed":ft("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bl.length;i++)ft(Bl[i],t);i=r;break;case"source":ft("error",t),i=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),i=r;break;case"details":ft("toggle",t),i=r;break;case"input":f0(t,r),i=ym(t,r),ft("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),ft("invalid",t);break;case"textarea":m0(t,r),i=Em(t,r),ft("invalid",t);break;default:i=r}Sm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wu(t,l):typeof l=="number"&&wu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ft("scroll",t):l!=null&&o_(t,s,l,o))}switch(n){case"input":Bc(t),p0(t,r,!1);break;case"textarea":Bc(t),g0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ha(t,!!r.multiple,s,!1):r.defaultValue!=null&&ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)rI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ks(bu.current),Ks(Xr.current),Xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(s=r.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:Yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return vn(e),null;case 13:if(_t(At),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&rr!==null&&e.mode&1&&!(e.flags&128))ER(),Ca(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[qr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),s=!1}else Nr!==null&&(ig(Nr),Nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||At.current&1?Gt===0&&(Gt=3):B_())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return ka(),Ym(t,e),t===null&&Au(e.stateNode.containerInfo),vn(e),null;case 10:return I_(e.type._context),vn(e),null;case 17:return Wn(e.type)&&Kh(),vn(e),null;case 19:if(_t(At),s=e.memoizedState,s===null)return vn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rl(s,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ed(t),o!==null){for(e.flags|=128,Rl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(At,At.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ut()>Na&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304)}else{if(!r)if(t=ed(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Et)return vn(e),null}else 2*Ut()-s.renderingStartTime>Na&&n!==1073741824&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ut(),e.sibling=null,n=At.current,lt(At,r?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return $_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Nx(t,e){switch(E_(e),e.tag){case 1:return Wn(e.type)&&Kh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),_t(zn),_t(An),N_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return P_(e),null;case 13:if(_t(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(At),null;case 4:return ka(),null;case 10:return I_(e.type._context),null;case 22:case 23:return $_(),null;case 24:return null;default:return null}}var eh=!1,Tn=!1,bx=typeof WeakSet=="function"?WeakSet:Set,ae=null;function oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function Xm(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var sw=!1;function xx(t,e){if(Lm=zh,t=lR(),v_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)p=d,d=_;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:t,selectionRange:n},zh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,b=y.memoizedState,R=e.stateNode,g=R.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ar(e.type,E),b);R.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Dt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return y=sw,sw=!1,y}function nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xm(e,n,s)}i=i.next}while(i!==r)}}function Yd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iI(t){var e=t.alternate;e!==null&&(t.alternate=null,iI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[Pu],delete e[Fm],delete e[px],delete e[mx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sI(t){return t.tag===5||t.tag===3||t.tag===4}function ow(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qh));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var an=null,kr=!1;function ji(t,e,n){for(n=n.child;n!==null;)oI(t,e,n),n=n.sibling}function oI(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Bd,n)}catch{}switch(n.tag){case 5:Tn||oa(n,e);case 6:var r=an,i=kr;an=null,ji(t,e,n),an=r,kr=i,an!==null&&(kr?(t=an,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):an.removeChild(n.stateNode));break;case 18:an!==null&&(kr?(t=an,n=n.stateNode,t.nodeType===8?Sp(t.parentNode,n):t.nodeType===1&&Sp(t,n),Ru(t)):Sp(an,n.stateNode));break;case 4:r=an,i=kr,an=n.stateNode.containerInfo,kr=!0,ji(t,e,n),an=r,kr=i;break;case 0:case 11:case 14:case 15:if(!Tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xm(n,e,o),i=i.next}while(i!==r)}ji(t,e,n);break;case 1:if(!Tn&&(oa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dt(n,e,a)}ji(t,e,n);break;case 21:ji(t,e,n);break;case 22:n.mode&1?(Tn=(r=Tn)||n.memoizedState!==null,ji(t,e,n),Tn=r):ji(t,e,n);break;default:ji(t,e,n)}}function aw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bx),e.forEach(function(r){var i=$x.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,kr=!1;break e;case 3:an=a.stateNode.containerInfo,kr=!0;break e;case 4:an=a.stateNode.containerInfo,kr=!0;break e}a=a.return}if(an===null)throw Error(Y(160));oI(s,o,i),an=null,kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aI(e,t),e=e.sibling}function aI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),Wr(t),r&4){try{nu(3,t,t.return),Yd(3,t)}catch(E){Dt(t,t.return,E)}try{nu(5,t,t.return)}catch(E){Dt(t,t.return,E)}}break;case 1:Ir(e,t),Wr(t),r&512&&n!==null&&oa(n,n.return);break;case 5:if(Ir(e,t),Wr(t),r&512&&n!==null&&oa(n,n.return),t.flags&32){var i=t.stateNode;try{wu(i,"")}catch(E){Dt(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PS(i,s),Rm(a,o);var c=Rm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?LS(i,d):h==="dangerouslySetInnerHTML"?xS(i,d):h==="children"?wu(i,d):o_(i,h,d,c)}switch(a){case"input":vm(i,s);break;case"textarea":NS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?ha(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?ha(i,!!s.multiple,s.defaultValue,!0):ha(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pu]=s}catch(E){Dt(t,t.return,E)}}break;case 6:if(Ir(e,t),Wr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Dt(t,t.return,E)}}break;case 3:if(Ir(e,t),Wr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ru(e.containerInfo)}catch(E){Dt(t,t.return,E)}break;case 4:Ir(e,t),Wr(t);break;case 13:Ir(e,t),Wr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(U_=Ut())),r&4&&aw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tn=(c=Tn)||h,Ir(e,t),Tn=c):Ir(e,t),Wr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(d=ae=h;ae!==null;){switch(p=ae,_=p.child,p.tag){case 0:case 11:case 14:case 15:nu(4,p,p.return);break;case 1:oa(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){Dt(r,n,E)}}break;case 5:oa(p,p.return);break;case 22:if(p.memoizedState!==null){uw(d);continue}}_!==null?(_.return=p,ae=_):uw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DS("display",o))}catch(E){Dt(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Dt(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ir(e,t),Wr(t),r&4&&aw(t);break;case 21:break;default:Ir(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sI(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wu(i,""),r.flags&=-33);var s=ow(t);eg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ow(t);Zm(t,a,o);break;default:throw Error(Y(161))}}catch(l){Dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dx(t,e,n){ae=t,lI(t)}function lI(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||eh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tn;a=eh;var c=Tn;if(eh=o,(Tn=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?cw(i):l!==null?(l.return=o,ae=l):cw(i);for(;s!==null;)ae=s,lI(s),s=s.sibling;ae=i,eh=a,Tn=c}lw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):lw(t)}}function lw(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||Yd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&q0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ru(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Tn||e.flags&512&&Jm(e)}catch(p){Dt(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function uw(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function cw(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yd(4,e)}catch(l){Dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dt(e,i,l)}}var s=e.return;try{Jm(e)}catch(l){Dt(e,s,l)}break;case 5:var o=e.return;try{Jm(e)}catch(l){Dt(e,o,l)}}}catch(l){Dt(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var Lx=Math.ceil,rd=xi.ReactCurrentDispatcher,V_=xi.ReactCurrentOwner,_r=xi.ReactCurrentBatchConfig,Ge=0,nn=null,zt=null,cn=0,tr=0,aa=Ts(0),Gt=0,Ou=null,so=0,Xd=0,F_=0,ru=null,Vn=null,U_=0,Na=1/0,fi=null,id=!1,tg=null,os=null,th=!1,Zi=null,sd=0,iu=0,ng=null,Ih=-1,Ch=0;function Dn(){return Ge&6?Ut():Ih!==-1?Ih:Ih=Ut()}function as(t){return t.mode&1?Ge&2&&cn!==0?cn&-cn:_x.transition!==null?(Ch===0&&(Ch=qS()),Ch):(t=nt,t!==0||(t=window.event,t=t===void 0?16:ZS(t.type)),t):1}function Lr(t,e,n,r){if(50<iu)throw iu=0,ng=null,Error(Y(185));ec(t,n,r),(!(Ge&2)||t!==nn)&&(t===nn&&(!(Ge&2)&&(Xd|=n),Gt===4&&Ki(t,cn)),Hn(t,r),n===1&&Ge===0&&!(e.mode&1)&&(Na=Ut()+500,Kd&&Ss()))}function Hn(t,e){var n=t.callbackNode;_b(t,e);var r=Bh(t,t===nn?cn:0);if(r===0)n!==null&&v0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&v0(n),e===1)t.tag===0?gx(hw.bind(null,t)):yR(hw.bind(null,t)),dx(function(){!(Ge&6)&&Ss()}),n=null;else{switch(KS(r)){case 1:n=h_;break;case 4:n=WS;break;case 16:n=$h;break;case 536870912:n=HS;break;default:n=$h}n=gI(n,uI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uI(t,e){if(Ih=-1,Ch=0,Ge&6)throw Error(Y(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var r=Bh(t,t===nn?cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=od(t,r);else{e=r;var i=Ge;Ge|=2;var s=hI();(nn!==t||cn!==e)&&(fi=null,Na=Ut()+500,Zs(t,e));do try{Vx();break}catch(a){cI(t,a)}while(!0);R_(),rd.current=s,Ge=i,zt!==null?e=0:(nn=null,cn=0,e=Gt)}if(e!==0){if(e===2&&(i=Pm(t),i!==0&&(r=i,e=rg(t,i))),e===1)throw n=Ou,Zs(t,0),Ki(t,r),Hn(t,Ut()),n;if(e===6)Ki(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ox(i)&&(e=od(t,r),e===2&&(s=Pm(t),s!==0&&(r=s,e=rg(t,s))),e===1))throw n=Ou,Zs(t,0),Ki(t,r),Hn(t,Ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:js(t,Vn,fi);break;case 3:if(Ki(t,r),(r&130023424)===r&&(e=U_+500-Ut(),10<e)){if(Bh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vm(js.bind(null,t,Vn,fi),e);break}js(t,Vn,fi);break;case 4:if(Ki(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Dr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lx(r/1960))-r,10<r){t.timeoutHandle=Vm(js.bind(null,t,Vn,fi),r);break}js(t,Vn,fi);break;case 5:js(t,Vn,fi);break;default:throw Error(Y(329))}}}return Hn(t,Ut()),t.callbackNode===n?uI.bind(null,t):null}function rg(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=od(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&ig(e)),t}function ig(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function Ox(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Mr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~F_,e&=~Xd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dr(e),r=1<<n;t[n]=-1,e&=~r}}function hw(t){if(Ge&6)throw Error(Y(327));ga();var e=Bh(t,0);if(!(e&1))return Hn(t,Ut()),null;var n=od(t,e);if(t.tag!==0&&n===2){var r=Pm(t);r!==0&&(e=r,n=rg(t,r))}if(n===1)throw n=Ou,Zs(t,0),Ki(t,e),Hn(t,Ut()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,Vn,fi),Hn(t,Ut()),null}function j_(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Na=Ut()+500,Kd&&Ss())}}function oo(t){Zi!==null&&Zi.tag===0&&!(Ge&6)&&ga();var e=Ge;Ge|=1;var n=_r.transition,r=nt;try{if(_r.transition=null,nt=1,t)return t()}finally{nt=r,_r.transition=n,Ge=e,!(Ge&6)&&Ss()}}function $_(){tr=aa.current,_t(aa)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hx(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(E_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kh();break;case 3:ka(),_t(zn),_t(An),N_();break;case 5:P_(r);break;case 4:ka();break;case 13:_t(At);break;case 19:_t(At);break;case 10:I_(r.type._context);break;case 22:case 23:$_()}n=n.return}if(nn=t,zt=t=ls(t.current,null),cn=tr=e,Gt=0,Ou=null,F_=Xd=so=0,Vn=ru=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qs=null}return t}function cI(t,e){do{var n=zt;try{if(R_(),Th.current=nd,td){for(var r=kt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}td=!1}if(io=0,Zt=qt=kt=null,tu=!1,xu=0,V_.current=null,n===null||n.return===null){Gt=1,Ou=e,zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=cn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=J0(o);if(_!==null){_.flags&=-257,Z0(_,o,a,s,e),_.mode&1&&X0(s,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var E=new Set;E.add(l),e.updateQueue=E}else y.add(l);break e}else{if(!(e&1)){X0(s,c,e),B_();break e}l=Error(Y(426))}}else if(Et&&a.mode&1){var b=J0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Z0(b,o,a,s,e),T_(Pa(l,a));break e}}s=l=Pa(l,a),Gt!==4&&(Gt=2),ru===null?ru=[s]:ru.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var R=KR(s,l,e);H0(s,R);break e;case 1:a=l;var g=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(os===null||!os.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=GR(s,a,e);H0(s,M);break e}}s=s.return}while(s!==null)}fI(n)}catch(z){e=z,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function hI(){var t=rd.current;return rd.current=nd,t===null?nd:t}function B_(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),nn===null||!(so&268435455)&&!(Xd&268435455)||Ki(nn,cn)}function od(t,e){var n=Ge;Ge|=2;var r=hI();(nn!==t||cn!==e)&&(fi=null,Zs(t,e));do try{Mx();break}catch(i){cI(t,i)}while(!0);if(R_(),Ge=n,rd.current=r,zt!==null)throw Error(Y(261));return nn=null,cn=0,Gt}function Mx(){for(;zt!==null;)dI(zt)}function Vx(){for(;zt!==null&&!lb();)dI(zt)}function dI(t){var e=mI(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?fI(t):zt=e,V_.current=null}function fI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nx(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gt=6,zt=null;return}}else if(n=Px(n,e,tr),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Gt===0&&(Gt=5)}function js(t,e,n){var r=nt,i=_r.transition;try{_r.transition=null,nt=1,Fx(t,e,n,r)}finally{_r.transition=i,nt=r}return null}function Fx(t,e,n,r){do ga();while(Zi!==null);if(Ge&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yb(t,s),t===nn&&(zt=nn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||th||(th=!0,gI($h,function(){return ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_r.transition,_r.transition=null;var o=nt;nt=1;var a=Ge;Ge|=4,V_.current=null,xx(t,n),aI(n,t),ix(Om),zh=!!Lm,Om=Lm=null,t.current=n,Dx(n),ub(),Ge=a,nt=o,_r.transition=s}else t.current=n;if(th&&(th=!1,Zi=t,sd=i),s=t.pendingLanes,s===0&&(os=null),db(n.stateNode),Hn(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(id)throw id=!1,t=tg,tg=null,t;return sd&1&&t.tag!==0&&ga(),s=t.pendingLanes,s&1?t===ng?iu++:(iu=0,ng=t):iu=0,Ss(),null}function ga(){if(Zi!==null){var t=KS(sd),e=_r.transition,n=nt;try{if(_r.transition=null,nt=16>t?16:t,Zi===null)var r=!1;else{if(t=Zi,Zi=null,sd=0,Ge&6)throw Error(Y(331));var i=Ge;for(Ge|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:nu(8,h,s)}var d=h.child;if(d!==null)d.return=h,ae=d;else for(;ae!==null;){h=ae;var p=h.sibling,_=h.return;if(iI(h),h===c){ae=null;break}if(p!==null){p.return=_,ae=p;break}ae=_}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nu(9,s,s.return)}var R=s.sibling;if(R!==null){R.return=s.return,ae=R;break e}ae=s.return}}var g=t.current;for(ae=g;ae!==null;){o=ae;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ae=I;else e:for(o=g;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yd(9,a)}}catch(z){Dt(a,a.return,z)}if(a===o){ae=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ae=M;break e}ae=a.return}}if(Ge=i,Ss(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Bd,t)}catch{}r=!0}return r}finally{nt=n,_r.transition=e}}return!1}function dw(t,e,n){e=Pa(n,e),e=KR(t,e,1),t=ss(t,e,1),e=Dn(),t!==null&&(ec(t,1,e),Hn(t,e))}function Dt(t,e,n){if(t.tag===3)dw(t,t,n);else for(;e!==null;){if(e.tag===3){dw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=Pa(n,t),t=GR(e,t,1),e=ss(e,t,1),t=Dn(),e!==null&&(ec(e,1,t),Hn(e,t));break}}e=e.return}}function Ux(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(cn&n)===n&&(Gt===4||Gt===3&&(cn&130023424)===cn&&500>Ut()-U_?Zs(t,0):F_|=n),Hn(t,e)}function pI(t,e){e===0&&(t.mode&1?(e=Hc,Hc<<=1,!(Hc&130023424)&&(Hc=4194304)):e=1);var n=Dn();t=Ai(t,e),t!==null&&(ec(t,e,n),Hn(t,n))}function jx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pI(t,n)}function $x(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),pI(t,n)}var mI;mI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,kx(t,e,n);Un=!!(t.flags&131072)}else Un=!1,Et&&e.flags&1048576&&vR(e,Yh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rh(t,e),t=e.pendingProps;var i=Ia(e,An.current);ma(e,n),i=x_(null,e,r,t,i,n);var s=D_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(r)?(s=!0,Gh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,A_(e),i.updater=Qd,e.stateNode=i,i._reactInternals=e,Wm(e,r,t,n),e=Km(null,e,r,!0,s,n)):(e.tag=0,Et&&s&&w_(e),xn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zx(r),t=Ar(r,t),i){case 0:e=qm(null,e,r,t,n);break e;case 1:e=nw(null,e,r,t,n);break e;case 11:e=ew(null,e,r,t,n);break e;case 14:e=tw(null,e,r,Ar(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),qm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),nw(t,e,r,i,n);case 3:e:{if(JR(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,IR(t,e),Zh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pa(Error(Y(423)),e),e=rw(t,e,r,n,i);break e}else if(r!==i){i=Pa(Error(Y(424)),e),e=rw(t,e,r,n,i);break e}else for(rr=is(e.stateNode.containerInfo.firstChild),sr=e,Et=!0,Nr=null,n=SR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===i){e=ki(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return CR(e),t===null&&$m(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mm(r,i)?o=null:s!==null&&Mm(r,s)&&(e.flags|=32),XR(t,e),xn(t,e,o,n),e.child;case 6:return t===null&&$m(e),null;case 13:return ZR(t,e,n);case 4:return k_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),ew(t,e,r,i,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,lt(Xh,r._currentValue),r._currentValue=o,s!==null)if(Mr(s.value,o)){if(s.children===i.children&&!zn.current){e=ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Bm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ma(e,n),i=vr(i),r=r(i),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,i=Ar(r,e.pendingProps),i=Ar(r.type,i),tw(t,e,r,i,n);case 15:return QR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),Rh(t,e),e.tag=1,Wn(r)?(t=!0,Gh(e)):t=!1,ma(e,n),qR(e,r,i),Wm(e,r,i,n),Km(null,e,r,!0,t,n);case 19:return eI(t,e,n);case 22:return YR(t,e,n)}throw Error(Y(156,e.tag))};function gI(t,e){return zS(t,e)}function Bx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new Bx(t,e,n,r)}function z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zx(t){if(typeof t=="function")return z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===l_)return 11;if(t===u_)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ah(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")z_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xo:return eo(n.children,i,s,e);case a_:o=8,i|=8;break;case pm:return t=mr(12,n,e,i|2),t.elementType=pm,t.lanes=s,t;case mm:return t=mr(13,n,e,i),t.elementType=mm,t.lanes=s,t;case gm:return t=mr(19,n,e,i),t.elementType=gm,t.lanes=s,t;case CS:return Jd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RS:o=10;break e;case IS:o=9;break e;case l_:o=11;break e;case u_:o=14;break e;case zi:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function eo(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function Jd(t,e,n,r){return t=mr(22,t,r,e),t.elementType=CS,t.lanes=n,t.stateNode={isHidden:!1},t}function bp(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dp(0),this.expirationTimes=dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function W_(t,e,n,r,i,s,o,a,l){return t=new Wx(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},A_(s),t}function Hx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _I(t){if(!t)return ms;t=t._reactInternals;e:{if(Io(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Wn(n))return _R(t,n,e)}return e}function yI(t,e,n,r,i,s,o,a,l){return t=W_(n,r,!0,t,i,s,o,a,l),t.context=_I(null),n=t.current,r=Dn(),i=as(n),s=Ei(r,i),s.callback=e??null,ss(n,s,i),t.current.lanes=i,ec(t,i,r),Hn(t,r),t}function Zd(t,e,n,r){var i=e.current,s=Dn(),o=as(i);return n=_I(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,o),t!==null&&(Lr(t,i,o,s),Eh(t,i,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function H_(t,e){fw(t,e),(t=t.alternate)&&fw(t,e)}function qx(){return null}var vI=typeof reportError=="function"?reportError:function(t){console.error(t)};function q_(t){this._internalRoot=t}ef.prototype.render=q_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Zd(t,e,null,null)};ef.prototype.unmount=q_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Zd(null,t,null,null)}),e[Ci]=null}};function ef(t){this._internalRoot=t}ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=YS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&JS(t)}};function K_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pw(){}function Kx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ad(o);s.call(c)}}var o=yI(e,r,t,0,null,!1,!1,"",pw);return t._reactRootContainer=o,t[Ci]=o.current,Au(t.nodeType===8?t.parentNode:t),oo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ad(l);a.call(c)}}var l=W_(t,0,!1,null,null,!1,!1,"",pw);return t._reactRootContainer=l,t[Ci]=l.current,Au(t.nodeType===8?t.parentNode:t),oo(function(){Zd(e,l,n,r)}),l}function nf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ad(o);a.call(l)}}Zd(e,o,t,i)}else o=Kx(n,e,t,i,r);return ad(o)}GS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$l(e.pendingLanes);n!==0&&(d_(e,n|1),Hn(e,Ut()),!(Ge&6)&&(Na=Ut()+500,Ss()))}break;case 13:oo(function(){var r=Ai(t,1);if(r!==null){var i=Dn();Lr(r,t,1,i)}}),H_(t,1)}};f_=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=Dn();Lr(e,t,134217728,n)}H_(t,134217728)}};QS=function(t){if(t.tag===13){var e=as(t),n=Ai(t,e);if(n!==null){var r=Dn();Lr(n,t,e,r)}H_(t,e)}};YS=function(){return nt};XS=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};Cm=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qd(r);if(!i)throw Error(Y(90));kS(r),vm(r,i)}}}break;case"textarea":NS(t,n);break;case"select":e=n.value,e!=null&&ha(t,!!n.multiple,e,!1)}};VS=j_;FS=oo;var Gx={usingClientEntryPoint:!1,Events:[nc,ta,qd,OS,MS,j_]},Il={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$S(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||qx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Bd=nh.inject(Qx),Yr=nh}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;ur.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K_(e))throw Error(Y(200));return Hx(t,e,null,n)};ur.createRoot=function(t,e){if(!K_(t))throw Error(Y(299));var n=!1,r="",i=vI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=W_(t,1,!1,null,null,n,!1,r,i),t[Ci]=e.current,Au(t.nodeType===8?t.parentNode:t),new q_(e)};ur.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=$S(e),t=t===null?null:t.stateNode,t};ur.flushSync=function(t){return oo(t)};ur.hydrate=function(t,e,n){if(!tf(e))throw Error(Y(200));return nf(null,t,e,!0,n)};ur.hydrateRoot=function(t,e,n){if(!K_(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yI(e,null,t,1,n??null,i,!1,s,o),t[Ci]=e.current,Au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ef(e)};ur.render=function(t,e,n){if(!tf(e))throw Error(Y(200));return nf(null,t,e,!1,n)};ur.unmountComponentAtNode=function(t){if(!tf(t))throw Error(Y(40));return t._reactRootContainer?(oo(function(){nf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};ur.unstable_batchedUpdates=j_;ur.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return nf(t,e,n,!1,r)};ur.version="18.3.1-next-f1338f8080-20240426";function wI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wI)}catch(t){console.error(t)}}wI(),wS.exports=ur;var G_=wS.exports;const EI=lS(G_),Yx=aS({__proto__:null,default:EI},[G_]);var mw=G_;dm.createRoot=mw.createRoot,dm.hydrateRoot=mw.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ct.apply(this,arguments)}var $t;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($t||($t={}));const gw="popstate";function Xx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Mu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ao(i)}return Zx(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ba(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jx(){return Math.random().toString(36).substr(2,8)}function _w(t,e){return{usr:t.state,key:t.key,idx:e}}function Mu(t,e,n,r){return n===void 0&&(n=null),Ct({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Rs(e):e,{state:n,key:e&&e.key||r||Jx()})}function ao(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Zx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$t.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ct({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$t.Pop;let b=h(),R=b==null?null:b-c;c=b,l&&l({action:a,location:E.location,delta:R})}function p(b,R){a=$t.Push;let g=Mu(E.location,b,R);c=h()+1;let I=_w(g,c),M=E.createHref(g);try{o.pushState(I,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}s&&l&&l({action:a,location:E.location,delta:1})}function _(b,R){a=$t.Replace;let g=Mu(E.location,b,R);c=h();let I=_w(g,c),M=E.createHref(g);o.replaceState(I,"",M),s&&l&&l({action:a,location:E.location,delta:0})}function y(b){let R=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:ao(b);return g=g.replace(/ $/,"%20"),Me(R,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,R)}let E={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(gw,d),l=b,()=>{i.removeEventListener(gw,d),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let R=y(b);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:p,replace:_,go(b){return o.go(b)}};return E}var at;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(at||(at={}));const eD=new Set(["lazy","caseSensitive","path","id","index","children"]);function tD(t){return t.index===!0}function Vu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Me(i.index!==!0||!i.children,"Cannot specify children on an index route"),Me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),tD(i)){let l=Ct({},i,e(i),{id:a});return r[a]=l,l}else{let l=Ct({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Vu(i.children,e,o,r)),l}})}function zs(t,e,n){return n===void 0&&(n="/"),kh(t,e,n,!1)}function kh(t,e,n,r){let i=typeof e=="string"?Rs(e):e,s=Xa(i.pathname||"/",n);if(s==null)return null;let o=TI(t);rD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=pD(s);a=dD(o[l],c,r)}return a}function nD(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function TI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ti([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),TI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:cD(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of SI(s.path))i(s,o,l)}),e}function SI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iD=/^:[\w-]+$/,sD=3,oD=2,aD=1,lD=10,uD=-2,yw=t=>t==="*";function cD(t,e){let n=t.split("/"),r=n.length;return n.some(yw)&&(r+=uD),e&&(r+=oD),n.filter(i=>!yw(i)).reduce((i,s)=>i+(iD.test(s)?sD:s===""?aD:lD),r)}function hD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function dD(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=vw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=vw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ti([s,d.pathname]),pathnameBase:_D(Ti([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Ti([s,d.pathnameBase]))}return o}function vw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[d];return _&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function fD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ba(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Rs(t):t;return{pathname:n?n.startsWith("/")?n:gD(n,e):e,search:yD(r),hash:vD(i)}}function gD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q_(t,e){let n=RI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Y_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Rs(t):(i=Ct({},t),Me(!i.pathname||!i.pathname.includes("?"),Dp("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),Dp("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),Dp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=mD(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ti=t=>t.join("/").replace(/\/\/+/g,"/"),_D=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class X_{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function rf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const II=["post","put","patch","delete"],wD=new Set(II),ED=["get",...II],TD=new Set(ED),SD=new Set([301,302,303,307,308]),RD=new Set([307,308]),Lp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ID={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CD=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),CI="remix-router-transitions";function AD(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=x=>({hasErrorBoundary:N(x)})}else i=CD;let s={},o=Vu(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||xD,h=t.unstable_patchRoutesOnMiss,d=Ct({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),p=null,_=new Set,y=null,E=null,b=null,R=t.hydrationData!=null,g=zs(o,t.history.location,l),I=null;if(g==null&&!h){let N=bn(404,{pathname:t.history.location.pathname}),{matches:x,route:j}=Pw(o);g=x,I={[j.id]:N}}g&&h&&bt(g,o,t.history.location.pathname).active&&(g=null);let M;if(!g)M=!1,g=[];else if(g.some(N=>N.route.lazy))M=!1;else if(!g.some(N=>N.route.loader))M=!0;else if(d.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,x=t.hydrationData?t.hydrationData.errors:null,j=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:N&&N[W.route.id]!==void 0||x&&x[W.route.id]!==void 0:!0;if(x){let W=g.findIndex(re=>x[re.route.id]!==void 0);M=g.slice(0,W+1).every(j)}else M=g.every(j)}else M=t.hydrationData!=null;let z,P={historyAction:t.history.action,location:t.history.location,matches:g,initialized:M,navigation:Lp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},S=$t.Pop,v=!1,T,A=!1,k=new Map,D=null,C=!1,Ae=!1,Nt=[],St=[],Le=new Map,J=0,de=-1,Z=new Map,le=new Set,O=new Map,H=new Map,Q=new Set,ce=new Map,ie=new Map,Te=new Map,Ne=!1;function ge(){if(p=t.history.listen(N=>{let{action:x,location:j,delta:W}=N;if(Ne){Ne=!1;return}ba(ie.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=oe({currentLocation:P.location,nextLocation:j,historyAction:x});if(re&&W!=null){Ne=!0,t.history.go(W*-1),ee(re,{state:"blocked",location:j,proceed(){ee(re,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),t.history.go(W)},reset(){let he=new Map(P.blockers);he.set(re,Cl),Se({blockers:he})}});return}return Rt(x,j)}),n){HD(e,k);let N=()=>qD(e,k);e.addEventListener("pagehide",N),D=()=>e.removeEventListener("pagehide",N)}return P.initialized||Rt($t.Pop,P.location,{initialHydration:!0}),z}function Ye(){p&&p(),D&&D(),_.clear(),T&&T.abort(),P.fetchers.forEach((N,x)=>Oi(x)),P.blockers.forEach((N,x)=>ne(x))}function ot(N){return _.add(N),()=>_.delete(N)}function Se(N,x){x===void 0&&(x={}),P=Ct({},P,N);let j=[],W=[];d.v7_fetcherPersist&&P.fetchers.forEach((re,he)=>{re.state==="idle"&&(Q.has(he)?W.push(he):j.push(he))}),[..._].forEach(re=>re(P,{deletedFetchers:W,unstable_viewTransitionOpts:x.viewTransitionOpts,unstable_flushSync:x.flushSync===!0})),d.v7_fetcherPersist&&(j.forEach(re=>P.fetchers.delete(re)),W.forEach(re=>Oi(re)))}function Be(N,x,j){var W,re;let{flushSync:he}=j===void 0?{}:j,Ee=P.actionData!=null&&P.navigation.formMethod!=null&&Pr(P.navigation.formMethod)&&P.navigation.state==="loading"&&((W=N.state)==null?void 0:W._isRedirect)!==!0,X;x.actionData?Object.keys(x.actionData).length>0?X=x.actionData:X=null:Ee?X=P.actionData:X=null;let ke=x.loaderData?Aw(P.loaderData,x.loaderData,x.matches||[],x.errors):P.loaderData,ye=P.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((ze,Ze)=>ye.set(Ze,Cl)));let me=v===!0||P.navigation.formMethod!=null&&Pr(P.navigation.formMethod)&&((re=N.state)==null?void 0:re._isRedirect)!==!0;a&&(o=a,a=void 0),C||S===$t.Pop||(S===$t.Push?t.history.push(N,N.state):S===$t.Replace&&t.history.replace(N,N.state));let Ve;if(S===$t.Pop){let ze=k.get(P.location.pathname);ze&&ze.has(N.pathname)?Ve={currentLocation:P.location,nextLocation:N}:k.has(N.pathname)&&(Ve={currentLocation:N,nextLocation:P.location})}else if(A){let ze=k.get(P.location.pathname);ze?ze.add(N.pathname):(ze=new Set([N.pathname]),k.set(P.location.pathname,ze)),Ve={currentLocation:P.location,nextLocation:N}}Se(Ct({},x,{actionData:X,loaderData:ke,historyAction:S,location:N,initialized:!0,navigation:Lp,revalidation:"idle",restoreScrollPosition:vt(N,x.matches||P.matches),preventScrollReset:me,blockers:ye}),{viewTransitionOpts:Ve,flushSync:he===!0}),S=$t.Pop,v=!1,A=!1,C=!1,Ae=!1,Nt=[],St=[]}async function Yt(N,x){if(typeof N=="number"){t.history.go(N);return}let j=sg(P.location,P.matches,l,d.v7_prependBasename,N,d.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:W,submission:re,error:he}=ww(d.v7_normalizeFormMethod,!1,j,x),Ee=P.location,X=Mu(P.location,W,x&&x.state);X=Ct({},X,t.history.encodeLocation(X));let ke=x&&x.replace!=null?x.replace:void 0,ye=$t.Push;ke===!0?ye=$t.Replace:ke===!1||re!=null&&Pr(re.formMethod)&&re.formAction===P.location.pathname+P.location.search&&(ye=$t.Replace);let me=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,Ve=(x&&x.unstable_flushSync)===!0,ze=oe({currentLocation:Ee,nextLocation:X,historyAction:ye});if(ze){ee(ze,{state:"blocked",location:X,proceed(){ee(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),Yt(N,x)},reset(){let Ze=new Map(P.blockers);Ze.set(ze,Cl),Se({blockers:Ze})}});return}return await Rt(ye,X,{submission:re,pendingError:he,preventScrollReset:me,replace:x&&x.replace,enableViewTransition:x&&x.unstable_viewTransition,flushSync:Ve})}function Yn(){if(Mt(),Se({revalidation:"loading"}),P.navigation.state!=="submitting"){if(P.navigation.state==="idle"){Rt(P.historyAction,P.location,{startUninterruptedRevalidation:!0});return}Rt(S||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation})}}async function Rt(N,x,j){T&&T.abort(),T=null,S=N,C=(j&&j.startUninterruptedRevalidation)===!0,Vt(P.location,P.matches),v=(j&&j.preventScrollReset)===!0,A=(j&&j.enableViewTransition)===!0;let W=a||o,re=j&&j.overrideNavigation,he=zs(W,x,l),Ee=(j&&j.flushSync)===!0,X=bt(he,W,x.pathname);if(X.active&&X.matches&&(he=X.matches),!he){let{error:We,notFoundMatches:Ft,route:It}=fe(x.pathname);Be(x,{matches:Ft,loaderData:{},errors:{[It.id]:We}},{flushSync:Ee});return}if(P.initialized&&!Ae&&FD(P.location,x)&&!(j&&j.submission&&Pr(j.submission.formMethod))){Be(x,{matches:he},{flushSync:Ee});return}T=new AbortController;let ke=Wo(t.history,x,T.signal,j&&j.submission),ye;if(j&&j.pendingError)ye=[su(he).route.id,{type:at.error,error:j.pendingError}];else if(j&&j.submission&&Pr(j.submission.formMethod)){let We=await sn(ke,x,j.submission,he,X.active,{replace:j.replace,flushSync:Ee});if(We.shortCircuited)return;if(We.pendingActionResult){let[Ft,It]=We.pendingActionResult;if(nr(It)&&rf(It.error)&&It.error.status===404){T=null,Be(x,{matches:We.matches,loaderData:{},errors:{[Ft]:It.error}});return}}he=We.matches||he,ye=We.pendingActionResult,re=Op(x,j.submission),Ee=!1,X.active=!1,ke=Wo(t.history,ke.url,ke.signal)}let{shortCircuited:me,matches:Ve,loaderData:ze,errors:Ze}=await Vo(ke,x,he,X.active,re,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,j&&j.initialHydration===!0,Ee,ye);me||(T=null,Be(x,Ct({matches:Ve||he},kw(ye),{loaderData:ze,errors:Ze})))}async function sn(N,x,j,W,re,he){he===void 0&&(he={}),Mt();let Ee=zD(x,j);if(Se({navigation:Ee},{flushSync:he.flushSync===!0}),re){let ye=await Ht(W,x.pathname,N.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let{error:me,notFoundMatches:Ve,route:ze}=pe(x.pathname,ye);return{matches:Ve,pendingActionResult:[ze.id,{type:at.error,error:me}]}}else if(ye.matches)W=ye.matches;else{let{notFoundMatches:me,error:Ve,route:ze}=fe(x.pathname);return{matches:me,pendingActionResult:[ze.id,{type:at.error,error:Ve}]}}}let X,ke=zl(W,x);if(!ke.route.action&&!ke.route.lazy)X={type:at.error,error:bn(405,{method:N.method,pathname:x.pathname,routeId:ke.route.id})};else if(X=(await hr("action",N,[ke],W))[0],N.signal.aborted)return{shortCircuited:!0};if(Qs(X)){let ye;return he&&he.replace!=null?ye=he.replace:ye=Rw(X.response.headers.get("Location"),new URL(N.url),l)===P.location.pathname+P.location.search,await Xn(N,X,{submission:j,replace:ye}),{shortCircuited:!0}}if(Gs(X))throw bn(400,{type:"defer-action"});if(nr(X)){let ye=su(W,ke.route.id);return(he&&he.replace)!==!0&&(S=$t.Push),{matches:W,pendingActionResult:[ye.route.id,X]}}return{matches:W,pendingActionResult:[ke.route.id,X]}}async function Vo(N,x,j,W,re,he,Ee,X,ke,ye,me){let Ve=re||Op(x,he),ze=he||Ee||xw(Ve),Ze=!C&&(!d.v7_partialHydration||!ke);if(W){if(Ze){let ht=xs(me);Se(Ct({navigation:Ve},ht!==void 0?{actionData:ht}:{}),{flushSync:ye})}let xe=await Ht(j,x.pathname,N.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let{error:ht,notFoundMatches:mn,route:et}=pe(x.pathname,xe);return{matches:mn,loaderData:{},errors:{[et.id]:ht}}}else if(xe.matches)j=xe.matches;else{let{error:ht,notFoundMatches:mn,route:et}=fe(x.pathname);return{matches:mn,loaderData:{},errors:{[et.id]:ht}}}}let We=a||o,[Ft,It]=Ew(t.history,P,j,ze,x,d.v7_partialHydration&&ke===!0,d.unstable_skipActionErrorRevalidation,Ae,Nt,St,Q,O,le,We,l,me);if(_e(xe=>!(j&&j.some(ht=>ht.route.id===xe))||Ft&&Ft.some(ht=>ht.route.id===xe)),de=++J,Ft.length===0&&It.length===0){let xe=F();return Be(x,Ct({matches:j,loaderData:{},errors:me&&nr(me[1])?{[me[0]]:me[1].error}:null},kw(me),xe?{fetchers:new Map(P.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(Ze){let xe={};if(!W){xe.navigation=Ve;let ht=xs(me);ht!==void 0&&(xe.actionData=ht)}It.length>0&&(xe.fetchers=ai(It)),Se(xe,{flushSync:ye})}It.forEach(xe=>{Le.has(xe.key)&&Jn(xe.key),xe.controller&&Le.set(xe.key,xe.controller)});let Mi=()=>It.forEach(xe=>Jn(xe.key));T&&T.signal.addEventListener("abort",Mi);let{loaderResults:Br,fetcherResults:Sr}=await Ot(P.matches,j,Ft,It,N);if(N.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Mi),It.forEach(xe=>Le.delete(xe.key));let ui=Nw([...Br,...Sr]);if(ui){if(ui.idx>=Ft.length){let xe=It[ui.idx-Ft.length].key;le.add(xe)}return await Xn(N,ui.result,{replace:X}),{shortCircuited:!0}}let{loaderData:zr,errors:pn}=Cw(P,j,Ft,Br,me,It,Sr,ce);ce.forEach((xe,ht)=>{xe.subscribe(mn=>{(mn||xe.done)&&ce.delete(ht)})}),d.v7_partialHydration&&ke&&P.errors&&Object.entries(P.errors).filter(xe=>{let[ht]=xe;return!Ft.some(mn=>mn.route.id===ht)}).forEach(xe=>{let[ht,mn]=xe;pn=Object.assign(pn||{},{[ht]:mn})});let dr=F(),Vi=L(de),Uo=dr||Vi||It.length>0;return Ct({matches:j,loaderData:zr,errors:pn},Uo?{fetchers:new Map(P.fetchers)}:{})}function xs(N){if(N&&!nr(N[1]))return{[N[0]]:N[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function ai(N){return N.forEach(x=>{let j=P.fetchers.get(x.key),W=Al(void 0,j?j.data:void 0);P.fetchers.set(x.key,W)}),new Map(P.fetchers)}function Ds(N,x,j,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Le.has(N)&&Jn(N);let re=(W&&W.unstable_flushSync)===!0,he=a||o,Ee=sg(P.location,P.matches,l,d.v7_prependBasename,j,d.v7_relativeSplatPath,x,W==null?void 0:W.relative),X=zs(he,Ee,l),ke=bt(X,he,Ee);if(ke.active&&ke.matches&&(X=ke.matches),!X){Mn(N,x,bn(404,{pathname:Ee}),{flushSync:re});return}let{path:ye,submission:me,error:Ve}=ww(d.v7_normalizeFormMethod,!0,Ee,W);if(Ve){Mn(N,x,Ve,{flushSync:re});return}let ze=zl(X,ye);if(v=(W&&W.preventScrollReset)===!0,me&&Pr(me.formMethod)){Fo(N,x,ye,ze,X,ke.active,re,me);return}O.set(N,{routeId:x,path:ye}),Ls(N,x,ye,ze,X,ke.active,re,me)}async function Fo(N,x,j,W,re,he,Ee,X){Mt(),O.delete(N);function ke(et){if(!et.route.action&&!et.route.lazy){let Zn=bn(405,{method:X.formMethod,pathname:j,routeId:x});return Mn(N,x,Zn,{flushSync:Ee}),!0}return!1}if(!he&&ke(W))return;let ye=P.fetchers.get(N);Nn(N,WD(X,ye),{flushSync:Ee});let me=new AbortController,Ve=Wo(t.history,j,me.signal,X);if(he){let et=await Ht(re,j,Ve.signal);if(et.type==="aborted")return;if(et.type==="error"){let{error:Zn}=pe(j,et);Mn(N,x,Zn,{flushSync:Ee});return}else if(et.matches){if(re=et.matches,W=zl(re,j),ke(W))return}else{Mn(N,x,bn(404,{pathname:j}),{flushSync:Ee});return}}Le.set(N,me);let ze=J,We=(await hr("action",Ve,[W],re))[0];if(Ve.signal.aborted){Le.get(N)===me&&Le.delete(N);return}if(d.v7_fetcherPersist&&Q.has(N)){if(Qs(We)||nr(We)){Nn(N,Bi(void 0));return}}else{if(Qs(We))if(Le.delete(N),de>ze){Nn(N,Bi(void 0));return}else return le.add(N),Nn(N,Al(X)),Xn(Ve,We,{fetcherSubmission:X});if(nr(We)){Mn(N,x,We.error);return}}if(Gs(We))throw bn(400,{type:"defer-action"});let Ft=P.navigation.location||P.location,It=Wo(t.history,Ft,me.signal),Mi=a||o,Br=P.navigation.state!=="idle"?zs(Mi,P.navigation.location,l):P.matches;Me(Br,"Didn't find any matches after fetcher action");let Sr=++J;Z.set(N,Sr);let ui=Al(X,We.data);P.fetchers.set(N,ui);let[zr,pn]=Ew(t.history,P,Br,X,Ft,!1,d.unstable_skipActionErrorRevalidation,Ae,Nt,St,Q,O,le,Mi,l,[W.route.id,We]);pn.filter(et=>et.key!==N).forEach(et=>{let Zn=et.key,ul=P.fetchers.get(Zn),Pc=Al(void 0,ul?ul.data:void 0);P.fetchers.set(Zn,Pc),Le.has(Zn)&&Jn(Zn),et.controller&&Le.set(Zn,et.controller)}),Se({fetchers:new Map(P.fetchers)});let dr=()=>pn.forEach(et=>Jn(et.key));me.signal.addEventListener("abort",dr);let{loaderResults:Vi,fetcherResults:Uo}=await Ot(P.matches,Br,zr,pn,It);if(me.signal.aborted)return;me.signal.removeEventListener("abort",dr),Z.delete(N),Le.delete(N),pn.forEach(et=>Le.delete(et.key));let xe=Nw([...Vi,...Uo]);if(xe){if(xe.idx>=zr.length){let et=pn[xe.idx-zr.length].key;le.add(et)}return Xn(It,xe.result)}let{loaderData:ht,errors:mn}=Cw(P,P.matches,zr,Vi,void 0,pn,Uo,ce);if(P.fetchers.has(N)){let et=Bi(We.data);P.fetchers.set(N,et)}L(Sr),P.navigation.state==="loading"&&Sr>de?(Me(S,"Expected pending action"),T&&T.abort(),Be(P.navigation.location,{matches:Br,loaderData:ht,errors:mn,fetchers:new Map(P.fetchers)})):(Se({errors:mn,loaderData:Aw(P.loaderData,ht,Br,mn),fetchers:new Map(P.fetchers)}),Ae=!1)}async function Ls(N,x,j,W,re,he,Ee,X){let ke=P.fetchers.get(N);Nn(N,Al(X,ke?ke.data:void 0),{flushSync:Ee});let ye=new AbortController,me=Wo(t.history,j,ye.signal);if(he){let We=await Ht(re,j,me.signal);if(We.type==="aborted")return;if(We.type==="error"){let{error:Ft}=pe(j,We);Mn(N,x,Ft,{flushSync:Ee});return}else if(We.matches)re=We.matches,W=zl(re,j);else{Mn(N,x,bn(404,{pathname:j}),{flushSync:Ee});return}}Le.set(N,ye);let Ve=J,Ze=(await hr("loader",me,[W],re))[0];if(Gs(Ze)&&(Ze=await bI(Ze,me.signal,!0)||Ze),Le.get(N)===ye&&Le.delete(N),!me.signal.aborted){if(Q.has(N)){Nn(N,Bi(void 0));return}if(Qs(Ze))if(de>Ve){Nn(N,Bi(void 0));return}else{le.add(N),await Xn(me,Ze);return}if(nr(Ze)){Mn(N,x,Ze.error);return}Me(!Gs(Ze),"Unhandled fetcher deferred data"),Nn(N,Bi(Ze.data))}}async function Xn(N,x,j){let{submission:W,fetcherSubmission:re,replace:he}=j===void 0?{}:j;x.response.headers.has("X-Remix-Revalidate")&&(Ae=!0);let Ee=x.response.headers.get("Location");Me(Ee,"Expected a Location header on the redirect Response"),Ee=Rw(Ee,new URL(N.url),l);let X=Mu(P.location,Ee,{_isRedirect:!0});if(n){let Ze=!1;if(x.response.headers.has("X-Remix-Reload-Document"))Ze=!0;else if(J_.test(Ee)){const We=t.history.createURL(Ee);Ze=We.origin!==e.location.origin||Xa(We.pathname,l)==null}if(Ze){he?e.location.replace(Ee):e.location.assign(Ee);return}}T=null;let ke=he===!0?$t.Replace:$t.Push,{formMethod:ye,formAction:me,formEncType:Ve}=P.navigation;!W&&!re&&ye&&me&&Ve&&(W=xw(P.navigation));let ze=W||re;if(RD.has(x.response.status)&&ze&&Pr(ze.formMethod))await Rt(ke,X,{submission:Ct({},ze,{formAction:Ee}),preventScrollReset:v});else{let Ze=Op(X,W);await Rt(ke,X,{overrideNavigation:Ze,fetcherSubmission:re,preventScrollReset:v})}}async function hr(N,x,j,W){try{let re=await DD(c,N,x,j,W,s,i);return await Promise.all(re.map((he,Ee)=>{if(jD(he)){let X=he.result;return{type:at.redirect,response:MD(X,x,j[Ee].route.id,W,l,d.v7_relativeSplatPath)}}return OD(he)}))}catch(re){return j.map(()=>({type:at.error,error:re}))}}async function Ot(N,x,j,W,re){let[he,...Ee]=await Promise.all([j.length?hr("loader",re,j,x):[],...W.map(X=>{if(X.matches&&X.match&&X.controller){let ke=Wo(t.history,X.path,X.controller.signal);return hr("loader",ke,[X.match],X.matches).then(ye=>ye[0])}else return Promise.resolve({type:at.error,error:bn(404,{pathname:X.path})})})]);return await Promise.all([bw(N,j,he,he.map(()=>re.signal),!1,P.loaderData),bw(N,W.map(X=>X.match),Ee,W.map(X=>X.controller?X.controller.signal:null),!0)]),{loaderResults:he,fetcherResults:Ee}}function Mt(){Ae=!0,Nt.push(..._e()),O.forEach((N,x)=>{Le.has(x)&&(St.push(x),Jn(x))})}function Nn(N,x,j){j===void 0&&(j={}),P.fetchers.set(N,x),Se({fetchers:new Map(P.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Mn(N,x,j,W){W===void 0&&(W={});let re=su(P.matches,x);Oi(N),Se({errors:{[re.route.id]:j},fetchers:new Map(P.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Os(N){return d.v7_fetcherPersist&&(H.set(N,(H.get(N)||0)+1),Q.has(N)&&Q.delete(N)),P.fetchers.get(N)||ID}function Oi(N){let x=P.fetchers.get(N);Le.has(N)&&!(x&&x.state==="loading"&&Z.has(N))&&Jn(N),O.delete(N),Z.delete(N),le.delete(N),Q.delete(N),P.fetchers.delete(N)}function $r(N){if(d.v7_fetcherPersist){let x=(H.get(N)||0)-1;x<=0?(H.delete(N),Q.add(N)):H.set(N,x)}else Oi(N);Se({fetchers:new Map(P.fetchers)})}function Jn(N){let x=Le.get(N);Me(x,"Expected fetch controller: "+N),x.abort(),Le.delete(N)}function Ms(N){for(let x of N){let j=Os(x),W=Bi(j.data);P.fetchers.set(x,W)}}function F(){let N=[],x=!1;for(let j of le){let W=P.fetchers.get(j);Me(W,"Expected fetcher: "+j),W.state==="loading"&&(le.delete(j),N.push(j),x=!0)}return Ms(N),x}function L(N){let x=[];for(let[j,W]of Z)if(W<N){let re=P.fetchers.get(j);Me(re,"Expected fetcher: "+j),re.state==="loading"&&(Jn(j),Z.delete(j),x.push(j))}return Ms(x),x.length>0}function q(N,x){let j=P.blockers.get(N)||Cl;return ie.get(N)!==x&&ie.set(N,x),j}function ne(N){P.blockers.delete(N),ie.delete(N)}function ee(N,x){let j=P.blockers.get(N)||Cl;Me(j.state==="unblocked"&&x.state==="blocked"||j.state==="blocked"&&x.state==="blocked"||j.state==="blocked"&&x.state==="proceeding"||j.state==="blocked"&&x.state==="unblocked"||j.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+x.state);let W=new Map(P.blockers);W.set(N,x),Se({blockers:W})}function oe(N){let{currentLocation:x,nextLocation:j,historyAction:W}=N;if(ie.size===0)return;ie.size>1&&ba(!1,"A router only supports one blocker at a time");let re=Array.from(ie.entries()),[he,Ee]=re[re.length-1],X=P.blockers.get(he);if(!(X&&X.state==="proceeding")&&Ee({currentLocation:x,nextLocation:j,historyAction:W}))return he}function fe(N){let x=bn(404,{pathname:N}),j=a||o,{matches:W,route:re}=Pw(j);return _e(),{notFoundMatches:W,route:re,error:x}}function pe(N,x){let j=x.partialMatches,W=j[j.length-1].route,re=bn(400,{type:"route-discovery",routeId:W.id,pathname:N,message:x.error!=null&&"message"in x.error?x.error:String(x.error)});return{notFoundMatches:j,route:W,error:re}}function _e(N){let x=[];return ce.forEach((j,W)=>{(!N||N(W))&&(j.cancel(),x.push(W),ce.delete(W))}),x}function Re(N,x,j){if(y=N,b=x,E=j||null,!R&&P.navigation===Lp){R=!0;let W=vt(P.location,P.matches);W!=null&&Se({restoreScrollPosition:W})}return()=>{y=null,b=null,E=null}}function Je(N,x){return E&&E(N,x.map(W=>nD(W,P.loaderData)))||N.key}function Vt(N,x){if(y&&b){let j=Je(N,x);y[j]=b()}}function vt(N,x){if(y){let j=Je(N,x),W=y[j];if(typeof W=="number")return W}return null}function bt(N,x,j){if(h)if(N){let W=N[N.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:kh(x,j,l,!0)}}else return{active:!0,matches:kh(x,j,l,!0)||[]};return{active:!1,matches:null}}async function Ht(N,x,j){let W=N,re=W.length>0?W[W.length-1].route:null;for(;;){let he=a==null,Ee=a||o;try{await bD(h,x,W,Ee,s,i,Te,j)}catch(me){return{type:"error",error:me,partialMatches:W}}finally{he&&(o=[...o])}if(j.aborted)return{type:"aborted"};let X=zs(Ee,x,l),ke=!1;if(X){let me=X[X.length-1].route;if(me.index)return{type:"success",matches:X};if(me.path&&me.path.length>0)if(me.path==="*")ke=!0;else return{type:"success",matches:X}}let ye=kh(Ee,x,l,!0);if(!ye||W.map(me=>me.route.id).join("-")===ye.map(me=>me.route.id).join("-"))return{type:"success",matches:ke?X:null};if(W=ye,re=W[W.length-1].route,re.path==="*")return{type:"success",matches:W}}}function wt(N){s={},a=Vu(N,i,void 0,s)}function li(N,x){let j=a==null;kI(N,x,a||o,s,i),j&&(o=[...o],Se({}))}return z={get basename(){return l},get future(){return d},get state(){return P},get routes(){return o},get window(){return e},initialize:ge,subscribe:ot,enableScrollRestoration:Re,navigate:Yt,fetch:Ds,revalidate:Yn,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Os,deleteFetcher:$r,dispose:Ye,getBlocker:q,deleteBlocker:ne,patchRoutes:li,_internalFetchControllers:Le,_internalActiveDeferreds:ce,_internalSetRoutes:wt},z}function kD(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function sg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=Y_(i||".",Q_(l,s),Xa(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Z_(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ti([n,h.pathname])),ao(h)}function ww(t,e,n,r){if(!r||!kD(r))return{path:n};if(r.formMethod&&!BD(r.formMethod))return{path:n,error:bn(405,{method:r.formMethod})};let i=()=>({path:n,error:bn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=PI(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Pr(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,y)=>{let[E,b]=y;return""+_+E+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Pr(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=og(r.formData),c=r.formData;else if(r.body instanceof FormData)l=og(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Iw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Iw(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Pr(h.formMethod))return{path:n,submission:h};let d=Rs(n);return e&&d.search&&Z_(d.search)&&l.append("index",""),d.search="?"+l,{path:ao(d),submission:h}}function PD(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Ew(t,e,n,r,i,s,o,a,l,c,h,d,p,_,y,E){let b=E?nr(E[1])?E[1].error:E[1].data:void 0,R=t.createURL(e.location),g=t.createURL(i),I=E&&nr(E[1])?E[0]:void 0,M=I?PD(n,I):n,z=E?E[1].statusCode:void 0,P=o&&z&&z>=400,S=M.filter((T,A)=>{let{route:k}=T;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(ND(e.loaderData,e.matches[A],T)||l.some(Ae=>Ae===T.route.id))return!0;let D=e.matches[A],C=T;return Tw(T,Ct({currentUrl:R,currentParams:D.params,nextUrl:g,nextParams:C.params},r,{actionResult:b,unstable_actionStatus:z,defaultShouldRevalidate:P?!1:a||R.pathname+R.search===g.pathname+g.search||R.search!==g.search||AI(D,C)}))}),v=[];return d.forEach((T,A)=>{if(s||!n.some(Nt=>Nt.route.id===T.routeId)||h.has(A))return;let k=zs(_,T.path,y);if(!k){v.push({key:A,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(A),C=zl(k,T.path),Ae=!1;p.has(A)?Ae=!1:c.includes(A)?Ae=!0:D&&D.state!=="idle"&&D.data===void 0?Ae=a:Ae=Tw(C,Ct({currentUrl:R,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:b,unstable_actionStatus:z,defaultShouldRevalidate:P?!1:a})),Ae&&v.push({key:A,routeId:T.routeId,path:T.path,matches:k,match:C,controller:new AbortController})}),[S,v]}function ND(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function AI(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Tw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function bD(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(h,d)=>{a.aborted||kI(h,d,r,i,s)}}),o.set(l,c)),c&&UD(c)&&await c}finally{o.delete(l)}}function kI(t,e,n,r,i){if(t){var s;let o=r[t];Me(o,"No route found to patch children into: routeId = "+t);let a=Vu(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Vu(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function Sw(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ba(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!eD.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Ct({},e(i),{lazy:void 0}))}function xD(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function DD(t,e,n,r,i,s,o,a){let l=r.reduce((d,p)=>d.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(d=>{let p=l.has(d.route.id);return Ct({},d,{shouldLoad:p,resolve:y=>(c.add(d.route.id),p?LD(e,n,d,s,o,y,a):Promise.resolve({type:at.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Me(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((d,p)=>l.has(i[p].route.id))}async function LD(t,e,n,r,i,s,o){let a,l,c=h=>{let d,p=new Promise((E,b)=>d=b);l=()=>d(),e.signal.addEventListener("abort",l);let _=E=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...E!==void 0?[E]:[]),y;return s?y=s(E=>_(E)):y=(async()=>{try{return{type:"data",result:await _()}}catch(E){return{type:"error",result:E}}})(),Promise.race([y,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let d,[p]=await Promise.all([c(h).catch(_=>{d=_}),Sw(n.route,i,r)]);if(d!==void 0)throw d;a=p}else if(await Sw(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let d=new URL(e.url),p=d.pathname+d.search;throw bn(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:at.data,result:void 0};else if(h)a=await c(h);else{let d=new URL(e.url),p=d.pathname+d.search;throw bn(404,{pathname:p})}Me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:at.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function OD(t){let{result:e,type:n,status:r}=t;if(NI(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:at.error,error:a}}return n===at.error?{type:at.error,error:new X_(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:at.data,data:o,statusCode:e.status,headers:e.headers}}if(n===at.error)return{type:at.error,error:e,statusCode:rf(e)?e.status:r};if($D(e)){var i,s;return{type:at.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:at.data,data:e,statusCode:r}}function MD(t,e,n,r,i,s){let o=t.headers.get("Location");if(Me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!J_.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=sg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Rw(t,e,n){if(J_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Xa(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Wo(t,e,n,r){let i=t.createURL(PI(e)).toString(),s={signal:n};if(r&&Pr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=og(r.formData):s.body=r.formData}return new Request(i,s)}function og(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Iw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function VD(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},d=r&&nr(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let y=e[_].route.id;if(Me(!Qs(p),"Cannot handle redirect results in processLoaderData"),nr(p)){let E=p.error;d!==void 0&&(E=d,d=void 0),a=a||{};{let b=su(t,y);a[b.route.id]==null&&(a[b.route.id]=E)}o[y]=void 0,c||(c=!0,l=rf(p.error)?p.error.status:500),p.headers&&(h[y]=p.headers)}else Gs(p)?(i.set(y,p.deferredData),o[y]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers)):(o[y]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function Cw(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=VD(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:d,match:p,controller:_}=s[h];Me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let y=o[h];if(!(_&&_.signal.aborted))if(nr(y)){let E=su(t.matches,p==null?void 0:p.route.id);c&&c[E.route.id]||(c=Ct({},c,{[E.route.id]:y.error})),t.fetchers.delete(d)}else if(Qs(y))Me(!1,"Unhandled fetcher revalidation redirect");else if(Gs(y))Me(!1,"Unhandled fetcher deferred data");else{let E=Bi(y.data);t.fetchers.set(d,E)}}return{loaderData:l,errors:c}}function Aw(t,e,n,r){let i=Ct({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function kw(t){return t?nr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function su(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Pw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function bn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `children()` function for '+("route `"+r+"` threw the following error:\n"+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new X_(t||500,a,new Error(l),!0)}function Nw(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Qs(n))return{result:n,idx:e}}}function PI(t){let e=typeof t=="string"?Rs(t):t;return ao(Ct({},e,{hash:""}))}function FD(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function UD(t){return typeof t=="object"&&t!=null&&"then"in t}function jD(t){return NI(t.result)&&SD.has(t.result.status)}function Gs(t){return t.type===at.deferred}function nr(t){return t.type===at.error}function Qs(t){return(t&&t.type)===at.redirect}function $D(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function NI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function BD(t){return TD.has(t.toLowerCase())}function Pr(t){return wD.has(t.toLowerCase())}async function bw(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),h=c!=null&&!AI(c,l)&&(s&&s[l.route.id])!==void 0;if(Gs(a)&&(i||h)){let d=r[o];Me(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await bI(a,d,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function bI(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:at.data,data:t.deferredData.unwrappedData}}catch(i){return{type:at.error,error:i}}return{type:at.data,data:t.deferredData.data}}}function Z_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function zl(t,e){let n=typeof e=="string"?Rs(e).search:e.search;if(t[t.length-1].route.index&&Z_(n||""))return t[t.length-1];let r=RI(t);return r[r.length-1]}function xw(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Op(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function zD(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Al(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function WD(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Bi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function HD(t,e){try{let n=t.sessionStorage.getItem(CI);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function qD(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(CI,JSON.stringify(n))}catch(r){ba(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ld(){return ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ld.apply(this,arguments)}const sf=B.createContext(null),xI=B.createContext(null),Co=B.createContext(null),ey=B.createContext(null),Is=B.createContext({outlet:null,matches:[],isDataRoute:!1}),DI=B.createContext(null);function KD(t,e){let{relative:n}=e===void 0?{}:e;ic()||Me(!1);let{basename:r,navigator:i}=B.useContext(Co),{hash:s,pathname:o,search:a}=OI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ti([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ic(){return B.useContext(ey)!=null}function of(){return ic()||Me(!1),B.useContext(ey).location}function LI(t){B.useContext(Co).static||B.useLayoutEffect(t)}function Cs(){let{isDataRoute:t}=B.useContext(Is);return t?aL():GD()}function GD(){ic()||Me(!1);let t=B.useContext(sf),{basename:e,future:n,navigator:r}=B.useContext(Co),{matches:i}=B.useContext(Is),{pathname:s}=of(),o=JSON.stringify(Q_(i,n.v7_relativeSplatPath)),a=B.useRef(!1);return LI(()=>{a.current=!0}),B.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Y_(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ti([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const QD=B.createContext(null);function YD(t){let e=B.useContext(Is).outlet;return e&&B.createElement(QD.Provider,{value:t},e)}function OI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=B.useContext(Co),{matches:i}=B.useContext(Is),{pathname:s}=of(),o=JSON.stringify(Q_(i,r.v7_relativeSplatPath));return B.useMemo(()=>Y_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function XD(t,e,n,r){ic()||Me(!1);let{navigator:i}=B.useContext(Co),{matches:s}=B.useContext(Is),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=of(),h;h=c;let d=h.pathname||"/",p=d;if(l!=="/"){let E=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=zs(t,{pathname:p});return nL(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Ti([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Ti([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r)}function JD(){let t=oL(),e=rf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,null)}const ZD=B.createElement(JD,null);class eL extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(Is.Provider,{value:this.props.routeContext},B.createElement(DI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tL(t){let{routeContext:e,match:n,children:r}=t,i=B.useContext(sf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(Is.Provider,{value:e},r)}function nL(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:_}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let _,y=!1,E=null,b=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||ZD,l&&(c<0&&p===0?(lL("route-fallback"),y=!0,b=null):c===p&&(y=!0,b=d.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,p+1)),g=()=>{let I;return _?I=E:y?I=b:d.route.Component?I=B.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=h,B.createElement(tL,{match:d,routeContext:{outlet:h,matches:R,isDataRoute:n!=null},children:I})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?B.createElement(eL,{location:n.location,revalidation:n.revalidation,component:E,error:_,children:g(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):g()},null)}var MI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MI||{}),ud=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ud||{});function rL(t){let e=B.useContext(sf);return e||Me(!1),e}function iL(t){let e=B.useContext(xI);return e||Me(!1),e}function sL(t){let e=B.useContext(Is);return e||Me(!1),e}function VI(t){let e=sL(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function oL(){var t;let e=B.useContext(DI),n=iL(ud.UseRouteError),r=VI(ud.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aL(){let{router:t}=rL(MI.UseNavigateStable),e=VI(ud.UseNavigateStable),n=B.useRef(!1);return LI(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ld({fromRouteId:e},s)))},[t,e])}const Dw={};function lL(t,e,n){Dw[t]||(Dw[t]=!0)}function uL(t){return YD(t.context)}function cL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$t.Pop,navigator:s,static:o=!1,future:a}=t;ic()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:ld({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Rs(r));let{pathname:h="/",search:d="",hash:p="",state:_=null,key:y="default"}=r,E=B.useMemo(()=>{let b=Xa(h,l);return b==null?null:{location:{pathname:b,search:d,hash:p,state:_,key:y},navigationType:i}},[l,h,d,p,_,y,i]);return E==null?null:B.createElement(Co.Provider,{value:c},B.createElement(ey.Provider,{children:n,value:E}))}new Promise(()=>{});function hL(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:B.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:B.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:B.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}function dL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function fL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pL(t,e){return t.button===0&&(!e||e==="_self")&&!fL(t)}const mL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gL="6";try{window.__reactRouterVersion=gL}catch{}function _L(t,e){return AD({basename:void 0,future:Fu({},void 0,{v7_prependBasename:!0}),history:Xx({window:void 0}),hydrationData:yL(),routes:t,mapRouteProperties:hL,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function yL(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Fu({},e,{errors:vL(e.errors)})),e}function vL(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new X_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const wL=B.createContext({isTransitioning:!1}),EL=B.createContext(new Map),TL="startTransition",Lw=UN[TL],SL="flushSync",Ow=Yx[SL];function RL(t){Lw?Lw(t):t()}function kl(t){Ow?Ow(t):t()}let IL=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function CL(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=B.useState(n.state),[o,a]=B.useState(),[l,c]=B.useState({isTransitioning:!1}),[h,d]=B.useState(),[p,_]=B.useState(),[y,E]=B.useState(),b=B.useRef(new Map),{v7_startTransition:R}=r||{},g=B.useCallback(S=>{R?RL(S):S()},[R]),I=B.useCallback((S,v)=>{let{deletedFetchers:T,unstable_flushSync:A,unstable_viewTransitionOpts:k}=v;T.forEach(C=>b.current.delete(C)),S.fetchers.forEach((C,Ae)=>{C.data!==void 0&&b.current.set(Ae,C.data)});let D=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||D){A?kl(()=>s(S)):g(()=>s(S));return}if(A){kl(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let C=n.window.document.startViewTransition(()=>{kl(()=>s(S))});C.finished.finally(()=>{kl(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),kl(()=>_(C));return}p?(h&&h.resolve(),p.skipTransition(),E({state:S,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(a(S),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,p,h,b,g]);B.useLayoutEffect(()=>n.subscribe(I),[n,I]),B.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new IL)},[l]),B.useEffect(()=>{if(h&&o&&n.window){let S=o,v=h.promise,T=n.window.document.startViewTransition(async()=>{g(()=>s(S)),await v});T.finished.finally(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(T)}},[g,o,h,n.window]),B.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),B.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),E(void 0))},[l.isTransitioning,y]),B.useEffect(()=>{},[]);let M=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,v,T)=>n.navigate(S,{state:v,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(S,v,T)=>n.navigate(S,{replace:!0,state:v,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),z=n.basename||"/",P=B.useMemo(()=>({router:n,navigator:M,static:!1,basename:z}),[n,M,z]);return B.createElement(B.Fragment,null,B.createElement(sf.Provider,{value:P},B.createElement(xI.Provider,{value:i},B.createElement(EL.Provider,{value:b.current},B.createElement(wL.Provider,{value:l},B.createElement(cL,{basename:z,location:i.location,navigationType:i.historyAction,navigator:M,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?B.createElement(AL,{routes:n.routes,future:n.future,state:i}):e))))),null)}function AL(t){let{routes:e,future:n,state:r}=t;return XD(e,void 0,r,n)}const kL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xa=B.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=dL(e,mL),{basename:_}=B.useContext(Co),y,E=!1;if(typeof c=="string"&&PL.test(c)&&(y=c,kL))try{let I=new URL(window.location.href),M=c.startsWith("//")?new URL(I.protocol+c):new URL(c),z=Xa(M.pathname,_);M.origin===I.origin&&z!=null?c=z+M.search+M.hash:E=!0}catch{}let b=KD(c,{relative:i}),R=NL(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function g(I){r&&r(I),I.defaultPrevented||R(I)}return B.createElement("a",Fu({},p,{href:y||b,onClick:E||s?r:g,ref:n,target:l}))});var Mw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mw||(Mw={}));var Vw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vw||(Vw={}));function NL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Cs(),c=of(),h=OI(t,{relative:o});return B.useCallback(d=>{if(pL(d,n)){d.preventDefault();let p=r!==void 0?r:ao(c)===ao(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var Fw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se=function(t,e){if(!t)throw Ja(e)},Ja=function(t){return new Error("Firebase Database ("+FI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[d],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new xL;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jI=function(t){const e=UI(t);return ty.encodeByteArray(e,!0)},cd=function(t){return jI(t).replace(/\./g,"")},hd=function(t){try{return ty.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){return $I(void 0,t)}function $I(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!LL(n)||(t[n]=$I(t[n],e[n]));return t}function LL(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=()=>OL().__FIREBASE_DEFAULTS__,VL=()=>{if(typeof process>"u"||typeof Fw>"u")return;const t=Fw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hd(t[1]);return e&&JSON.parse(e)},af=()=>{try{return ML()||VL()||FL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BI=t=>{var e,n;return(n=(e=af())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UL=t=>{const e=BI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zI=()=>{var t;return(t=af())===null||t===void 0?void 0:t.config},WI=t=>{var e;return(e=af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cd(JSON.stringify(n)),cd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ry(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function $L(){var t;const e=(t=af())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BL(){const t=fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KI(){return FI.NODE_ADMIN===!0}function zL(){return!$L()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function QI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function WL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HL,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jr(i,a,r)}}function qL(t,e){return t.replace(KL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return JSON.parse(t)}function ln(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Uu(hd(s[0])||""),n=Uu(hd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},GL=function(t){const e=YI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},QL=function(t){const e=YI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Da(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ag(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Uw(s)&&Uw(o)){if(!fd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Uw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function XL(t,e){const n=new JL(t,e);return n.subscribe.bind(n)}class JL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mp),i.error===void 0&&(i.error=Mp),i.complete===void 0&&(i.complete=Mp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mp(){}function eO(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,se(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lf=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=1e3,rO=2,iO=4*60*60*1e3,sO=.5;function jw(t,e=nO,n=rO){const r=e*Math.pow(n,t),i=Math.round(sO*r*(Math.random()-.5)*2);return Math.min(iO,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t){return t&&t._delegate?t._delegate:t}class Er{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ny;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lO(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aO(t){return t===$s?void 0:t}function lO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const cO={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},hO=Ue.INFO,dO={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},fO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=dO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sc{constructor(e){this.name=e,this._logLevel=hO,this._logHandler=fO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const pO=(t,e)=>e.some(n=>t instanceof n);let $w,Bw;function mO(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gO(){return Bw||(Bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XI=new WeakMap,lg=new WeakMap,JI=new WeakMap,Vp=new WeakMap,iy=new WeakMap;function _O(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XI.set(n,t)}).catch(()=>{}),iy.set(e,t),e}function yO(t){if(lg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lg.set(t,e)}let ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vO(t){ug=t(ug)}function wO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fp(this),e,...n);return JI.set(r,e.sort?e.sort():[e]),us(r)}:gO().includes(t)?function(...e){return t.apply(Fp(this),e),us(XI.get(this))}:function(...e){return us(t.apply(Fp(this),e))}}function EO(t){return typeof t=="function"?wO(t):(t instanceof IDBTransaction&&yO(t),pO(t,mO())?new Proxy(t,ug):t)}function us(t){if(t instanceof IDBRequest)return _O(t);if(Vp.has(t))return Vp.get(t);const e=EO(t);return e!==t&&(Vp.set(t,e),iy.set(e,t)),e}const Fp=t=>iy.get(t);function ZI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const TO=["get","getKey","getAll","getAllKeys","count"],SO=["put","add","delete","clear"],Up=new Map;function zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=SO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Up.set(e,s),s}vO(t=>({...t,get:(e,n,r)=>zw(e,n)||t.get(e,n,r),has:(e,n)=>!!zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cg="@firebase/app",Ww="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new sc("@firebase/app"),CO="@firebase/app-compat",AO="@firebase/analytics-compat",kO="@firebase/analytics",PO="@firebase/app-check-compat",NO="@firebase/app-check",bO="@firebase/auth",xO="@firebase/auth-compat",DO="@firebase/database",LO="@firebase/database-compat",OO="@firebase/functions",MO="@firebase/functions-compat",VO="@firebase/installations",FO="@firebase/installations-compat",UO="@firebase/messaging",jO="@firebase/messaging-compat",$O="@firebase/performance",BO="@firebase/performance-compat",zO="@firebase/remote-config",WO="@firebase/remote-config-compat",HO="@firebase/storage",qO="@firebase/storage-compat",KO="@firebase/firestore",GO="@firebase/vertexai-preview",QO="@firebase/firestore-compat",YO="firebase",XO="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="[DEFAULT]",JO={[cg]:"fire-core",[CO]:"fire-core-compat",[kO]:"fire-analytics",[AO]:"fire-analytics-compat",[NO]:"fire-app-check",[PO]:"fire-app-check-compat",[bO]:"fire-auth",[xO]:"fire-auth-compat",[DO]:"fire-rtdb",[LO]:"fire-rtdb-compat",[OO]:"fire-fn",[MO]:"fire-fn-compat",[VO]:"fire-iid",[FO]:"fire-iid-compat",[UO]:"fire-fcm",[jO]:"fire-fcm-compat",[$O]:"fire-perf",[BO]:"fire-perf-compat",[zO]:"fire-rc",[WO]:"fire-rc-compat",[HO]:"fire-gcs",[qO]:"fire-gcs-compat",[KO]:"fire-fst",[QO]:"fire-fst-compat",[GO]:"fire-vertex","fire-js":"fire-js",[YO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,ZO=new Map,dg=new Map;function Hw(t,e){try{t.container.addComponent(e)}catch(n){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vr(t){const e=t.name;if(dg.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of pd.values())Hw(n,t);for(const n of ZO.values())Hw(n,t);return!0}function oc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Ao("app","Firebase",eM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=XO;function eC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw cs.create("bad-app-name",{appName:String(i)});if(n||(n=zI()),!n)throw cs.create("no-options");const s=pd.get(i);if(s){if(fd(n,s.options)&&fd(r,s.config))return s;throw cs.create("duplicate-app",{appName:i})}const o=new uO(i);for(const l of dg.values())o.addComponent(l);const a=new tM(n,r,o);return pd.set(i,a),a}function tC(t=hg){const e=pd.get(t);if(!e&&t===hg&&zI())return eC();if(!e)throw cs.create("no-app",{appName:t});return e}function qn(t,e,n){var r;let i=(r=JO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(a.join(" "));return}Vr(new Er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="firebase-heartbeat-database",rM=1,ju="firebase-heartbeat-store";let jp=null;function nC(){return jp||(jp=ZI(nM,rM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),jp}async function iM(t){try{const n=(await nC()).transaction(ju),r=await n.objectStore(ju).get(rC(t));return await n.done,r}catch(e){if(e instanceof jr)lo.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lo.warn(n.message)}}}async function qw(t,e){try{const r=(await nC()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,rC(t)),await r.done}catch(n){if(n instanceof jr)lo.warn(n.message);else{const r=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lo.warn(r.message)}}}function rC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=1024,oM=30*24*60*60*1e3;class aM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=oM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kw(),{heartbeatsToSend:r,unsentEntries:i}=lM(this._heartbeatsCache.heartbeats),s=cd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Kw(){return new Date().toISOString().substring(0,10)}function lM(t,e=sM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Gw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?QI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Gw(t){return cd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){Vr(new Er("platform-logger",e=>new RO(e),"PRIVATE")),Vr(new Er("heartbeat",e=>new aM(e),"PRIVATE")),qn(cg,Ww,t),qn(cg,Ww,"esm2017"),qn("fire-js","")}cM("");var hM="firebase",dM="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(hM,dM,"app");const iC="@firebase/installations",sy="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1e4,oC=`w:${sy}`,aC="FIS_v2",fM="https://firebaseinstallations.googleapis.com/v1",pM=60*60*1e3,mM="installations",gM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},uo=new Ao(mM,gM,_M);function lC(t){return t instanceof jr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC({projectId:t}){return`${fM}/projects/${t}/installations`}function cC(t){return{token:t.token,requestStatus:2,expiresIn:vM(t.expiresIn),creationTime:Date.now()}}async function hC(t,e){const r=(await e.json()).error;return uo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function dC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yM(t,{refreshToken:e}){const n=dC(t);return n.append("Authorization",wM(e)),n}async function fC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vM(t){return Number(t.replace("s","000"))}function wM(t){return`${aC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=uC(t),i=dC(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:aC,appId:t.appId,sdkVersion:oC},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await fC(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:cC(c.authToken)}}else throw await hC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^[cdef][\w-]{21}$/,fg="";function RM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=IM(t);return SM.test(n)?n:fg}catch{return fg}}function IM(t){return TM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Map;function gC(t,e){const n=uf(t);_C(n,e),CM(n,e)}function _C(t,e){const n=mC.get(t);if(n)for(const r of n)r(e)}function CM(t,e){const n=AM();n&&n.postMessage({key:t,fid:e}),kM()}let Ys=null;function AM(){return!Ys&&"BroadcastChannel"in self&&(Ys=new BroadcastChannel("[Firebase] FID Change"),Ys.onmessage=t=>{_C(t.data.key,t.data.fid)}),Ys}function kM(){mC.size===0&&Ys&&(Ys.close(),Ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="firebase-installations-database",NM=1,co="firebase-installations-store";let $p=null;function oy(){return $p||($p=ZI(PM,NM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(co)}}})),$p}async function md(t,e){const n=uf(t),i=(await oy()).transaction(co,"readwrite"),s=i.objectStore(co),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&gC(t,e.fid),e}async function yC(t){const e=uf(t),r=(await oy()).transaction(co,"readwrite");await r.objectStore(co).delete(e),await r.done}async function cf(t,e){const n=uf(t),i=(await oy()).transaction(co,"readwrite"),s=i.objectStore(co),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&gC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ay(t){let e;const n=await cf(t.appConfig,r=>{const i=bM(r),s=xM(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===fg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function bM(t){const e=t||{fid:RM(),registrationStatus:0};return vC(e)}function xM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(uo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LM(t)}:{installationEntry:e}}async function DM(t,e){try{const n=await EM(t,e);return md(t.appConfig,n)}catch(n){throw lC(n)&&n.customData.serverCode===409?await yC(t.appConfig):await md(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function LM(t){let e=await Qw(t.appConfig);for(;e.registrationStatus===1;)await pC(100),e=await Qw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ay(t);return r||n}return e}function Qw(t){return cf(t,e=>{if(!e)throw uo.create("installation-not-found");return vC(e)})}function vC(t){return OM(t)?{fid:t.fid,registrationStatus:0}:t}function OM(t){return t.registrationStatus===1&&t.registrationTime+sC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM({appConfig:t,heartbeatServiceProvider:e},n){const r=VM(t,n),i=yM(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:oC,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await fC(()=>fetch(r,a));if(l.ok){const c=await l.json();return cC(c)}else throw await hC("Generate Auth Token",l)}function VM(t,{fid:e}){return`${uC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ly(t,e=!1){let n;const r=await cf(t.appConfig,s=>{if(!wC(s))throw uo.create("not-registered");const o=s.authToken;if(!e&&jM(o))return s;if(o.requestStatus===1)return n=FM(t,e),s;{if(!navigator.onLine)throw uo.create("app-offline");const a=BM(s);return n=UM(t,a),a}});return n?await n:r.authToken}async function FM(t,e){let n=await Yw(t.appConfig);for(;n.authToken.requestStatus===1;)await pC(100),n=await Yw(t.appConfig);const r=n.authToken;return r.requestStatus===0?ly(t,e):r}function Yw(t){return cf(t,e=>{if(!wC(e))throw uo.create("not-registered");const n=e.authToken;return zM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function UM(t,e){try{const n=await MM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await md(t.appConfig,r),n}catch(n){if(lC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yC(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await md(t.appConfig,r)}throw n}}function wC(t){return t!==void 0&&t.registrationStatus===2}function jM(t){return t.requestStatus===2&&!$M(t)}function $M(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pM}function BM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function zM(t){return t.requestStatus===1&&t.requestTime+sC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t){const e=t,{installationEntry:n,registrationPromise:r}=await ay(e);return r?r.catch(console.error):ly(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e=!1){const n=t;return await qM(n),(await ly(n,e)).token}async function qM(t){const{registrationPromise:e}=await ay(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){if(!t||!t.options)throw Bp("App Configuration");if(!t.name)throw Bp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bp(t){return uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="installations",GM="installations-internal",QM=t=>{const e=t.getProvider("app").getImmediate(),n=KM(e),r=oc(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},YM=t=>{const e=t.getProvider("app").getImmediate(),n=oc(e,EC).getImmediate();return{getId:()=>WM(n),getToken:i=>HM(n,i)}};function XM(){Vr(new Er(EC,QM,"PUBLIC")),Vr(new Er(GM,YM,"PRIVATE"))}XM();qn(iC,sy);qn(iC,sy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="analytics",JM="firebase_id",ZM="origin",e2=60*1e3,t2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new sc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yr=new Ao("analytics","Analytics",n2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){if(!t.startsWith(uy)){const e=yr.create("invalid-gtag-resource",{gtagURL:t});return Kn.warn(e.message),""}return t}function TC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function i2(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function s2(t,e){const n=i2("firebase-js-sdk-policy",{createScriptURL:r2}),r=document.createElement("script"),i=`${uy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function o2(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function a2(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await TC(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Kn.error(a)}t("config",i,s)}async function l2(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await TC(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Kn.error(s)}}function u2(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await l2(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await a2(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Kn.error(a)}}return i}function c2(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=u2(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function h2(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(uy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=30,f2=1e3;class p2{constructor(e={},n=f2){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const SC=new p2;function m2(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function g2(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:m2(r)},s=t2.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function _2(t,e=SC,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw yr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw yr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new w2;return setTimeout(async()=>{a.abort()},e2),RC({appId:r,apiKey:i,measurementId:s},o,a,e)}async function RC(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=SC){var s;const{appId:o,measurementId:a}=t;try{await y2(r,e)}catch(l){if(a)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await g2(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!v2(c)){if(i.deleteThrottleMetadata(o),a)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?jw(n,i.intervalMillis,d2):jw(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),Kn.debug(`Calling attemptFetch again in ${h} millis`),RC(t,d,r,i)}}function y2(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function v2(t){if(!(t instanceof jr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class w2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function E2(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(){if(GI())try{await QI()}catch(t){return Kn.warn(yr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Kn.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function S2(t,e,n,r,i,s,o){var a;const l=_2(t);l.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Kn.error(_)),e.push(l);const c=T2().then(_=>{if(_)return r.getId()}),[h,d]=await Promise.all([l,c]);h2(s)||s2(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[ZM]="firebase",p.update=!0,d!=null&&(p[JM]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.app=e}_delete(){return delete ou[this.app.options.appId],Promise.resolve()}}let ou={},Jw=[];const Zw={};let zp="dataLayer",I2="gtag",eE,IC,tE=!1;function C2(){const t=[];if(HI()&&t.push("This is a browser extension environment."),WL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yr.create("invalid-analytics-context",{errorInfo:e});Kn.warn(n.message)}}function A2(t,e,n){C2();const r=t.options.appId;if(!r)throw yr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yr.create("no-api-key");if(ou[r]!=null)throw yr.create("already-exists",{id:r});if(!tE){o2(zp);const{wrappedGtag:s,gtagCore:o}=c2(ou,Jw,Zw,zp,I2);IC=s,eE=o,tE=!0}return ou[r]=S2(t,Jw,Zw,e,eE,zp,n),new R2(t)}function k2(t,e,n,r){t=kn(t),E2(IC,ou[t.app.options.appId],e,n,r).catch(i=>Kn.error(i))}const nE="@firebase/analytics",rE="0.10.5";function P2(){Vr(new Er(Xw,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return A2(r,i,n)},"PUBLIC")),Vr(new Er("analytics-internal",t,"PRIVATE")),qn(nE,rE),qn(nE,rE,"esm2017");function t(e){try{const n=e.getProvider(Xw).getImmediate();return{logEvent:(r,i,s)=>k2(n,r,i,s)}}catch(n){throw yr.create("interop-component-reg-failed",{reason:n})}}}P2();function cy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N2=CC,AC=new Ao("auth","Firebase",CC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new sc("@firebase/auth");function b2(t,...e){gd.logLevel<=Ue.WARN&&gd.warn(`Auth (${ko}): ${t}`,...e)}function Ph(t,...e){gd.logLevel<=Ue.ERROR&&gd.error(`Auth (${ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw hy(t,...e)}function Jr(t,...e){return hy(t,...e)}function kC(t,e,n){const r=Object.assign(Object.assign({},N2()),{[e]:n});return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function Si(t){return kC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AC.create(t,...e)}function Ie(t,e,...n){if(!t)throw hy(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ph(e),new Error(e)}function Pi(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function x2(){return iE()==="http:"||iE()==="https:"}function iE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x2()||HI()||"connection"in navigator)?navigator.onLine:!0}function L2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=ry()||qI()}get(){return D2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e){Pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new ac(3e4,6e4);function As(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ks(t,e,n,r,i={}){return NC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),PC.fetch()(bC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function NC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O2),e);try{const i=new F2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw rh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw rh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw rh(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kC(t,h,c);Fr(t,h)}}catch(i){if(i instanceof jr)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function lc(t,e,n,r,i={}){const s=await ks(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function bC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?dy(t.config,i):`${t.config.apiScheme}://${i}`}function V2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),M2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jr(t,e,r);return i.customData._tokenResponse=n,i}function sE(t){return t!==void 0&&t.enterprise!==void 0}class U2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return V2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function j2(t,e){return ks(t,"GET","/v2/recaptchaConfig",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e){return ks(t,"POST","/v1/accounts:delete",e)}async function xC(t,e){return ks(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B2(t,e=!1){const n=kn(t),r=await n.getIdToken(e),i=fy(r);Ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:au(Wp(i.auth_time)),issuedAtTime:au(Wp(i.iat)),expirationTime:au(Wp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wp(t){return Number(t)*1e3}function fy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const i=hd(n);return i?JSON.parse(i):(Ph("Failed to decode base64 JWT payload"),null)}catch(i){return Ph("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function oE(t){const e=fy(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&z2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function z2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $u(t,xC(n,{idToken:r}));Ie(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?DC(s.providerUserInfo):[],a=q2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function H2(t){const e=kn(t);await _d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DC(t){return t.map(e=>{var{providerId:n}=e,r=cy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e){const n=await NC(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=bC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",PC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function G2(t,e){return ks(t,"POST","/v2/accounts:revokeToken",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=oE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await K2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new _a;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=cy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B2(this,e)}reload(){return H2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await $u(this,$2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,R=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:M,isAnonymous:z,providerData:P,stsTokenManager:S}=n;Ie(I&&S,e,"internal-error");const v=_a.fromJSON(this.name,S);Ie(typeof I=="string",e,"internal-error"),$i(d,e.name),$i(p,e.name),Ie(typeof M=="boolean",e,"internal-error"),Ie(typeof z=="boolean",e,"internal-error"),$i(_,e.name),$i(y,e.name),$i(E,e.name),$i(b,e.name),$i(R,e.name),$i(g,e.name);const T=new yi({uid:I,auth:e,email:p,emailVerified:M,displayName:d,isAnonymous:z,photoURL:y,phoneNumber:_,tenantId:E,stsTokenManager:v,createdAt:R,lastLoginAt:g});return P&&Array.isArray(P)&&(T.providerData=P.map(A=>Object.assign({},A))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new _a;i.updateFromServerResponse(n);const s=new yi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _d(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ie(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?DC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new _a;a.updateFromIdToken(r);const l=new yi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function vi(t){Pi(t instanceof Function,"Expected a class definition");let e=aE.get(t);return e?(Pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LC.type="NONE";const lE=LC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e,n){return`firebase:${t}:${e}:${n}`}class ya{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ya(vi(lE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||vi(lE);const o=Nh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=yi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ya(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ya(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UC(e))return"Blackberry";if(jC(e))return"Webos";if(py(e))return"Safari";if((e.includes("chrome/")||MC(e))&&!e.includes("edge/"))return"Chrome";if(FC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OC(t=fn()){return/firefox\//i.test(t)}function py(t=fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MC(t=fn()){return/crios\//i.test(t)}function VC(t=fn()){return/iemobile/i.test(t)}function FC(t=fn()){return/android/i.test(t)}function UC(t=fn()){return/blackberry/i.test(t)}function jC(t=fn()){return/webos/i.test(t)}function hf(t=fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q2(t=fn()){var e;return hf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y2(){return BL()&&document.documentMode===10}function $C(t=fn()){return hf(t)||FC(t)||jC(t)||UC(t)||/windows phone/i.test(t)||VC(t)}function X2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t,e=[]){let n;switch(t){case"Browser":n=uE(fn());break;case"Worker":n=`${uE(fn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e={}){return ks(t,"GET","/v2/passwordPolicy",As(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=6;class tV{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new J2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xC(this,{idToken:e}),r=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _d(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(Si(this));const n=e?kn(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z2(this),n=new tV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await G2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&b2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Po(t){return kn(t)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=XL(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rV(t){df=t}function zC(t){return df.loadJS(t)}function iV(){return df.recaptchaEnterpriseScript}function sV(){return df.gapiScript}function oV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const aV="recaptcha-enterprise",lV="NO_RECAPTCHA";class uV{constructor(e){this.type=aV,this.auth=Po(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{j2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new U2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;sE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&sE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iV();l.length!==0&&(l+=a),zC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function hE(t,e,n,r=!1){const i=new uV(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function gg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await hE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await hE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e){const n=oc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fd(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function hV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dV(t,e,n){const r=Po(t);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=WC(e),{host:o,port:a}=fV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pV()}function WC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fV(t){const e=WC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dE(o)}}}function dE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function mV(t,e){return ks(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e){return lc(t,"POST","/v1/accounts:signInWithPassword",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}async function yV(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends my{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gg(e,n,"signInWithPassword",gV);case"emailLink":return _V(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gg(e,r,"signUpPassword",mV);case"emailLink":return yV(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e){return lc(t,"POST","/v1/accounts:signInWithIdp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="http://localhost";class ho extends my{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=cy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ho(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return va(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,va(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,va(e,n)}buildRequest(){const e={requestUri:vV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EV(t){const e=Wl(Hl(t)).link,n=e?Wl(Hl(e)).deep_link_id:null,r=Wl(Hl(t)).deep_link_id;return(r?Wl(Hl(r)).link:null)||r||n||e||t}class gy{constructor(e){var n,r,i,s,o,a;const l=Wl(Hl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=wV((i=l.mode)!==null&&i!==void 0?i:null);Ie(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=EV(e);try{return new gy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gy.parseLink(n);return Ie(r,"argument-error"),Bu._fromEmailAndCode(e,r.code,r.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends HC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends uc{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ho._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qi.credential(n,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends uc{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends uc{constructor(){super("twitter.com")}static credential(e,n){return ho._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xi.credential(n,r)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(t,e){return lc(t,"POST","/v1/accounts:signUp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await yi._fromIdTokenResponse(e,r,i),o=fE(r);return new fo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=fE(r);return new fo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function fE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends jr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new yd(e,n,r,i)}}function qC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(t,s,e,r):s})}async function SV(t,e,n=!1){const r=await $u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e,n=!1){const{auth:r}=t;if(Kr(r.app))return Promise.reject(Si(r));const i="reauthenticate";try{const s=await $u(t,qC(r,i,e,t),n);Ie(s.idToken,r,"internal-error");const o=fy(s.idToken);Ie(o,r,"internal-error");const{sub:a}=o;return Ie(t.uid===a,r,"user-mismatch"),fo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e,n=!1){if(Kr(t.app))return Promise.reject(Si(t));const r="signIn",i=await qC(t,r,e),s=await fo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function IV(t,e){return KC(Po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t){const e=Po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CV(t,e,n){if(Kr(t.app))return Promise.reject(Si(t));const r=Po(t),o=await gg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GC(t),l}),a=await fo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function AV(t,e,n){return Kr(t.app)?Promise.reject(Si(t)):IV(kn(t),el.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GC(t),r})}function kV(t,e,n,r){return kn(t).onIdTokenChanged(e,n,r)}function PV(t,e,n){return kn(t).beforeAuthStateChanged(e,n)}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(){const t=fn();return py(t)||hf(t)}const bV=1e3,xV=10;class YC extends QC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NV()&&X2(),this.fallbackToPolling=$C(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Y2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YC.type="LOCAL";const DV=YC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends QC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XC.type="SESSION";const JC=XC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ff(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await LV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_y("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function MV(t){Zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function VV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UV(){return ZC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firebaseLocalStorageDb",jV=1,wd="firebaseLocalStorage",tA="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pf(t,e){return t.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function $V(){const t=indexedDB.deleteDatabase(eA);return new cc(t).toPromise()}function _g(){const t=indexedDB.open(eA,jV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wd,{keyPath:tA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wd)?e(r):(r.close(),await $V(),e(await _g()))})})}async function pE(t,e,n){const r=pf(t,!0).put({[tA]:e,value:n});return new cc(r).toPromise()}async function BV(t,e){const n=pf(t,!1).get(e),r=await new cc(n).toPromise();return r===void 0?null:r.value}function mE(t,e){const n=pf(t,!0).delete(e);return new cc(n).toPromise()}const zV=800,WV=3;class nA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _g(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ff._getInstance(UV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VV(),!this.activeServiceWorker)return;this.sender=new OV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _g();return await pE(e,vd,"1"),await mE(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=pf(i,!1).getAll();return new cc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nA.type="LOCAL";const HV=nA;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){return e?vi(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends my{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KV(t){return KC(t.auth,new yy(t),t.bypassAuthState)}function GV(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),RV(n,new yy(t),t.bypassAuthState)}async function QV(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),SV(n,new yy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KV;case"linkViaPopup":case"linkViaRedirect":return QV;case"reauthViaPopup":case"reauthViaRedirect":return GV;default:Fr(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=new ac(2e3,1e4);class la extends rA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=_y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YV.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="pendingRedirect",bh=new Map;class JV extends rA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const r=await ZV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZV(t,e){const n=nF(e),r=tF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eF(t,e){bh.set(t._key(),e)}function tF(t){return vi(t._redirectPersistence)}function nF(t){return Nh(XV,t.config.apiKey,t.name)}async function rF(t,e,n=!1){if(Kr(t.app))return Promise.reject(Si(t));const r=Po(t),i=qV(r,e),o=await new JV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=10*60*1e3;class sF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iF&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e={}){return ks(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uF=/^https?/;async function cF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aF(t);for(const n of e)try{if(hF(n))return}catch{}Fr(t,"unauthorized-domain")}function hF(t){const e=pg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uF.test(n))return!1;if(lF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new ac(3e4,6e4);function _E(){const t=Zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fF(t){return new Promise((e,n)=>{var r,i,s;function o(){_E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_E(),n(Jr(t,"network-request-failed"))},timeout:dF.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zr().gapi)===null||s===void 0)&&s.load)o();else{const a=oV("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Jr(t,"network-request-failed"))},zC(`${sV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw xh=null,e})}let xh=null;function pF(t){return xh=xh||fF(t),xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new ac(5e3,15e3),gF="__/auth/iframe",_F="emulator/auth/iframe",yF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wF(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dy(e,_F):`https://${t.config.authDomain}/${gF}`,r={apiKey:e.apiKey,appName:t.name,v:ko},i=vF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Za(r).slice(1)}`}async function EF(t){const e=await pF(t),n=Zr().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:wF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jr(t,"network-request-failed"),a=Zr().setTimeout(()=>{s(o)},mF.get());function l(){Zr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SF=500,RF=600,IF="_blank",CF="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AF(t,e,n,r=SF,i=RF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},TF),{width:r.toString(),height:i.toString(),top:s,left:o}),c=fn().toLowerCase();n&&(a=MC(c)?IF:n),OC(c)&&(e=e||CF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,y])=>`${p}${_}=${y},`,"");if(Q2(c)&&a!=="_self")return kF(e||"",a),new yE(null);const d=window.open(e||"",a,h);Ie(d,t,"popup-blocked");try{d.focus()}catch{}return new yE(d)}function kF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="__/auth/handler",NF="emulator/auth/handler",bF=encodeURIComponent("fac");async function vE(t,e,n,r,i,s){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ko,eventId:i};if(e instanceof HC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ag(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof uc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${bF}=${encodeURIComponent(l)}`:"";return`${xF(t)}?${Za(a).slice(1)}${c}`}function xF({config:t}){return t.emulator?dy(t,NF):`https://${t.authDomain}/${PF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class DF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JC,this._completeRedirectFn=rF,this._overrideRedirectResult=eF}async _openPopup(e,n,r,i){var s;Pi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await vE(e,n,r,pg(),i);return AF(e,o,_y())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await vE(e,n,r,pg(),i);return MV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EF(e),r=new sF(e);return n.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hp];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $C()||py()||hf()}}const LF=DF;var wE="@firebase/auth",EE="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VF(t){Vr(new Er("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BC(t)},c=new nV(r,i,s,l);return hV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vr(new Er("auth-internal",e=>{const n=Po(e.getProvider("auth").getImmediate());return(r=>new OF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(wE,EE,MF(t)),qn(wE,EE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=5*60,UF=WI("authIdTokenMaxAge")||FF;let TE=null;const jF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UF)return;const i=n==null?void 0:n.token;TE!==i&&(TE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $F(t=tC()){const e=oc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cV(t,{popupRedirectResolver:LF,persistence:[HV,DV,JC]}),r=WI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=jF(s.toString());PV(n,o,()=>o(n.currentUser)),kV(n,a=>o(a))}}const i=BI("auth");return i&&dV(n,`http://${i}`),n}function BF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VF("Browser");var SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,sA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function T(){}T.prototype=v.prototype,S.D=v.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(A,k,D){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return v.prototype[k].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,T){T||(T=0);var A=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)A[k]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(k=0;16>k;++k)A[k]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=S.g[0],T=S.g[1],k=S.g[2];var D=S.g[3],C=v+(D^T&(k^D))+A[0]+3614090360&4294967295;v=T+(C<<7&4294967295|C>>>25),C=D+(k^v&(T^k))+A[1]+3905402710&4294967295,D=v+(C<<12&4294967295|C>>>20),C=k+(T^D&(v^T))+A[2]+606105819&4294967295,k=D+(C<<17&4294967295|C>>>15),C=T+(v^k&(D^v))+A[3]+3250441966&4294967295,T=k+(C<<22&4294967295|C>>>10),C=v+(D^T&(k^D))+A[4]+4118548399&4294967295,v=T+(C<<7&4294967295|C>>>25),C=D+(k^v&(T^k))+A[5]+1200080426&4294967295,D=v+(C<<12&4294967295|C>>>20),C=k+(T^D&(v^T))+A[6]+2821735955&4294967295,k=D+(C<<17&4294967295|C>>>15),C=T+(v^k&(D^v))+A[7]+4249261313&4294967295,T=k+(C<<22&4294967295|C>>>10),C=v+(D^T&(k^D))+A[8]+1770035416&4294967295,v=T+(C<<7&4294967295|C>>>25),C=D+(k^v&(T^k))+A[9]+2336552879&4294967295,D=v+(C<<12&4294967295|C>>>20),C=k+(T^D&(v^T))+A[10]+4294925233&4294967295,k=D+(C<<17&4294967295|C>>>15),C=T+(v^k&(D^v))+A[11]+2304563134&4294967295,T=k+(C<<22&4294967295|C>>>10),C=v+(D^T&(k^D))+A[12]+1804603682&4294967295,v=T+(C<<7&4294967295|C>>>25),C=D+(k^v&(T^k))+A[13]+4254626195&4294967295,D=v+(C<<12&4294967295|C>>>20),C=k+(T^D&(v^T))+A[14]+2792965006&4294967295,k=D+(C<<17&4294967295|C>>>15),C=T+(v^k&(D^v))+A[15]+1236535329&4294967295,T=k+(C<<22&4294967295|C>>>10),C=v+(k^D&(T^k))+A[1]+4129170786&4294967295,v=T+(C<<5&4294967295|C>>>27),C=D+(T^k&(v^T))+A[6]+3225465664&4294967295,D=v+(C<<9&4294967295|C>>>23),C=k+(v^T&(D^v))+A[11]+643717713&4294967295,k=D+(C<<14&4294967295|C>>>18),C=T+(D^v&(k^D))+A[0]+3921069994&4294967295,T=k+(C<<20&4294967295|C>>>12),C=v+(k^D&(T^k))+A[5]+3593408605&4294967295,v=T+(C<<5&4294967295|C>>>27),C=D+(T^k&(v^T))+A[10]+38016083&4294967295,D=v+(C<<9&4294967295|C>>>23),C=k+(v^T&(D^v))+A[15]+3634488961&4294967295,k=D+(C<<14&4294967295|C>>>18),C=T+(D^v&(k^D))+A[4]+3889429448&4294967295,T=k+(C<<20&4294967295|C>>>12),C=v+(k^D&(T^k))+A[9]+568446438&4294967295,v=T+(C<<5&4294967295|C>>>27),C=D+(T^k&(v^T))+A[14]+3275163606&4294967295,D=v+(C<<9&4294967295|C>>>23),C=k+(v^T&(D^v))+A[3]+4107603335&4294967295,k=D+(C<<14&4294967295|C>>>18),C=T+(D^v&(k^D))+A[8]+1163531501&4294967295,T=k+(C<<20&4294967295|C>>>12),C=v+(k^D&(T^k))+A[13]+2850285829&4294967295,v=T+(C<<5&4294967295|C>>>27),C=D+(T^k&(v^T))+A[2]+4243563512&4294967295,D=v+(C<<9&4294967295|C>>>23),C=k+(v^T&(D^v))+A[7]+1735328473&4294967295,k=D+(C<<14&4294967295|C>>>18),C=T+(D^v&(k^D))+A[12]+2368359562&4294967295,T=k+(C<<20&4294967295|C>>>12),C=v+(T^k^D)+A[5]+4294588738&4294967295,v=T+(C<<4&4294967295|C>>>28),C=D+(v^T^k)+A[8]+2272392833&4294967295,D=v+(C<<11&4294967295|C>>>21),C=k+(D^v^T)+A[11]+1839030562&4294967295,k=D+(C<<16&4294967295|C>>>16),C=T+(k^D^v)+A[14]+4259657740&4294967295,T=k+(C<<23&4294967295|C>>>9),C=v+(T^k^D)+A[1]+2763975236&4294967295,v=T+(C<<4&4294967295|C>>>28),C=D+(v^T^k)+A[4]+1272893353&4294967295,D=v+(C<<11&4294967295|C>>>21),C=k+(D^v^T)+A[7]+4139469664&4294967295,k=D+(C<<16&4294967295|C>>>16),C=T+(k^D^v)+A[10]+3200236656&4294967295,T=k+(C<<23&4294967295|C>>>9),C=v+(T^k^D)+A[13]+681279174&4294967295,v=T+(C<<4&4294967295|C>>>28),C=D+(v^T^k)+A[0]+3936430074&4294967295,D=v+(C<<11&4294967295|C>>>21),C=k+(D^v^T)+A[3]+3572445317&4294967295,k=D+(C<<16&4294967295|C>>>16),C=T+(k^D^v)+A[6]+76029189&4294967295,T=k+(C<<23&4294967295|C>>>9),C=v+(T^k^D)+A[9]+3654602809&4294967295,v=T+(C<<4&4294967295|C>>>28),C=D+(v^T^k)+A[12]+3873151461&4294967295,D=v+(C<<11&4294967295|C>>>21),C=k+(D^v^T)+A[15]+530742520&4294967295,k=D+(C<<16&4294967295|C>>>16),C=T+(k^D^v)+A[2]+3299628645&4294967295,T=k+(C<<23&4294967295|C>>>9),C=v+(k^(T|~D))+A[0]+4096336452&4294967295,v=T+(C<<6&4294967295|C>>>26),C=D+(T^(v|~k))+A[7]+1126891415&4294967295,D=v+(C<<10&4294967295|C>>>22),C=k+(v^(D|~T))+A[14]+2878612391&4294967295,k=D+(C<<15&4294967295|C>>>17),C=T+(D^(k|~v))+A[5]+4237533241&4294967295,T=k+(C<<21&4294967295|C>>>11),C=v+(k^(T|~D))+A[12]+1700485571&4294967295,v=T+(C<<6&4294967295|C>>>26),C=D+(T^(v|~k))+A[3]+2399980690&4294967295,D=v+(C<<10&4294967295|C>>>22),C=k+(v^(D|~T))+A[10]+4293915773&4294967295,k=D+(C<<15&4294967295|C>>>17),C=T+(D^(k|~v))+A[1]+2240044497&4294967295,T=k+(C<<21&4294967295|C>>>11),C=v+(k^(T|~D))+A[8]+1873313359&4294967295,v=T+(C<<6&4294967295|C>>>26),C=D+(T^(v|~k))+A[15]+4264355552&4294967295,D=v+(C<<10&4294967295|C>>>22),C=k+(v^(D|~T))+A[6]+2734768916&4294967295,k=D+(C<<15&4294967295|C>>>17),C=T+(D^(k|~v))+A[13]+1309151649&4294967295,T=k+(C<<21&4294967295|C>>>11),C=v+(k^(T|~D))+A[4]+4149444226&4294967295,v=T+(C<<6&4294967295|C>>>26),C=D+(T^(v|~k))+A[11]+3174756917&4294967295,D=v+(C<<10&4294967295|C>>>22),C=k+(v^(D|~T))+A[2]+718787259&4294967295,k=D+(C<<15&4294967295|C>>>17),C=T+(D^(k|~v))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var T=v-this.blockSize,A=this.B,k=this.h,D=0;D<v;){if(k==0)for(;D<=T;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<v;)if(A[k++]=S.charCodeAt(D++),k==this.blockSize){i(this,A),k=0;break}}else for(;D<v;)if(A[k++]=S[D++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var T=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=T&255,T/=256;for(this.u(S),S=Array(16),v=T=0;4>v;++v)for(var A=0;32>A;A+=8)S[T++]=this.g[v]>>>A&255;return S};function s(S,v){var T=a;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=v(S)}function o(S,v){this.h=v;for(var T=[],A=!0,k=S.length-1;0<=k;k--){var D=S[k]|0;A&&D==v||(T[k]=D,A=!1)}this.g=T}var a={};function l(S){return-128<=S&&128>S?s(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return b(c(-S));for(var v=[],T=1,A=0;S>=T;A++)v[A]=S/T|0,T*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return b(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),A=d,k=0;k<S.length;k+=8){var D=Math.min(8,S.length-k),C=parseInt(S.substring(k,k+D),v);8>D?(D=c(Math.pow(v,D)),A=A.j(D).add(c(C))):(A=A.j(T),A=A.add(c(C)))}return A}var d=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-b(this).m();for(var S=0,v=1,T=0;T<this.g.length;T++){var A=this.i(T);S+=(0<=A?A:4294967296+A)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(E(this))return"-"+b(this).toString(S);for(var v=c(Math.pow(S,6)),T=this,A="";;){var k=M(T,v).g;T=R(T,k.j(v));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=k,y(T))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=R(this,S),E(S)?-1:y(S)?0:1};function b(S){for(var v=S.g.length,T=[],A=0;A<v;A++)T[A]=~S.g[A];return new o(T,~S.h).add(p)}t.abs=function(){return E(this)?b(this):this},t.add=function(S){for(var v=Math.max(this.g.length,S.g.length),T=[],A=0,k=0;k<=v;k++){var D=A+(this.i(k)&65535)+(S.i(k)&65535),C=(D>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=C>>>16,D&=65535,C&=65535,T[k]=C<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function R(S,v){return S.add(b(v))}t.j=function(S){if(y(this)||y(S))return d;if(E(this))return E(S)?b(this).j(b(S)):b(b(this).j(S));if(E(S))return b(this.j(b(S)));if(0>this.l(_)&&0>S.l(_))return c(this.m()*S.m());for(var v=this.g.length+S.g.length,T=[],A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<S.g.length;k++){var D=this.i(A)>>>16,C=this.i(A)&65535,Ae=S.i(k)>>>16,Nt=S.i(k)&65535;T[2*A+2*k]+=C*Nt,g(T,2*A+2*k),T[2*A+2*k+1]+=D*Nt,g(T,2*A+2*k+1),T[2*A+2*k+1]+=C*Ae,g(T,2*A+2*k+1),T[2*A+2*k+2]+=D*Ae,g(T,2*A+2*k+2)}for(A=0;A<v;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=v;A<2*v;A++)T[A]=0;return new o(T,0)};function g(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function I(S,v){this.g=S,this.h=v}function M(S,v){if(y(v))throw Error("division by zero");if(y(S))return new I(d,d);if(E(S))return v=M(b(S),v),new I(b(v.g),b(v.h));if(E(v))return v=M(S,b(v)),new I(b(v.g),v.h);if(30<S.g.length){if(E(S)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var T=p,A=v;0>=A.l(S);)T=z(T),A=z(A);var k=P(T,1),D=P(A,1);for(A=P(A,2),T=P(T,2);!y(A);){var C=D.add(A);0>=C.l(S)&&(k=k.add(T),D=C),A=P(A,1),T=P(T,1)}return v=R(S,k.j(v)),new I(k,v)}for(k=d;0<=S.l(v);){for(T=Math.max(1,Math.floor(S.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(T),C=D.j(v);E(C)||0<C.l(S);)T-=A,D=c(T),C=D.j(v);y(D)&&(D=p),k=k.add(D),S=R(S,C)}return new I(k,S)}t.A=function(S){return M(this,S).h},t.and=function(S){for(var v=Math.max(this.g.length,S.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)&S.i(A);return new o(T,this.h&S.h)},t.or=function(S){for(var v=Math.max(this.g.length,S.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)|S.i(A);return new o(T,this.h|S.h)},t.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)^S.i(A);return new o(T,this.h^S.h)};function z(S){for(var v=S.g.length+1,T=[],A=0;A<v;A++)T[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(T,S.h)}function P(S,v){var T=v>>5;v%=32;for(var A=S.g.length-T,k=[],D=0;D<A;D++)k[D]=0<v?S.i(D+T)>>>v|S.i(D+T+1)<<32-v:S.i(D+T);return new o(k,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,to=o}).apply(typeof SE<"u"?SE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oA,aA,ql,lA,Dh,yg,uA,cA,hA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var V=u[w];if(!(V in m))break e;m=m[V]}u=u[u.length-1],w=m[u],f=f(w),f!=w&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,w=!1,V={next:function(){if(!w&&m<u.length){var $=m++;return{value:f($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),u.apply(f,V)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function _(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(w,V,$){for(var te=Array(arguments.length-2),it=2;it<arguments.length;it++)te[it-2]=arguments[it];return f.prototype[V].apply(w,te)}}function E(u){const f=u.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=u[w];return m}return[]}function b(u,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const V=u.length||0,$=w.length||0;u.length=V+$;for(let te=0;te<$;te++)u[V+te]=w[te]}else u.push(w)}}class R{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function g(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function P(u,f,m){for(const w in u)f.call(m,u[w],w,u)}function S(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(m in w)u[m]=w[m];for(let $=0;$<T.length;$++)m=T[$],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function k(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function D(u){a.setTimeout(()=>{throw u},0)}function C(){var u=de;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,m){const w=Nt.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var Nt=new R(()=>new St,u=>u.reset());class St{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,J=!1,de=new Ae,Z=()=>{const u=a.Promise.resolve(void 0);Le=()=>{u.then(le)}};var le=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){D(m)}var f=Nt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}J=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function ce(u,f){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(z){e:{try{M(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ce.aa.h.call(this)}}y(ce,H);var ie={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function ge(u,f,m,w,V){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=V,this.key=++Ne,this.da=this.fa=!1}function Ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ot(u){this.src=u,this.g={},this.h=0}ot.prototype.add=function(u,f,m,w,V){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var te=Be(u,f,w,V);return-1<te?(f=u[te],m||(f.fa=!1)):(f=new ge(f,this.src,$,!!w,V),f.fa=m,u.push(f)),f};function Se(u,f){var m=f.type;if(m in u.g){var w=u.g[m],V=Array.prototype.indexOf.call(w,f,void 0),$;($=0<=V)&&Array.prototype.splice.call(w,V,1),$&&(Ye(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Be(u,f,m,w){for(var V=0;V<u.length;++V){var $=u[V];if(!$.da&&$.listener==f&&$.capture==!!m&&$.ha==w)return V}return-1}var Yt="closure_lm_"+(1e6*Math.random()|0),Yn={};function Rt(u,f,m,w,V){if(Array.isArray(f)){for(var $=0;$<f.length;$++)Rt(u,f[$],m,w,V);return null}return m=hr(m),u&&u[Te]?u.K(f,m,c(w)?!!w.capture:!!w,V):sn(u,f,m,!1,w,V)}function sn(u,f,m,w,V,$){if(!f)throw Error("Invalid event type");var te=c(V)?!!V.capture:!!V,it=Ls(u);if(it||(u[Yt]=it=new ot(u)),m=it.add(f,m,w,te,$),m.proxy)return m;if(w=Vo(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)Q||(V=te),V===void 0&&(V=!1),u.addEventListener(f.toString(),w,V);else if(u.attachEvent)u.attachEvent(Ds(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vo(){function u(m){return f.call(u.src,u.listener,m)}const f=Fo;return u}function xs(u,f,m,w,V){if(Array.isArray(f))for(var $=0;$<f.length;$++)xs(u,f[$],m,w,V);else w=c(w)?!!w.capture:!!w,m=hr(m),u&&u[Te]?(u=u.i,f=String(f).toString(),f in u.g&&($=u.g[f],m=Be($,m,w,V),-1<m&&(Ye($[m]),Array.prototype.splice.call($,m,1),$.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ls(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Be(f,m,w,V)),(m=-1<u?f[u]:null)&&ai(m))}function ai(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Te])Se(f.i,u);else{var m=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(m,w,u.capture):f.detachEvent?f.detachEvent(Ds(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=Ls(f))?(Se(m,u),m.h==0&&(m.src=null,f[Yt]=null)):Ye(u)}}}function Ds(u){return u in Yn?Yn[u]:Yn[u]="on"+u}function Fo(u,f){if(u.da)u=!0;else{f=new ce(f,this);var m=u.listener,w=u.ha||u.src;u.fa&&ai(u),u=m.call(w,f)}return u}function Ls(u){return u=u[Yt],u instanceof ot?u:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hr(u){return typeof u=="function"?u:(u[Xn]||(u[Xn]=function(f){return u.handleEvent(f)}),u[Xn])}function Ot(){O.call(this),this.i=new ot(this),this.M=this,this.F=null}y(Ot,O),Ot.prototype[Te]=!0,Ot.prototype.removeEventListener=function(u,f,m,w){xs(this,u,f,m,w)};function Mt(u,f){var m,w=u.F;if(w)for(m=[];w;w=w.F)m.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new H(f,u);else if(f instanceof H)f.target=f.target||u;else{var V=f;f=new H(w,u),A(f,V)}if(V=!0,m)for(var $=m.length-1;0<=$;$--){var te=f.g=m[$];V=Nn(te,w,!0,f)&&V}if(te=f.g=u,V=Nn(te,w,!0,f)&&V,V=Nn(te,w,!1,f)&&V,m)for($=0;$<m.length;$++)te=f.g=m[$],V=Nn(te,w,!1,f)&&V}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],w=0;w<m.length;w++)Ye(m[w]);delete u.g[f],u.h--}}this.F=null},Ot.prototype.K=function(u,f,m,w){return this.i.add(String(u),f,!1,m,w)},Ot.prototype.L=function(u,f,m,w){return this.i.add(String(u),f,!0,m,w)};function Nn(u,f,m,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,$=0;$<f.length;++$){var te=f[$];if(te&&!te.da&&te.capture==m){var it=te.listener,on=te.ha||te.src;te.fa&&Se(u.i,te),V=it.call(on,w)!==!1&&V}}return V&&!w.defaultPrevented}function Mn(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Os(u){u.g=Mn(()=>{u.g=null,u.i&&(u.i=!1,Os(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Oi extends O{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){O.call(this),this.h=u,this.g={}}y($r,O);var Jn=[];function Ms(u){P(u.g,function(f,m){this.g.hasOwnProperty(m)&&ai(f)},u),u.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Ms(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var F=a.JSON.stringify,L=a.JSON.parse,q=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ne(){}ne.prototype.h=null;function ee(u){return u.h||(u.h=u.i())}function oe(){}var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pe(){H.call(this,"d")}y(pe,H);function _e(){H.call(this,"c")}y(_e,H);var Re={},Je=null;function Vt(){return Je=Je||new Ot}Re.La="serverreachability";function vt(u){H.call(this,Re.La,u)}y(vt,H);function bt(u){const f=Vt();Mt(f,new vt(f))}Re.STAT_EVENT="statevent";function Ht(u,f){H.call(this,Re.STAT_EVENT,u),this.stat=f}y(Ht,H);function wt(u){const f=Vt();Mt(f,new Ht(f,u))}Re.Ma="timingevent";function li(u,f){H.call(this,Re.Ma,u),this.size=f}y(li,H);function N(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function x(){this.g=!0}x.prototype.xa=function(){this.g=!1};function j(u,f,m,w,V,$){u.info(function(){if(u.g)if($)for(var te="",it=$.split("&"),on=0;on<it.length;on++){var Qe=it[on].split("=");if(1<Qe.length){var gn=Qe[0];Qe=Qe[1];var _n=gn.split("_");te=2<=_n.length&&_n[1]=="type"?te+(gn+"="+Qe+"&"):te+(gn+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+f+`
`+m+`
`+te})}function W(u,f,m,w,V,$,te){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+f+`
`+m+`
`+$+" "+te})}function re(u,f,m,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ee(u,m)+(w?" "+w:"")})}function he(u,f){u.info(function(){return"TIMEOUT: "+f})}x.prototype.info=function(){};function Ee(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var w=m[u];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<V.length;te++)V[te]=""}}}}return F(m)}catch{return f}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ke={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ye;function me(){}y(me,ne),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},ye=new me;function Ve(u,f,m,w){this.j=u,this.i=f,this.l=m,this.R=w||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Ze={},We={};function Ft(u,f,m){u.L=1,u.v=xc(ci(f)),u.m=m,u.P=!0,It(u,null)}function It(u,f){u.F=Date.now(),Sr(u),u.A=ci(u.v);var m=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Uv(m.i,"t",w),u.C=0,m=u.j.J,u.h=new ze,u.g=r0(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Oi(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,w=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Jn[0]=V.toString()),V=Jn);for(var $=0;$<V.length;$++){var te=Rt(m,V[$],w||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),bt(),j(u.i,u.u,u.A,u.l,u.R,u.m)}Ve.prototype.ca=function(u){u=u.target;const f=this.M;f&&hi(u)==3?f.j():this.Y(u)},Ve.prototype.Y=function(u){try{if(u==this.g)e:{const _n=hi(this.g);var f=this.g.Ba();const Bo=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||qv(this.g)))){this.J||_n!=4||f==7||(f==8||0>=Bo?bt(3):bt(2)),zr(this);var m=this.g.Z();this.X=m;t:if(Mi(this)){var w=qv(this.g);u="";var V=w.length,$=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),pn(this);var te="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!($&&f==V-1)});w.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=m==200,W(this.i,this.u,this.A,this.l,this.R,_n,m),this.o){if(this.T&&!this.K){t:{if(this.g){var it,on=this.g;if((it=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(it)){var Qe=it;break t}}Qe=null}if(m=Qe)re(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vi(this,m);else{this.o=!1,this.s=3,wt(12),dr(this),pn(this);break e}}if(this.P){m=!0;let Rr;for(;!this.J&&this.C<te.length;)if(Rr=Br(this,te),Rr==We){_n==4&&(this.s=4,wt(14),m=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Ze){this.s=4,wt(15),re(this.i,this.l,te,"[Invalid Chunk]"),m=!1;break}else re(this.i,this.l,Rr,null),Vi(this,Rr);if(Mi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||te.length!=0||this.h.h||(this.s=1,wt(16),m=!1),this.o=this.o&&m,!m)re(this.i,this.l,te,"[Invalid Chunked Response]"),dr(this),pn(this);else if(0<te.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),sp(gn),gn.M=!0,wt(11))}}else re(this.i,this.l,te,null),Vi(this,te);_n==4&&dr(this),this.o&&!this.J&&(_n==4?Zv(this.j,this):(this.o=!1,Sr(this)))}else TN(this.g),m==400&&0<te.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),dr(this),pn(this)}}}catch{}finally{}};function Mi(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Br(u,f){var m=u.C,w=f.indexOf(`
`,m);return w==-1?We:(m=Number(f.substring(m,w)),isNaN(m)?Ze:(w+=1,w+m>f.length?We:(f=f.slice(w,w+m),u.C=w+m,f)))}Ve.prototype.cancel=function(){this.J=!0,dr(this)};function Sr(u){u.S=Date.now()+u.I,ui(u,u.I)}function ui(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=N(p(u.ba,u),f)}function zr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ve.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(he(this.i,this.A),this.L!=2&&(bt(),wt(17)),dr(this),this.s=2,pn(this)):ui(this,this.S-u)};function pn(u){u.j.G==0||u.J||Zv(u.j,u)}function dr(u){zr(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Ms(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Vi(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||et(m.h,u))){if(!u.K&&et(m.h,u)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Vc(m),Oc(m);else break e;ip(m),wt(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=N(p(m.Za,m),6e3));if(1>=mn(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Fs(m,11)}else if((u.K||m.g==u)&&Vc(m),!g(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let Qe=V[f];if(m.T=Qe[0],Qe=Qe[1],m.G==2)if(Qe[0]=="c"){m.K=Qe[1],m.ia=Qe[2];const gn=Qe[3];gn!=null&&(m.la=gn,m.j.info("VER="+m.la));const _n=Qe[4];_n!=null&&(m.Aa=_n,m.j.info("SVER="+m.Aa));const Bo=Qe[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(w=1.5*Bo,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Rr=u.g;if(Rr){const Uc=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var $=w.h;$.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Zn($,$.h),$.h=null))}if(w.D){const op=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;op&&(w.ya=op,dt(w.I,w.D,op))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var te=u;if(w.qa=n0(w,w.J?w.ia:null,w.W),te.K){ul(w.h,te);var it=te,on=w.L;on&&(it.I=on),it.B&&(zr(it),Sr(it)),w.g=te}else Xv(w);0<m.i.length&&Mc(m)}else Qe[0]!="stop"&&Qe[0]!="close"||Fs(m,7);else m.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Fs(m,7):rp(m):Qe[0]!="noop"&&m.l&&m.l.ta(Qe),m.v=0)}}bt(4)}catch{}}var Uo=class{constructor(u,f){this.g=u,this.map=f}};function xe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ht(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function mn(u){return u.h?1:u.g?u.g.size:0}function et(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Zn(u,f){u.g?u.g.add(f):u.h=f}function ul(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}xe.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Pc(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return E(u.i)}function aN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,w=0;w<m;w++)f.push(u[w]);return f}f=[],m=0;for(w in u)f[m++]=u[w];return f}function lN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const w in u)f[m++]=w;return f}}}function Dv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=lN(u),w=aN(u),V=w.length,$=0;$<V;$++)f.call(void 0,w[$],m&&m[$],u)}var Lv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uN(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var w=u[m].indexOf("="),V=null;if(0<=w){var $=u[m].substring(0,w);V=u[m].substring(w+1)}else $=u[m];f($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Vs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vs){this.h=u.h,Nc(this,u.j),this.o=u.o,this.g=u.g,bc(this,u.s),this.l=u.l;var f=u.i,m=new dl;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Ov(this,m),this.m=u.m}else u&&(f=String(u).match(Lv))?(this.h=!1,Nc(this,f[1]||"",!0),this.o=cl(f[2]||""),this.g=cl(f[3]||"",!0),bc(this,f[4]),this.l=cl(f[5]||"",!0),Ov(this,f[6]||"",!0),this.m=cl(f[7]||"")):(this.h=!1,this.i=new dl(null,this.h))}Vs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(hl(f,Mv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(hl(f,Mv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(hl(m,m.charAt(0)=="/"?dN:hN,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",hl(m,pN)),u.join("")};function ci(u){return new Vs(u)}function Nc(u,f,m){u.j=m?cl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ov(u,f,m){f instanceof dl?(u.i=f,mN(u.i,u.h)):(m||(f=hl(f,fN)),u.i=new dl(f,u.h))}function dt(u,f,m){u.i.set(f,m)}function xc(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function cl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,cN),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function cN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mv=/[#\/\?@]/g,hN=/[#\?:]/g,dN=/[#\?]/g,fN=/[#\?@]/g,pN=/#/g;function dl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&uN(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=dl.prototype,t.add=function(u,f){Fi(this),this.i=null,u=jo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Vv(u,f){Fi(u),f=jo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Fv(u,f){return Fi(u),f=jo(u,f),u.g.has(f)}t.forEach=function(u,f){Fi(this),this.g.forEach(function(m,w){m.forEach(function(V){u.call(f,V,w,this)},this)},this)},t.na=function(){Fi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const V=u[w];for(let $=0;$<V.length;$++)m.push(f[w])}return m},t.V=function(u){Fi(this);let f=[];if(typeof u=="string")Fv(this,u)&&(f=f.concat(this.g.get(jo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Fi(this),this.i=null,u=jo(this,u),Fv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Uv(u,f,m){Vv(u,f),0<m.length&&(u.i=null,u.g.set(jo(u,f),E(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const $=encodeURIComponent(String(w)),te=this.V(w);for(w=0;w<te.length;w++){var V=$;te[w]!==""&&(V+="="+encodeURIComponent(String(te[w]))),u.push(V)}}return this.i=u.join("&")};function jo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function mN(u,f){f&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(m,w){var V=w.toLowerCase();w!=V&&(Vv(this,w),Uv(this,V,m))},u)),u.j=f}function gN(u,f){const m=new x;if(a.Image){const w=new Image;w.onload=_(Ui,m,"TestLoadImage: loaded",!0,f,w),w.onerror=_(Ui,m,"TestLoadImage: error",!1,f,w),w.onabort=_(Ui,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=_(Ui,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function _N(u,f){const m=new x,w=new AbortController,V=setTimeout(()=>{w.abort(),Ui(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(V),$.ok?Ui(m,"TestPingServer: ok",!0,f):Ui(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Ui(m,"TestPingServer: error",!1,f)})}function Ui(u,f,m,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(m)}catch{}}function yN(){this.g=new q}function vN(u,f,m){const w=m||"";try{Dv(u,function(V,$){let te=V;c(V)&&(te=F(V)),f.push(w+$+"="+encodeURIComponent(te))})}catch(V){throw f.push(w+"type="+encodeURIComponent("_badmap")),V}}function fl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(fl,ne),fl.prototype.g=function(){return new Dc(this.l,this.j)},fl.prototype.i=function(u){return function(){return u}}({});function Dc(u,f){Ot.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Dc,Ot),t=Dc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ml(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?pl(this):ml(this),this.readyState==3&&jv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,pl(this))},t.Qa=function(u){this.g&&(this.response=u,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ml(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ml(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $v(u){let f="";return P(u,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function np(u,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=$v(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):dt(u,f,m))}function xt(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(xt,Ot);var wN=/^https?$/i,EN=["POST","PUT"];t=xt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ye.g(),this.v=this.o?ee(this.o):ee(ye),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){Bv(this,$);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)m.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())m.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EN,f,void 0))||w||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of m)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hv(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Bv(this,$)}};function Bv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,zv(u),Lc(u)}function zv(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Mt(this,"complete"),Mt(this,"abort"),Lc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lc(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wv(this):this.bb())},t.bb=function(){Wv(this)};function Wv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||hi(u)!=4||u.Z()!=2)){if(u.u&&hi(u)==4)Mn(u.Ea,0,u);else if(Mt(u,"readystatechange"),hi(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=te===0){var V=String(u.D).match(Lv)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),w=!wN.test(V?V.toLowerCase():"")}m=w}if(m)Mt(u,"complete"),Mt(u,"success");else{u.m=6;try{var $=2<hi(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",zv(u)}}finally{Lc(u)}}}}function Lc(u,f){if(u.g){Hv(u);const m=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Mt(u,"ready");try{m.onreadystatechange=w}catch{}}}function Hv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),L(f)}};function qv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TN(u){const f={};u=(u.g&&2<=hi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(g(u[w]))continue;var m=k(u[w]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const $=f[V]||[];f[V]=$,$.push(m)}S(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Kv(u){this.Aa=0,this.i=[],this.j=new x,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gl("baseRetryDelayMs",5e3,u),this.cb=gl("retryDelaySeedMs",1e4,u),this.Wa=gl("forwardChannelMaxRetries",2,u),this.wa=gl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xe(u&&u.concurrentRequestLimit),this.Da=new yN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Kv.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,w){wt(0),this.W=u,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=n0(this,null,this.W),Mc(this)};function rp(u){if(Gv(u),u.G==3){var f=u.U++,m=ci(u.I);if(dt(m,"SID",u.K),dt(m,"RID",f),dt(m,"TYPE","terminate"),_l(u,m),f=new Ve(u,u.j,f),f.L=2,f.v=xc(ci(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=r0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Sr(f)}t0(u)}function Oc(u){u.g&&(sp(u),u.g.cancel(),u.g=null)}function Gv(u){Oc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!ht(u.h)&&!u.s){u.s=!0;var f=u.Ga;Le||Z(),J||(Le(),J=!0),de.add(f,u),u.B=0}}function SN(u,f){return mn(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=N(p(u.Ga,u,f),e0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Ve(this,this.j,u);let $=this.o;if(this.S&&($?($=v($),A($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Yv(this,V,f),m=ci(this.I),dt(m,"RID",u),dt(m,"CVER",22),this.D&&dt(m,"X-HTTP-Session-Id",this.D),_l(this,m),$&&(this.O?f="headers="+encodeURIComponent(String($v($)))+"&"+f:this.m&&np(m,this.m,$)),Zn(this.h,V),this.Ua&&dt(m,"TYPE","init"),this.P?(dt(m,"$req",f),dt(m,"SID","null"),V.T=!0,Ft(V,m,null)):Ft(V,m,f),this.G=2}}else this.G==3&&(u?Qv(this,u):this.i.length==0||ht(this.h)||Qv(this))};function Qv(u,f){var m;f?m=f.l:m=u.U++;const w=ci(u.I);dt(w,"SID",u.K),dt(w,"RID",m),dt(w,"AID",u.T),_l(u,w),u.m&&u.o&&np(w,u.m,u.o),m=new Ve(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Yv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zn(u.h,m),Ft(m,w,f)}function _l(u,f){u.H&&P(u.H,function(m,w){dt(f,w,m)}),u.l&&Dv({},function(m,w){dt(f,w,m)})}function Yv(u,f,m){m=Math.min(u.i.length,m);var w=u.l?p(u.l.Na,u.l,u):null;e:{var V=u.i;let $=-1;for(;;){const te=["count="+m];$==-1?0<m?($=V[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let it=!0;for(let on=0;on<m;on++){let Qe=V[on].g;const gn=V[on].map;if(Qe-=$,0>Qe)$=Math.max(0,V[on].g-100),it=!1;else try{vN(gn,te,"req"+Qe+"_")}catch{w&&w(gn)}}if(it){w=te.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,w}function Xv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Le||Z(),J||(Le(),J=!0),de.add(f,u),u.v=0}}function ip(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=N(p(u.Fa,u),e0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Jv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=N(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Oc(this),Jv(this))};function sp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Jv(u){u.g=new Ve(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ci(u.qa);dt(f,"RID","rpc"),dt(f,"SID",u.K),dt(f,"AID",u.T),dt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(f,"TO",u.ja),dt(f,"TYPE","xmlhttp"),_l(u,f),u.m&&u.o&&np(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=xc(ci(f)),m.m=null,m.P=!0,It(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Oc(this),ip(this),wt(19))};function Vc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Zv(u,f){var m=null;if(u.g==f){Vc(u),sp(u),u.g=null;var w=2}else if(et(u.h,f))m=f.D,ul(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=u.B;w=Vt(),Mt(w,new li(w,m)),Mc(u)}else Xv(u);else if(V=f.s,V==3||V==0&&0<f.X||!(w==1&&SN(u,f)||w==2&&ip(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),V){case 1:Fs(u,5);break;case 4:Fs(u,10);break;case 3:Fs(u,6);break;default:Fs(u,2)}}}function e0(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Fs(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),w=u.Xa;const V=!w;w=new Vs(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nc(w,"https"),xc(w),V?gN(w.toString(),m):_N(w.toString(),m)}else wt(2);u.G=0,u.l&&u.l.sa(f),t0(u),Gv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function t0(u){if(u.G=0,u.ka=[],u.l){const f=Pc(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function n0(u,f,m){var w=m instanceof Vs?ci(m):new Vs(m);if(w.g!="")f&&(w.g=f+"."+w.g),bc(w,w.s);else{var V=a.location;w=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var $=new Vs(null);w&&Nc($,w),f&&($.g=f),V&&bc($,V),m&&($.l=m),w=$}return m=u.D,f=u.ya,m&&f&&dt(w,m,f),dt(w,"VER",u.la),_l(u,w),w}function r0(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new xt(new fl({eb:m})):new xt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function i0(){}t=i0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fc(){}Fc.prototype.g=function(u,f){return new er(u,f)};function er(u,f){Ot.call(this),this.g=new Kv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!g(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!g(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new $o(this)}y(er,Ot),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){rp(this.g)},er.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=F(u),u=m);f.i.push(new Uo(f.Ya++,u)),f.G==3&&Mc(f)},er.prototype.N=function(){this.g.l=null,delete this.j,rp(this.g),delete this.g,er.aa.N.call(this)};function s0(u){pe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(s0,pe);function o0(){_e.call(this),this.status=1}y(o0,_e);function $o(u){this.g=u}y($o,i0),$o.prototype.ua=function(){Mt(this.g,"a")},$o.prototype.ta=function(u){Mt(this.g,new s0(u))},$o.prototype.sa=function(u){Mt(this.g,new o0)},$o.prototype.ra=function(){Mt(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,hA=function(){return new Fc},cA=function(){return Vt()},uA=Re,yg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,Dh=X,ke.COMPLETE="complete",lA=ke,oe.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,ql=oe,aA=fl,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,oA=xt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const RE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new sc("@firebase/firestore");function Pl(){return po.logLevel}function ue(t,...e){if(po.logLevel<=Ue.DEBUG){const n=e.map(vy);po.debug(`Firestore (${tl}): ${t}`,...n)}}function Ni(t,...e){if(po.logLevel<=Ue.ERROR){const n=e.map(vy);po.error(`Firestore (${tl}): ${t}`,...n)}}function La(t,...e){if(po.logLevel<=Ue.WARN){const n=e.map(vy);po.warn(`Firestore (${tl}): ${t}`,...n)}}function vy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+t;throw Ni(e),new Error(e)}function ct(t,e){t||Ce()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class WF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HF{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new dA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new En(e)}}class qF{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new GF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=YF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Qt(0,0))}static max(){return new Pe(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(),r===void 0?r=e.length-n:r>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Lt extends zu{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const XF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends zu{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return XF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Lt.fromString(e))}static fromName(e){return new we(Lt.fromString(e).popFirst(5))}static empty(){return new we(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Lt(e.slice()))}}function JF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Qt(n+1,0):new Qt(n,r));return new gs(i,we.empty(),e)}function ZF(t){return new gs(t.readTime,t.key,-1)}class gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gs(Pe.min(),we.empty(),-1)}static max(){return new gs(Pe.max(),we.empty(),-1)}}function eU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==tU)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function rU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wy.oe=-1;function mf(t){return t==null}function Ed(t){return t===0&&1/t==-1/0}function iU(t){return typeof t=="number"&&Number.isInteger(t)&&!Ed(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class vg{constructor(e,n){this.comparator=e,this.root=n||ds.EMPTY}insert(e,n){return new vg(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new vg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}},sh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ds=class di{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=s??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new di(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}};ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1;ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ds(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CE(this.data.getIterator())}getIteratorFrom(e){return new CE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class CE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new ir([])}unionWith(e){let n=new hn(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mA("Invalid base64 string: "+s):s}}(e);return new Pn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const sU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(ct(!!t),typeof t=="string"){let e=0;const n=sU.exec(t);if(ct(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mo(t){return typeof t=="string"?Pn.fromBase64String(t):Pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ty(t){const e=t.mapValue.fields.__previous_value__;return Ey(e)?Ty(e):e}function Wu(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Hu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ey(t)?4:aU(t)?9007199254740991:10:Ce()}function ri(t,e){if(t===e)return!0;const n=go(t);if(n!==go(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_s(i.timestampValue),a=_s(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return mo(i.bytesValue).isEqual(mo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Bt(i.geoPointValue.latitude)===Bt(s.geoPointValue.latitude)&&Bt(i.geoPointValue.longitude)===Bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Bt(i.integerValue)===Bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Bt(i.doubleValue),a=Bt(s.doubleValue);return o===a?Ed(o)===Ed(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IE(o)!==IE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ri(o[l],a[l])))return!1;return!0}(t,e);default:return Ce()}}function qu(t,e){return(t.values||[]).find(n=>ri(n,e))!==void 0}function Ma(t,e){if(t===e)return 0;const n=go(t),r=go(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Bt(s.integerValue||s.doubleValue),l=Bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return AE(t.timestampValue,e.timestampValue);case 4:return AE(Wu(t),Wu(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=mo(s),l=mo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Xe(a[c],l[c]);if(h!==0)return h}return Xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Xe(Bt(s.latitude),Bt(o.latitude));return a!==0?a:Xe(Bt(s.longitude),Bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Ma(a[c],l[c]);if(h)return h}return Xe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===oh.mapValue&&o===oh.mapValue)return 0;if(s===oh.mapValue)return 1;if(o===oh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Xe(l[d],h[d]);if(p!==0)return p;const _=Ma(a[l[d]],c[h[d]]);if(_!==0)return _}return Xe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function AE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=_s(t),r=_s(e),i=Xe(n.seconds,r.seconds);return i!==0?i:Xe(n.nanos,r.nanos)}function Va(t){return wg(t)}function wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=wg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${wg(n.fields[o])}`;return i+"}"}(t.mapValue):Ce()}function Eg(t){return!!t&&"integerValue"in t}function Sy(t){return!!t&&"arrayValue"in t}function kE(t){return!!t&&"nullValue"in t}function PE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=lu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){No(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Fn(lu(this.value))}}function gA(t){const e=[];return No(t.fields,(n,r)=>{const i=new un([n]);if(Lh(r)){const s=gA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Sn(e,0,Pe.min(),Pe.min(),Pe.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,i){return new Sn(e,1,n,Pe.min(),r,i,0)}static newNoDocument(e,n){return new Sn(e,2,n,Pe.min(),Pe.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,Pe.min(),Pe.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function NE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),n.key):r=Ma(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function lU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{}class Kt extends _A{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cU(e,n,r):n==="array-contains"?new fU(e,r):n==="in"?new pU(e,r):n==="not-in"?new mU(e,r):n==="array-contains-any"?new gU(e,r):new Kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hU(e,r):new dU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ma(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends _A{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ii(e,n)}matches(e){return yA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yA(t){return t.op==="and"}function vA(t){return uU(t)&&yA(t)}function uU(t){for(const e of t.filters)if(e instanceof ii)return!1;return!0}function Tg(t){if(t instanceof Kt)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(vA(t))return t.filters.map(e=>Tg(e)).join(",");{const e=t.filters.map(n=>Tg(n)).join(",");return`${t.op}(${e})`}}function wA(t,e){return t instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(t,e):t instanceof ii?function(r,i){return i instanceof ii&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wA(o,i.filters[a]),!0):!1}(t,e):void Ce()}function EA(t){return t instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof ii?function(n){return n.op.toString()+" {"+n.getFilters().map(EA).join(" ,")+"}"}(t):"Filter"}class cU extends Kt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class hU extends Kt{constructor(e,n){super(e,"in",n),this.keys=TA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dU extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=TA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class fU extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sy(n)&&qu(n.arrayValue,this.value)}}class pU extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class mU extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qu(this.value.arrayValue,n)}}class gU extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function xE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new _U(t,e,n,r,i,s,o)}function Ry(t){const e=be(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Va(r)).join(",")),e.ue=n}return e.ue}function Iy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bE(t.startAt,e.startAt)&&bE(t.endAt,e.endAt)}function Sg(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yU(t,e,n,r,i,s,o,a){return new gf(t,e,n,r,i,s,o,a)}function Cy(t){return new gf(t)}function DE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vU(t){return t.collectionGroup!==null}function uu(t){const e=be(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new hn(un.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sd(s,r))}),n.has(un.keyField().canonicalString())||e.ce.push(new Sd(un.keyField(),r))}return e.ce}function ei(t){const e=be(t);return e.le||(e.le=wU(e,uu(t))),e.le}function wU(t,e){if(t.limitType==="F")return xE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sd(i.field,s)});const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return xE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rg(t,e,n){return new gf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _f(t,e){return Iy(ei(t),ei(e))&&t.limitType===e.limitType}function SA(t){return`${Ry(ei(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EA(i)).join(", ")}]`),mf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Va(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function yf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of uu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=NE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,uu(r),i)||r.endAt&&!function(o,a,l){const c=NE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,uu(r),i))}(t,e)}function EU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RA(t){return(e,n)=>{let r=!1;for(const i of uu(t)){const s=TU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function TU(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ma(l,c):Ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new Wt(we.comparator);function bi(){return SU}const IA=new Wt(we.comparator);function Kl(...t){let e=IA;for(const n of t)e=e.insert(n.key,n);return e}function CA(t){let e=IA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return cu()}function AA(){return cu()}function cu(){return new nl(t=>t.toString(),(t,e)=>t.isEqual(e))}const RU=new Wt(we.comparator),IU=new hn(we.comparator);function je(...t){let e=IU;for(const n of t)e=e.add(n);return e}const CU=new hn(Xe);function AU(){return CU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function PA(t){return{integerValue:""+t}}function kU(t,e){return iU(e)?PA(e):kA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function PU(t,e,n){return t instanceof Rd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ey(s)&&(s=Ty(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ku?bA(t,e):t instanceof Gu?xA(t,e):function(i,s){const o=NA(i,s),a=LE(o)+LE(i.Pe);return Eg(o)&&Eg(i.Pe)?PA(a):kA(i.serializer,a)}(t,e)}function NU(t,e,n){return t instanceof Ku?bA(t,e):t instanceof Gu?xA(t,e):n}function NA(t,e){return t instanceof Id?function(r){return Eg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Rd extends vf{}class Ku extends vf{constructor(e){super(),this.elements=e}}function bA(t,e){const n=DA(e);for(const r of t.elements)n.some(i=>ri(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gu extends vf{constructor(e){super(),this.elements=e}}function xA(t,e){let n=DA(e);for(const r of t.elements)n=n.filter(i=>!ri(i,r));return{arrayValue:{values:n}}}class Id extends vf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function LE(t){return Bt(t.integerValue||t.doubleValue)}function DA(t){return Sy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function bU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ku&&i instanceof Ku||r instanceof Gu&&i instanceof Gu?Oa(r.elements,i.elements,ri):r instanceof Id&&i instanceof Id?ri(r.Pe,i.Pe):r instanceof Rd&&i instanceof Rd}(t.transform,e.transform)}class xU{constructor(e,n){this.version=e,this.transformResults=n}}class ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wf{}function LA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new MA(t.key,ti.none()):new fc(t.key,t.data,ti.none());{const n=t.data,r=Fn.empty();let i=new hn(un.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ps(t.key,r,new ir(i.toArray()),ti.none())}}function DU(t,e,n){t instanceof fc?function(i,s,o){const a=i.value.clone(),l=ME(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(i,s,o){if(!Oh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ME(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof fc?function(s,o,a,l){if(!Oh(s.precondition,o))return a;const c=s.value.clone(),h=VE(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ps?function(s,o,a,l){if(!Oh(s.precondition,o))return a;const c=VE(s.fieldTransforms,l,o),h=o.data;return h.setAll(OA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Oh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function LU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=NA(r.transform,i||null);s!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,s))}return n||null}function OE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(s,o)=>bU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends wf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ps extends wf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ME(t,e,n){const r=new Map;ct(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,NU(o,a,n[i]))}return r}function VE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,PU(s,o,e))}return r}class MA extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OU extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&DU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=LA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>OE(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>OE(n,r))}}class Ay{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ct(e.mutations.length===r.length);let i=function(){return RU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ay(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,He;function UU(t){switch(t){default:return Ce();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function VA(t){if(t===void 0)return Ni("GRPC error has no .code"),G.UNKNOWN;switch(t){case jt.OK:return G.OK;case jt.CANCELLED:return G.CANCELLED;case jt.UNKNOWN:return G.UNKNOWN;case jt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case jt.INTERNAL:return G.INTERNAL;case jt.UNAVAILABLE:return G.UNAVAILABLE;case jt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case jt.NOT_FOUND:return G.NOT_FOUND;case jt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case jt.ABORTED:return G.ABORTED;case jt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case jt.DATA_LOSS:return G.DATA_LOSS;default:return Ce()}}(He=jt||(jt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new to([4294967295,4294967295],0);function FE(t){const e=jU().encode(t),n=new sA;return n.update(e),new Uint8Array(n.digest())}function UE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new to([n,r],0),new to([i,s],0)]}class ky{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(r<0)throw new Gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=to.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(to.fromNumber(r)));return i.compare($U)===1&&(i=new to([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=FE(e),[r,i]=UE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ky(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=FE(e),[r,i]=UE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ef(Pe.min(),i,new Wt(Xe),bi(),je())}}class pc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pc(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FA{constructor(e,n){this.targetId=e,this.me=n}}class UA{constructor(e,n,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jE{constructor(){this.fe=0,this.ge=BE(),this.pe=Pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=je(),n=je(),r=je();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce()}}),new pc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=BE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BU{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=$E(),this.Qe=new Wt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Sg(s))if(r===0){const o=new we(s.path);this.Ue(n,o,Sn.newNoDocument(o,Pe.min()))}else ct(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=mo(r).toUint8Array()}catch(l){if(l instanceof mA)return La("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ky(o,i,s)}catch(l){return La(l instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Sg(a.target)){const l=new we(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Sn.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=je();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ef(e,n,this.Qe,this.ke,r);return this.ke=bi(),this.qe=$E(),this.Qe=new Wt(Xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new hn(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $E(){return new Wt(we.comparator)}function BE(){return new Wt(we.comparator)}const zU={asc:"ASCENDING",desc:"DESCENDING"},WU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HU={and:"AND",or:"OR"};class qU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ig(t,e){return t.useProto3Json||mf(e)?e:{value:e}}function Cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KU(t,e){return Cd(t,e.toTimestamp())}function ni(t){return ct(!!t),Pe.fromTimestamp(function(n){const r=_s(n);return new Qt(r.seconds,r.nanos)}(t))}function Py(t,e){return Cg(t,e).canonicalString()}function Cg(t,e){const n=function(i){return new Lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $A(t){const e=Lt.fromString(t);return ct(qA(e)),e}function Ag(t,e){return Py(t.databaseId,e.path)}function qp(t,e){const n=$A(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(zA(n))}function BA(t,e){return Py(t.databaseId,e)}function GU(t){const e=$A(t);return e.length===4?Lt.emptyPath():zA(e)}function kg(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zA(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zE(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function QU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ct(h===void 0||typeof h=="string"),Pn.fromBase64String(h||"")):(ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Pn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?G.UNKNOWN:VA(c.code);return new ve(h,c.message||"")}(o);n=new UA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qp(t,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):Pe.min(),a=new Fn({mapValue:{fields:r.document.fields}}),l=Sn.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Mh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qp(t,r.document),s=r.readTime?ni(r.readTime):Pe.min(),o=Sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Mh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qp(t,r.document),s=r.removedTargetIds||[];n=new Mh([],s,i,null)}else{if(!("filter"in e))return Ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new FU(i,s),a=r.targetId;n=new FA(a,o)}}return n}function YU(t,e){let n;if(e instanceof fc)n={update:zE(t,e.key,e.value)};else if(e instanceof MA)n={delete:Ag(t,e.key)};else if(e instanceof Ps)n={update:zE(t,e.key,e.data),updateMask:s4(e.fieldMask)};else{if(!(e instanceof OU))return Ce();n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Id)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:KU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ce()}(t,e.precondition)),n}function XU(t,e){return t&&t.length>0?(ct(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(Pe.min())&&(o=ni(s)),new xU(o,i.transformResults||[])}(n,e))):[]}function JU(t,e){return{documents:[BA(t,e.path)]}}function ZU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BA(t,i);const s=function(c){if(c.length!==0)return HA(ii.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Go(p.field),direction:n4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ig(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function e4(t){let e=GU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ct(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=WA(d);return p instanceof ii&&vA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Sd(Qo(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,mf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,_=d.values||[];return new Td(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,_=d.values||[];return new Td(_,p)}(n.endAt)),yU(e,i,o,s,a,"F",l,c)}function t4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qo(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qo(n.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qo(n.unaryFilter.field);return Kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qo(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(n){return Kt.create(Qo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ii.create(n.compositeFilter.filters.map(r=>WA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(t):Ce()}function n4(t){return zU[t]}function r4(t){return WU[t]}function i4(t){return HU[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Qo(t){return un.fromServerFormat(t.fieldPath)}function HA(t){return t instanceof Kt?function(n){if(n.op==="=="){if(PE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(kE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(kE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:r4(n.op),value:n.value}}}(t):t instanceof ii?function(n){const r=n.getFilters().map(i=>HA(i));return r.length===1?r[0]:{compositeFilter:{op:i4(n.op),filters:r}}}(t):Ce()}function s4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,i,s=Pe.min(),o=Pe.min(),a=Pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.ct=e}}function a4(t){const e=e4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this._n=new u4}addToCollectionParentIndex(e,n){return this._n.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(gs.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class u4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hn(Lt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Fa(0)}static Ln(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.changes=new nl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hu(r.mutation,i,ir.empty(),Qt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Kl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=bi();const o=cu(),a=function(){return cu()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ps)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),hu(h.mutation,c,h.mutation.getFieldMask(),Qt.now())):o.set(c.key,ir.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new h4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cu();let i=new Wt((o,a)=>o-a),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||ir.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||je()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=AA();h.forEach(p=>{if(!s.has(p)){const _=LA(n.get(p),r.get(p));_!==null&&d.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Xs());let a=-1,l=s;return o.next(c=>K.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,je())).next(h=>({batchId:a,changes:CA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let i=Kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Kl();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,l=>{const c=function(d,p){return new gf(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Sn.newInvalidDocument(h)))});let a=Kl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&hu(h.mutation,c,ir.empty(),Qt.now()),yf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return K.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:a4(i.bundledQuery),readTime:ni(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.overlays=new Wt(we.comparator),this.hr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Xs(),s=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Xs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Xs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return K.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VU(n,r));let s=this.hr.get(n);s===void 0&&(s=je(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.Pr=new hn(Jt.Ir),this.Tr=new hn(Jt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Jt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new we(new Lt([])),r=new Jt(n,e),i=new Jt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new we(new Lt([])),r=new Jt(n,e),i=new Jt(n,e+1);let s=je();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Jt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return we.comparator(e.key,n.key)||Xe(e.pr,n.pr)}static Er(e,n){return Xe(e.pr,n.pr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new hn(Jt.Ir)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hn(Xe);return n.forEach(i=>{const s=new Jt(i,0),o=new Jt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),K.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new we(s),0);let a=new hn(Xe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),K.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ct(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return K.forEach(n.mutations,i=>{const s=new Jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Jt(n,0),i=this.wr.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.vr=e,this.docs=function(){return new Wt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let r=bi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sn.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=bi();const o=n.path,a=new we(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eU(ZF(h),r)<=0||(i.has(h.key)||yf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ce()}Fr(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _4(this)}getSize(e){return K.resolve(this.size)}}class _4 extends c4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.persistence=e,this.Mr=new nl(n=>Ry(n),Iy),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ny,this.targetCount=0,this.Lr=Fa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),K.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.qn(n),K.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.Br={},this.overlays={},this.kr=new wy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new y4(this),this.indexManager=new l4,this.remoteDocumentCache=function(i){return new g4(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new o4(n),this.$r=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new p4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new m4(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new w4(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return K.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class w4 extends nU{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.zr=new Ny,this.jr=null}static Hr(e){return new by(e)}get Jr(){if(this.jr)return this.jr;throw Ce()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),K.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Jr,r=>{const i=we.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Pe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return K.or([()=>K.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return zL()?8:rU(fn())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new E4;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Pl()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),K.resolve()):(Pl()<=Ue.DEBUG&&ue("QueryEngine","Query:",Ko(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Pl()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):K.resolve())}ji(e,n){if(DE(n))return K.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rg(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=je(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Rg(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return DE(n)||i.isEqual(Pe.min())?K.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?K.resolve(null):(Pl()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ko(n)),this.es(e,o,n,JF(i,-1)).next(a=>a))})}Zi(e,n){let r=new hn(RA(e));return n.forEach((i,s)=>{yf(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Pl()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ko(n)),this.zi.getDocumentsMatchingQuery(e,n,gs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Wt(Xe),this.rs=new nl(s=>Ry(s),Iy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function R4(t,e,n,r){return new S4(t,e,n,r)}async function KA(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=je();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function I4(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let _=K.resolve();return p.forEach(y=>{_=_.next(()=>h.getEntry(l,y)).next(E=>{const b=c.docVersions.get(y);ct(b!==null),E.version.compareTo(b)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GA(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function C4(t,e){const n=be(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(Pn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),function(E,b,R){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(p,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let l=bi(),c=je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(A4(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Pe.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function A4(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=bi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function k4(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P4(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Pg(t,e,n){const r=be(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dc(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function WE(t,e,n){const r=be(t);let i=Pe.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=be(l),p=d.rs.get(h);return p!==void 0?K.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Pe.min(),n?s:je())).next(a=>(N4(r,EU(e),a),{documents:a,hs:s})))}function N4(t,e,n){let r=t.ss.get(e)||Pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class HE{constructor(){this.activeTargetIds=AU()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b4{constructor(){this.no=new HE,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new HE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;function Kp(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class O4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Kp(),l=this.vo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw La("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=D4[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Kp();return new Promise((o,a)=>{const l=new oA;l.setWithCredentials(!0),l.listenOnce(lA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Dh.NO_ERROR:const h=l.getResponseJson();ue(wn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Dh.TIMEOUT:ue(wn,`RPC '${e}' ${s} timed out`),a(new ve(G.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const d=l.getStatus();if(ue(wn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const y=function(b){const R=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(R)>=0?R:G.UNKNOWN}(_.status);a(new ve(y,_.message))}else a(new ve(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(G.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ue(wn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ue(wn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Kp(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hA(),a=cA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new aA({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ue(wn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,_=!1;const y=new L4({lo:b=>{_?ue(wn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||(ue(wn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),ue(wn,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},ho:()=>d.close()}),E=(b,R,g)=>{b.listen(R,I=>{try{g(I)}catch(M){setTimeout(()=>{throw M},0)}})};return E(d,ql.EventType.OPEN,()=>{_||(ue(wn,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),E(d,ql.EventType.CLOSE,()=>{_||(_=!0,ue(wn,`RPC '${e}' stream ${i} transport closed`),y.po())}),E(d,ql.EventType.ERROR,b=>{_||(_=!0,La(wn,`RPC '${e}' stream ${i} transport errored:`,b),y.po(new ve(G.UNAVAILABLE,"The operation could not be completed")))}),E(d,ql.EventType.MESSAGE,b=>{var R;if(!_){const g=b.data[0];ct(!!g);const I=g,M=I.error||((R=I[0])===null||R===void 0?void 0:R.error);if(M){ue(wn,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let P=function(T){const A=jt[T];if(A!==void 0)return VA(A)}(z),S=M.message;P===void 0&&(P=G.INTERNAL,S="Unknown error status: "+z+" with message "+M.message),_=!0,y.po(new ve(P,S)),d.close()}else ue(wn,`RPC '${e}' stream ${i} received:`,g),y.yo(g)}}),E(a,uA.STAT_EVENT,b=>{b.stat===yg.PROXY?ue(wn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===yg.NOPROXY&&ue(wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){return new qU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new QA(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new ve(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M4 extends YA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=QU(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?ni(o.readTime):Pe.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=kg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sg(l)?{documents:JU(s,l)}:{query:ZU(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jA(s,o.resumeToken);const c=Ig(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Cd(s,o.snapshotVersion.toTimestamp());const c=Ig(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=t4(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=kg(this.serializer),n.removeTarget=e,this.i_(n)}}class V4 extends YA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=XU(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.A_(r,n)}return ct(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=kg(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YU(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Cg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(G.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Cg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(G.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class U4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ni(n),this.y_=!1):ue("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{bo(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=be(l);c.M_.add(4),await mc(c),c.N_.set("Unknown"),c.M_.delete(4),await Sf(c)}(this))})}),this.N_=new U4(r,i)}}async function Sf(t){if(bo(t))for(const e of t.x_)await e(!0)}async function mc(t){for(const e of t.x_)await e(!1)}function XA(t,e){const n=be(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),My(n)?Oy(n):rl(n).Xo()&&Ly(n,e))}function Dy(t,e){const n=be(t),r=rl(n);n.F_.delete(e),r.Xo()&&JA(n,e),n.F_.size===0&&(r.Xo()?r.n_():bo(n)&&n.N_.set("Unknown"))}function Ly(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rl(t).P_(e)}function JA(t,e){t.L_.xe(e),rl(t).I_(e)}function Oy(t){t.L_=new BU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.N_.w_()}function My(t){return bo(t)&&!rl(t).Zo()&&t.F_.size>0}function bo(t){return be(t).M_.size===0}function ZA(t){t.L_=void 0}async function $4(t){t.N_.set("Online")}async function B4(t){t.F_.forEach((e,n)=>{Ly(t,e)})}async function z4(t,e){ZA(t),My(t)?(t.N_.D_(e),Oy(t)):t.N_.set("Unknown")}async function W4(t,e,n){if(t.N_.set("Online"),e instanceof UA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(t,r)}else if(e instanceof Mh?t.L_.Ke(e):e instanceof FA?t.L_.He(e):t.L_.We(e),!n.isEqual(Pe.min()))try{const r=await GA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Pn.EMPTY_BYTE_STRING,h.snapshotVersion)),JA(s,l);const d=new es(h.target,l,c,h.sequenceNumber);Ly(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Ad(t,r)}}async function Ad(t,e,n){if(!dc(e))throw e;t.M_.add(1),await mc(t),t.N_.set("Offline"),n||(n=()=>GA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Sf(t)})}function e1(t,e){return e().catch(n=>Ad(t,n,e))}async function Rf(t){const e=be(t),n=ys(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;H4(e);)try{const i=await k4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,q4(e,i)}catch(i){await Ad(e,i)}t1(e)&&n1(e)}function H4(t){return bo(t)&&t.v_.length<10}function q4(t,e){t.v_.push(e);const n=ys(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function t1(t){return bo(t)&&!ys(t).Zo()&&t.v_.length>0}function n1(t){ys(t).start()}async function K4(t){ys(t).V_()}async function G4(t){const e=ys(t);for(const n of t.v_)e.d_(n.mutations)}async function Q4(t,e,n){const r=t.v_.shift(),i=Ay.from(r,e,n);await e1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rf(t)}async function Y4(t,e){e&&ys(t).E_&&await async function(r,i){if(function(o){return UU(o)&&o!==G.ABORTED}(i.code)){const s=r.v_.shift();ys(r).t_(),await e1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rf(r)}}(t,e),t1(t)&&n1(t)}async function KE(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.M_.add(3),await mc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Sf(n)}async function X4(t,e){const n=be(t);e?(n.M_.delete(2),await Sf(n)):e||(n.M_.add(2),await mc(n),n.N_.set("Unknown"))}function rl(t){return t.B_||(t.B_=function(n,r,i){const s=be(n);return s.f_(),new M4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:$4.bind(null,t),To:B4.bind(null,t),Ao:z4.bind(null,t),h_:W4.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),My(t)?Oy(t):t.N_.set("Unknown")):(await t.B_.stop(),ZA(t))})),t.B_}function ys(t){return t.k_||(t.k_=function(n,r,i){const s=be(n);return s.f_(),new V4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:K4.bind(null,t),Ao:Y4.bind(null,t),R_:G4.bind(null,t),A_:Q4.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Rf(t)):(await t.k_.stop(),t.v_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Vy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fy(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),dc(t))return new ve(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=Kl(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new wa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.q_=new Wt(we.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Ce():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ua(e,n,wa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Z4{constructor(){this.queries=new nl(e=>SA(e),_f),this.onlineState="Unknown",this.z_=new Set}}async function ej(t,e){const n=be(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new J4,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fy(o,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Uy(n)}async function tj(t,e){const n=be(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nj(t,e){const n=be(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Uy(n)}function rj(t,e,n){const r=be(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Uy(t){t.z_.forEach(e=>{e.next()})}var Ng,QE;(QE=Ng||(Ng={})).J_="default",QE.Cache="cache";class ij{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class sj{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=je(),this.mutatedKeys=je(),this.Ia=RA(e),this.Ta=new wa(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new GE,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),_=yf(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;p&&_?p.data.isEqual(_.data)?y!==E&&(r.track({type:3,doc:_}),b=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),b=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),b=!0):p&&!_&&(r.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(_?(o=o.add(_),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(_,y){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return E(_)-E(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Ua(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new GE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=je(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new i1(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new r1(r))}),n}pa(e){this.la=e.hs,this.Pa=je();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ua.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class oj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aj{constructor(e){this.key=e,this.wa=!1}}class lj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new nl(a=>SA(a),_f),this.Da=new Map,this.Ca=new Set,this.va=new Wt(we.comparator),this.Fa=new Map,this.Ma=new Ny,this.xa={},this.Oa=new Map,this.Na=Fa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function uj(t,e,n=!0){const r=c1(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await s1(r,e,n,!0),i}async function cj(t,e){const n=c1(t);await s1(n,e,!0,!1)}async function s1(t,e,n,r){const i=await P4(t.localStore,ei(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await hj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&XA(t.remoteStore,i),a}async function hj(t,e,n,r,i){t.Ba=(d,p,_)=>async function(E,b,R,g){let I=b.view.da(R);I.Xi&&(I=await WE(E.localStore,b.query,!1).then(({documents:S})=>b.view.da(S,I)));const M=g&&g.targetChanges.get(b.targetId),z=g&&g.targetMismatches.get(b.targetId)!=null,P=b.view.applyChanges(I,E.isPrimaryClient,M,z);return XE(E,b.targetId,P.fa),P.snapshot}(t,d,p,_);const s=await WE(t.localStore,e,!0),o=new sj(e,s.hs),a=o.da(s.documents),l=pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);XE(t,n,c.fa);const h=new oj(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function dj(t,e,n){const r=be(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!_f(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dy(r.remoteStore,i.targetId),bg(r,i.targetId)}).catch(hc)):(bg(r,i.targetId),await Pg(r.localStore,i.targetId,!0))}async function fj(t,e){const n=be(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dy(n.remoteStore,r.targetId))}async function pj(t,e,n){const r=Ej(t);try{const i=await function(o,a){const l=be(o),c=Qt.now(),h=a.reduce((_,y)=>_.add(y.key),je());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=bi(),E=je();return l.os.getEntries(_,h).next(b=>{y=b,y.forEach((R,g)=>{g.isValidDocument()||(E=E.add(R))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(b=>{d=b;const R=[];for(const g of a){const I=LU(g,d.get(g.key).overlayedDocument);I!=null&&R.push(new Ps(g.key,I,gA(I.value.mapValue),ti.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,R,a)}).next(b=>{p=b;const R=b.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(_,b.batchId,R)})}).then(()=>({batchId:p.batchId,changes:CA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Wt(Xe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await gc(r,i.changes),await Rf(r.remoteStore)}catch(i){const s=Fy(i,"Failed to persist write");n.reject(s)}}async function o1(t,e){const n=be(t);try{const r=await C4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ct(o.wa):i.removedDocuments.size>0&&(ct(o.wa),o.wa=!1))}),await gc(n,r,e)}catch(r){await hc(r)}}function YE(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=be(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&Uy(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mj(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Wt(we.comparator);o=o.insert(s,Sn.newNoDocument(s,Pe.min()));const a=je().add(s),l=new Ef(Pe.min(),new Map,new Wt(Xe),o,a);await o1(r,l),r.va=r.va.remove(s),r.Fa.delete(e),jy(r)}else await Pg(r.localStore,e,!1).then(()=>bg(r,e,n)).catch(hc)}async function gj(t,e){const n=be(t),r=e.batch.batchId;try{const i=await I4(n.localStore,e);l1(n,r,null),a1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gc(n,i)}catch(i){await hc(i)}}async function _j(t,e,n){const r=be(t);try{const i=await function(o,a){const l=be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ct(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);l1(r,e,n),a1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gc(r,i)}catch(i){await hc(i)}}function a1(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function l1(t,e,n){const r=be(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||u1(t,r)})}function u1(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Dy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),jy(t))}function XE(t,e,n){for(const r of n)r instanceof r1?(t.Ma.addReference(r.key,e),yj(t,r)):r instanceof i1?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||u1(t,r.key)):Ce()}function yj(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.Ca.add(r),jy(t))}function jy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new we(Lt.fromString(e)),r=t.Na.next();t.Fa.set(r,new aj(n)),t.va=t.va.insert(n,r),XA(t.remoteStore,new es(ei(Cy(n.path)),r,"TargetPurposeLimboResolution",wy.oe))}}async function gc(t,e,n){const r=be(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=xy.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=be(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(c,p=>K.forEach(p.qi,_=>h.persistence.referenceDelegate.addReference(d,p.targetId,_)).next(()=>K.forEach(p.Qi,_=>h.persistence.referenceDelegate.removeReference(d,p.targetId,_)))))}catch(d){if(!dc(d))throw d;ue("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const _=h.ns.get(p),y=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,E)}}}(r.localStore,s))}async function vj(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await KA(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new ve(G.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gc(n,r.us)}}function wj(t,e){const n=be(t),r=n.Fa.get(e);if(r&&r.wa)return je().add(r.key);{let i=je();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function c1(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mj.bind(null,e),e.Sa.h_=nj.bind(null,e.eventManager),e.Sa.ka=rj.bind(null,e.eventManager),e}function Ej(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_j.bind(null,e),e}class JE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return R4(this.persistence,new T4,e.initialUser,this.serializer)}createPersistence(e){return new v4(by.Hr,this.serializer)}createSharedClientState(e){return new b4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Tj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vj.bind(null,this.syncEngine),await X4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z4}()}createDatastore(e){const n=Tf(e.databaseInfo.databaseId),r=function(s){return new O4(s)}(e.databaseInfo);return function(s,o,a,l){return new F4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new j4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>YE(this.syncEngine,n,0),function(){return qE.D()?new qE:new x4}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new lj(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=be(r);ue("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await mc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=fA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qp(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ZE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Cj(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>KE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>KE(e.remoteStore,i)),t._onlineComponents=e}function Ij(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Cj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Ij(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await Qp(t,new JE)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Qp(t,new JE);return t._offlineComponents}async function h1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await ZE(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await ZE(t,new Tj))),t._onlineComponents}function Aj(t){return h1(t).then(e=>e.syncEngine)}async function kj(t){const e=await h1(t),n=e.eventManager;return n.onListen=uj.bind(null,e.syncEngine),n.onUnlisten=dj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fj.bind(null,e.syncEngine),n}function Pj(t,e,n={}){const r=new hs;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Sj({next:p=>{o.enqueueAndForget(()=>tj(s,d));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new ve(G.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ij(Cy(a.path),h,{includeMetadataChanges:!0,ra:!0});return ej(s,d)}(await kj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t,e,n){if(!n)throw new ve(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bj(t,e,n,r){if(e===!0&&r===!0)throw new ve(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tT(t){if(!we.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function _o(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$y(t);throw new ve(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class By{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zF;switch(r.type){case"firstParty":return new KF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=eT.get(n);r&&(ue("ComponentProvider","Removing Datastore"),eT.delete(n),r.terminate())}(this),Promise.resolve()}}function xj(t,e,n,r={}){var i;const s=(t=_o(t,By))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=En.MOCK_USER;else{a=jL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ve(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new En(c)}t._authCredentials=new WF(new dA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zy(this.firestore,e,this._query)}}class or{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Qu extends zy{constructor(e,n,r){super(e,n,Cy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new we(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function jn(t,e,...n){if(t=kn(t),arguments.length===1&&(e=fA.newId()),Nj("doc","path",e),t instanceof By){const r=Lt.fromString(e,...n);return tT(r),new or(t,null,new we(r))}{if(!(t instanceof or||t instanceof Qu))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return tT(r),new or(t.firestore,t instanceof Qu?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new QA(this,"async_queue_retry"),this.hu=()=>{const n=Gp();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Gp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new hs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!dc(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ni("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Vy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ce()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class If extends By{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Dj}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||p1(this),this._firestoreClient.terminate()}}function Lj(t,e){const n=typeof t=="object"?t:tC(),r=typeof t=="string"?t:"(default)",i=oc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=UL("firestore");s&&xj(i,...s)}return i}function f1(t){return t._firestoreClient||p1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function p1(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new oU(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,d1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Rj(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(Pn.fromBase64String(e))}catch(n){throw new ve(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=/^__.*__$/;class Mj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}class m1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function g1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class qy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new qy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return kd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(g1(this.fu)&&Oj.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Vj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tf(e)}Fu(e,n,r,i=!1){return new qy({fu:e,methodName:n,vu:r,path:un.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _1(t){const e=t._freezeSettings(),n=Tf(t._databaseId);return new Vj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fj(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Ky("Data must be an object, but it was:",o,r);const a=y1(r,o);let l,c;if(s.merge)l=new ir(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=xg(e,d,n);if(!o.contains(p))throw new ve(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);w1(h,p)||h.push(p)}l=new ir(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Mj(new Fn(a),l,c)}class Af extends Wy{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}function Uj(t,e,n,r){const i=t.Fu(1,e,n);Ky("Data must be an object, but it was:",i,r);const s=[],o=Fn.empty();No(r,(l,c)=>{const h=Gy(e,l,n);c=kn(c);const d=i.Su(h);if(c instanceof Af)s.push(h);else{const p=kf(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new ir(s);return new m1(o,a,i.fieldTransforms)}function jj(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[xg(e,r,n)],l=[i];if(s.length%2!=0)throw new ve(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(xg(e,s[p])),l.push(s[p+1]);const c=[],h=Fn.empty();for(let p=a.length-1;p>=0;--p)if(!w1(c,a[p])){const _=a[p];let y=l[p];y=kn(y);const E=o.Su(_);if(y instanceof Af)c.push(_);else{const b=kf(y,E);b!=null&&(c.push(_),h.set(_,b))}}const d=new ir(c);return new m1(h,d,o.fieldTransforms)}function kf(t,e){if(v1(t=kn(t)))return Ky("Unsupported field value:",e,t),y1(t,e);if(t instanceof Wy)return function(r,i){if(!g1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=kf(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qt.fromDate(r);return{timestampValue:Cd(i.serializer,s)}}if(r instanceof Qt){const s=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,s)}}if(r instanceof Hy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ja)return{bytesValue:jA(i.serializer,r._byteString)};if(r instanceof or){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Py(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${$y(r)}`)}(t,e)}function y1(t,e){const n={};return pA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(r,i)=>{const s=kf(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function v1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qt||t instanceof Hy||t instanceof ja||t instanceof or||t instanceof Wy)}function Ky(t,e,n){if(!v1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$y(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function xg(t,e,n){if((e=kn(e))instanceof Cf)return e._internalPath;if(typeof e=="string")return Gy(t,e);throw kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const $j=new RegExp("[~\\*/\\[\\]]");function Gy(t,e,n){if(e.search($j)>=0)throw kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cf(...e.split("."))._internalPath}catch{throw kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ve(G.INVALID_ARGUMENT,a+t+l)}function w1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(T1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bj extends E1{data(){return super.data()}}function T1(t,e){return typeof e=="string"?Gy(t,e):e instanceof Cf?e._internalPath:e._delegate._internalPath}class zj{convertValue(e,n="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return No(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Hy(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ty(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=_s(e);return new Qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);ct(qA(r));const i=new Hu(r.get(1),r.get(3)),s=new we(r.popFirst(5));return i.isEqual(n)||Ni(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class S1 extends E1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(T1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qj extends S1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){t=_o(t,or);const e=_o(t.firestore,If);return Pj(f1(e),t._key).then(n=>Qj(e,t,n))}class Kj extends zj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function Gj(t,e,n){t=_o(t,or);const r=_o(t.firestore,If),i=Wj(t.converter,e);return R1(r,[Fj(_1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ti.none())])}function Yu(t,e,n,...r){t=_o(t,or);const i=_o(t.firestore,If),s=_1(i);let o;return o=typeof(e=kn(e))=="string"||e instanceof Cf?jj(s,"updateDoc",t._key,e,n,r):Uj(s,"updateDoc",t._key,e),R1(i,[o.toMutation(t._key,ti.exists(!0))])}function R1(t,e){return function(r,i){const s=new hs;return r.asyncQueue.enqueueAndForget(async()=>pj(await Aj(r),i,s)),s.promise}(f1(t),e)}function Qj(t,e,n){const r=n.docs.get(e._key),i=new Kj(t);return new S1(t,i,e._key,r,new Hj(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){tl=i})(ko),Vr(new Er("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new If(new HF(r.getProvider("auth-internal")),new QF(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qn(RE,"4.6.4",e),qn(RE,"4.6.4","esm2017")})();const Yj={apiKey:"AIzaSyC6iK6Lrux-4MEpEc-zJYFrdZaPLjGUhNQ",authDomain:"todoreactapp-74bab.firebaseapp.com",databaseURL:"https://todoreactapp-74bab-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todoreactapp-74bab",storageBucket:"todoreactapp-74bab.appspot.com",messagingSenderId:"590837115647",appId:"1:590837115647:web:c608d9ebb993d4e2427aca",measurementId:"G-VG9R1F5WT0"},Xj=eC(Yj),$n=Lj(Xj),rn=$F();var rT={};const iT="@firebase/database",sT="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I1="";function Jj(t){I1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ln(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Di(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Zj(e)}}catch{}return new e$},Js=C1("localStorage"),t$=C1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new sc("@firebase/database"),n$=function(){let t=1;return function(){return t++}}(),A1=function(t){const e=tO(t),n=new YL;n.update(e);const r=n.digest();return ty.encodeByteArray(r)},_c=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=_c.apply(null,r):typeof r=="object"?e+=ln(r):e+=r,e+=" "}return e};let du=null,oT=!0;const r$=function(t,e){se(!e,"Can't turn on custom loggers persistently."),Ea.logLevel=Ue.VERBOSE,du=Ea.log.bind(Ea)},Rn=function(...t){if(oT===!0&&(oT=!1,du===null&&t$.get("logging_enabled")===!0&&r$()),du){const e=_c.apply(null,t);du(e)}},yc=function(t){return function(...e){Rn(t,...e)}},Dg=function(...t){const e="FIREBASE INTERNAL ERROR: "+_c(...t);Ea.error(e)},yo=function(...t){const e=`FIREBASE FATAL ERROR: ${_c(...t)}`;throw Ea.error(e),new Error(e)},ar=function(...t){const e="FIREBASE WARNING: "+_c(...t);Ea.warn(e)},i$=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ar("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},k1=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},s$=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},$a="[MIN_NAME]",vo="[MAX_NAME]",il=function(t,e){if(t===e)return 0;if(t===$a||e===vo)return-1;if(e===$a||t===vo)return 1;{const n=aT(t),r=aT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},o$=function(t,e){return t===e?0:t<e?-1:1},Nl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ln(e))},Qy=function(t){if(typeof t!="object"||t===null)return ln(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ln(e[r]),n+=":",n+=Qy(t[e[r]]);return n+="}",n},P1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Tr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const N1=function(t){se(!k1(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},a$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},l$=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},u$=new RegExp("^-?(0*)\\d{1,10}$"),c$=-2147483648,h$=2147483647,aT=function(t){if(u$.test(t)){const e=Number(t);if(e>=c$&&e<=h$)return e}return null},vc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ar("Exception was thrown by user callback.",n),e},Math.floor(0))}},d$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ar(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ar(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="5",b1="v",x1="s",D1="r",L1="f",O1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,M1="ls",V1="p",Lg="ac",F1="websocket",U1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function g$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function j1(t,e,n){se(typeof e=="string","typeof type must == string"),se(typeof n=="object","typeof params must == object");let r;if(e===F1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===U1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);g$(t)&&(n.ns=t.namespace);const i=[];return Tr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(){this.counters_={}}incrementCounter(e,n=1){Di(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return DL(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp={},Xp={};function Xy(t){const e=t.toString();return Yp[e]||(Yp[e]=new _$),Yp[e]}function y$(t,e){const n=t.toString();return Xp[n]||(Xp[n]=e()),Xp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="start",w$="close",E$="pLPCommand",T$="pRTLPCB",$1="id",B1="pw",z1="ser",S$="cb",R$="seg",I$="ts",C$="d",A$="dframe",W1=1870,H1=30,k$=W1-H1,P$=25e3,N$=3e4;class ua{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yc(e),this.stats_=Xy(n),this.urlFn=l=>(this.appCheckToken&&(l[Lg]=this.appCheckToken),j1(n,U1,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new v$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(N$)),s$(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jy((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===lT)this.id=a,this.password=l;else if(o===w$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[lT]="t",r[z1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[S$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[b1]=Yy,this.transportSessionId&&(r[x1]=this.transportSessionId),this.lastSessionId&&(r[M1]=this.lastSessionId),this.applicationId&&(r[V1]=this.applicationId),this.appCheckToken&&(r[Lg]=this.appCheckToken),typeof location<"u"&&location.hostname&&O1.test(location.hostname)&&(r[D1]=L1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ua.forceAllow_=!0}static forceDisallow(){ua.forceDisallow_=!0}static isAvailable(){return ua.forceAllow_?!0:!ua.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a$()&&!l$()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jI(n),i=P1(r,k$);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[A$]="t",r[$1]=e,r[B1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ln(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Jy{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=n$(),window[E$+this.uniqueCallbackIdentifier]=e,window[T$+this.uniqueCallbackIdentifier]=n,this.myIFrame=Jy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Rn("frame writing exception"),a.stack&&Rn(a.stack),Rn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Rn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[$1]=this.myID,e[B1]=this.myPW,e[z1]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+H1+r.length<=W1;){const o=this.pendingSegs.shift();r=r+"&"+R$+i+"="+o.seg+"&"+I$+i+"="+o.ts+"&"+C$+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(P$)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$=16384,x$=45e3;let Pd=null;typeof MozWebSocket<"u"?Pd=MozWebSocket:typeof WebSocket<"u"&&(Pd=WebSocket);class br{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yc(this.connId),this.stats_=Xy(n),this.connURL=br.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[b1]=Yy,typeof location<"u"&&location.hostname&&O1.test(location.hostname)&&(o[D1]=L1),n&&(o[x1]=n),r&&(o[M1]=r),i&&(o[Lg]=i),s&&(o[V1]=s),j1(e,F1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Js.set("previous_websocket_failure",!0);try{let r;KI(),this.mySock=new Pd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){br.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Pd!==null&&!br.forceDisallow_}static previouslyFailed(){return Js.isInMemoryStorage||Js.get("previous_websocket_failure")===!0}markConnectionHealthy(){Js.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Uu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(se(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=P1(n,b$);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(x$))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}br.responsesRequiredToBeHealthy=2;br.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ua,br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=br&&br.isAvailable();let r=n&&!br.previouslyFailed();if(e.webSocketOnly&&(n||ar("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[br];else{const i=this.transports_=[];for(const s of Xu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=6e4,L$=5e3,O$=10*1024,M$=100*1024,Jp="t",uT="d",V$="s",cT="r",F$="e",hT="o",dT="a",fT="n",pT="p",U$="h";class j${constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yc("c:"+this.id+":"),this.transportManager_=new Xu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>M$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>O$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Jp in e){const n=e[Jp];n===dT?this.upgradeIfSecondaryHealthy_():n===cT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===hT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Nl(Jp,e);if(uT in e){const r=e[uT];if(n===U$){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===fT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===V$?this.onConnectionShutdown_(r):n===cT?this.onReset_(r):n===F$?Dg("Server Error: "+r):n===hT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yy!==r&&ar("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(D$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(L$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.allowedEvents_=e,this.listeners_={},se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){se(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends K1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ry()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nd}getInitialEvent(e){return se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=32,gT=768;class yt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rt(){return new yt("")}function qe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ws(t){return t.pieces_.length-t.pieceNum_}function mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new yt(t.pieces_,e)}function G1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Q1(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Y1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new yt(e,0)}function tn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof yt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new yt(n,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function gr(t,e){const n=qe(t),r=qe(e);if(n===null)return e;if(n===r)return gr(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X1(t,e){if(ws(t)!==ws(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ws(t)>ws(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class B${constructor(e,n){this.errorPrefix_=n,this.parts_=Q1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=lf(this.parts_[r]);J1(this)}}function z$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=lf(e),J1(t)}function W$(t){const e=t.parts_.pop();t.byteLength_-=lf(e),t.parts_.length>0&&(t.byteLength_-=1)}function J1(t){if(t.byteLength_>gT)throw new Error(t.errorPrefix_+"has a key path longer than "+gT+" bytes ("+t.byteLength_+").");if(t.parts_.length>mT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mT+") or object contains a cycle "+Bs(t))}function Bs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends K1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Zy}getInitialEvent(e){return se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=1e3,H$=60*5*1e3,_T=30*1e3,q$=1.3,K$=3e4,G$="server_kill",yT=3;class Ri extends q1{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ri.nextPersistentConnectionId_++,this.log_=yc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bl,this.maxReconnectDelay_=H$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!KI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Nd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ln(s)),se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ny,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),se(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ri.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Di(e,"w")){const r=Da(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ar(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||QL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_T)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=GL(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ln(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Dg("Unrecognized action received from server: "+ln(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>K$&&(this.reconnectDelay_=bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*q$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ri.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){se(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new j$(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{ar(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(G$)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ar(d),l())}}}interrupt(e){Rn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Rn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ag(this.interruptReasons_)&&(this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Qy(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new yt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Rn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yT&&(this.reconnectDelay_=_T,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Rn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+I1.replace(/\./g,"-")]=1,ry()?e["framework.cordova"]=1:qI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Nd.getInstance().currentlyOnline();return ag(this.interruptReasons_)&&e}}Ri.nextPersistentConnectionId_=0;Ri.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ke(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ke($a,e),i=new Ke($a,n);return this.compare(r,i)!==0}minPost(){return Ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh;class Z1 extends Pf{static get __EMPTY_NODE(){return lh}static set __EMPTY_NODE(e){lh=e}compare(e,n){return il(e.name,n.name)}isDefinedOn(e){throw Ja("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ke.MIN}maxPost(){return new Ke(vo,lh)}makePost(e,n){return se(typeof e=="string","KeyIndex indexValue must always be a string."),new Ke(e,lh)}toString(){return".key"}}const Ta=new Z1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class en{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??en.RED,this.left=i??Bn.EMPTY_NODE,this.right=s??Bn.EMPTY_NODE}copy(e,n,r,i,s){return new en(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Bn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}en.RED=!0;en.BLACK=!1;class Q${copy(e,n,r,i,s){return this}insert(e,n,r){return new en(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bn{constructor(e,n=Bn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,en.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,en.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new uh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new uh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new uh(this.root_,null,this.comparator_,!0,e)}}Bn.EMPTY_NODE=new Q$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t,e){return il(t.name,e.name)}function ev(t,e){return il(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og;function X$(t){Og=t}const ek=function(t){return typeof t=="number"?"number:"+N1(t):"string:"+t},tk=function(t){if(t.isLeafNode()){const e=t.val();se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Di(e,".sv"),"Priority must be a string or number.")}else se(t===Og||t.isEmpty(),"priority of unexpected type.");se(t===Og||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vT;class Xt{constructor(e,n=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tk(this.priorityNode_)}static set __childrenNodeConstructor(e){vT=e}static get __childrenNodeConstructor(){return vT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:qe(e)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=qe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(se(r!==".priority"||ws(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ek(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=N1(this.value_):e+=this.value_,this.lazyHash_=A1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xt.__childrenNodeConstructor?-1:(se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Xt.VALUE_TYPE_ORDER.indexOf(n),s=Xt.VALUE_TYPE_ORDER.indexOf(r);return se(i>=0,"Unknown leaf type: "+n),se(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nk,rk;function J$(t){nk=t}function Z$(t){rk=t}class e3 extends Pf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?il(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ke.MIN}maxPost(){return new Ke(vo,new Xt("[PRIORITY-POST]",rk))}makePost(e,n){const r=nk(e);return new Ke(n,new Xt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Cn=new e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=Math.log(2);class n3{constructor(e){const n=s=>parseInt(Math.log(s)/t3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bd=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new en(p,d.node,en.BLACK,null,null);{const _=parseInt(h/2,10)+l,y=i(l,_),E=i(_+1,c);return d=t[_],p=n?n(d):d,new en(p,d.node,en.BLACK,y,E)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,E){const b=d-y,R=d;d-=y;const g=i(b+1,R),I=t[b],M=n?n(I):I;_(new en(M,I.node,E,null,g))},_=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const E=l.nextBitIsOne(),b=Math.pow(2,l.count-(y+1));E?p(b,en.BLACK):(p(b,en.BLACK),p(b,en.RED))}return h},o=new n3(t.length),a=s(o);return new Bn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zp;const Ho={};class wi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return se(Ho&&Cn,"ChildrenNode.ts has not been loaded"),Zp=Zp||new wi({".priority":Ho},{".priority":Cn}),Zp}get(e){const n=Da(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bn?n:null}hasIndex(e){return Di(this.indexSet_,e.toString())}addIndex(e,n){se(e!==Ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ke.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=bd(r,e.getCompare()):a=Ho;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new wi(h,c)}addToIndexes(e,n){const r=dd(this.indexes_,(i,s)=>{const o=Da(this.indexSet_,s);if(se(o,"Missing index implementation for "+s),i===Ho)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ke.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),bd(a,o.getCompare())}else return Ho;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ke(e.name,a))),l.insert(e,e.node)}});return new wi(r,this.indexSet_)}removeFromIndexes(e,n){const r=dd(this.indexes_,i=>{if(i===Ho)return i;{const s=n.get(e.name);return s?i.remove(new Ke(e.name,s)):i}});return new wi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;class tt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tk(this.priorityNode_),this.children_.isEmpty()&&se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xl||(xl=new tt(new Bn(ev),null,wi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xl}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?xl:n}}getChild(e){const n=qe(e);return n===null?this:this.getImmediateChild(n).getChild(mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(se(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ke(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?xl:this.priorityNode_;return new tt(i,o,s)}}updateChild(e,n){const r=qe(e);if(r===null)return n;{se(qe(e)!==".priority"||ws(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(mt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Cn,(o,a)=>{n[o]=a.val(e),r++,s&&tt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ek(this.getPriority().val())+":"),this.forEachChild(Cn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":A1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ke(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ke(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ke(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wc?-1:0}withIndex(e){if(e===Ta||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ta||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Cn),i=n.getIterator(Cn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ta?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class r3 extends tt{constructor(){super(new Bn(ev),tt.EMPTY_NODE,wi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}}const wc=new r3;Object.defineProperties(Ke,{MIN:{value:new Ke($a,tt.EMPTY_NODE)},MAX:{value:new Ke(vo,wc)}});Z1.__EMPTY_NODE=tt.EMPTY_NODE;Xt.__childrenNodeConstructor=tt;X$(wc);Z$(wc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=!0;function In(t,e=null){if(t===null)return tt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Xt(n,In(e))}if(!(t instanceof Array)&&i3){const n=[];let r=!1;if(Tr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=In(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ke(o,l)))}}),n.length===0)return tt.EMPTY_NODE;const s=bd(n,Y$,o=>o.name,ev);if(r){const o=bd(n,Cn.getCompare());return new tt(s,In(e),new wi({".priority":o},{".priority":Cn}))}else return new tt(s,In(e),wi.Default)}else{let n=tt.EMPTY_NODE;return Tr(t,(r,i)=>{if(Di(t,r)&&r.substring(0,1)!=="."){const s=In(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(In(e))}}J$(In);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3 extends Pf{constructor(e){super(),this.indexPath_=e,se(!$e(e)&&qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?il(e.name,n.name):s}makePost(e,n){const r=In(e),i=tt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ke(n,i)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,wc);return new Ke(vo,e)}toString(){return Q1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3 extends Pf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?il(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ke.MIN}maxPost(){return Ke.MAX}makePost(e,n){const r=In(e);return new Ke(n,r)}toString(){return".value"}}const a3=new o3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){return{type:"value",snapshotNode:t}}function u3(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function c3(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function h3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$a}hasEnd(){return this.endSet_}getIndexEndValue(){return se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cn}copy(){const e=new tv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ET(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Cn?n="$priority":t.index_===a3?n="$value":t.index_===Ta?n="$key":(se(t.index_ instanceof s3,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ln(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ln(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ln(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ln(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ln(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function TT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Cn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends q1{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=xd.getListenId_(e,r),a={};this.listens_[o]=a;const l=ET(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Da(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=xd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ET(e._queryParams),r=e._path.toString(),i=new ny;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Za(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Uu(a.responseText)}catch{ar("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ar("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){return{value:null,children:new Map}}function ik(t,e,n){if($e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=qe(e);t.children.has(r)||t.children.set(r,Dd());const i=t.children.get(r);e=mt(e),ik(i,e,n)}}function Mg(t,e,n){t.value!==null?n(e,t.value):f3(t,(r,i)=>{const s=new yt(e.toString()+"/"+r);Mg(i,s,n)})}function f3(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Tr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=10*1e3,m3=30*1e3,g3=5*60*1e3;class _3{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new p3(e);const r=ST+(m3-ST)*Math.random();fu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Tr(e,(i,s)=>{s>0&&Di(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),fu(this.reportStats_.bind(this),Math.floor(Math.random()*2*g3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Gr||(Gr={}));function sk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ok(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ak(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gr.ACK_USER_WRITE,this.source=sk()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new yt(e));return new Ld(rt(),n,this.revert)}}else return se(qe(this.path)===e,"operationForChild called for unrelated child."),new Ld(mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gr.OVERWRITE}operationForChild(e){return $e(this.path)?new wo(this.source,rt(),this.snap.getImmediateChild(e)):new wo(this.source,mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gr.MERGE}operationForChild(e){if($e(this.path)){const n=this.children.subtree(new yt(e));return n.isEmpty()?null:n.value?new wo(this.source,rt(),n.value):new Ju(this.source,rt(),n)}else return se(qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ju(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const n=qe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function y3(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(h3(o.childName,o.snapshotNode))}),Dl(t,i,"child_removed",e,r,n),Dl(t,i,"child_added",e,r,n),Dl(t,i,"child_moved",s,r,n),Dl(t,i,"child_changed",e,r,n),Dl(t,i,"value",e,r,n),i}function Dl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>w3(t,a,l)),o.forEach(a=>{const l=v3(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function v3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function w3(t,e,n){if(e.childName==null||n.childName==null)throw Ja("Should only compare child_ events.");const r=new Ke(e.childName,e.snapshotNode),i=new Ke(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e){return{eventCache:t,serverCache:e}}function pu(t,e,n,r){return lk(new nv(e,n,r),t.serverCache)}function uk(t,e,n,r){return lk(t.eventCache,new nv(e,n,r))}function Vg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Eo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em;const E3=()=>(em||(em=new Bn(o$)),em);class pt{constructor(e,n=E3()){this.value=e,this.children=n}static fromObject(e){let n=new pt(null);return Tr(e,(r,i)=>{n=n.set(new yt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if($e(e))return null;{const r=qe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(mt(e),n);return s!=null?{path:tn(new yt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const n=qe(e),r=this.children.get(n);return r!==null?r.subtree(mt(e)):new pt(null)}}set(e,n){if($e(e))return new pt(n,this.children);{const r=qe(e),s=(this.children.get(r)||new pt(null)).set(mt(e),n),o=this.children.insert(r,s);return new pt(this.value,o)}}remove(e){if($e(e))return this.children.isEmpty()?new pt(null):new pt(null,this.children);{const n=qe(e),r=this.children.get(n);if(r){const i=r.remove(mt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new pt(null):new pt(this.value,s)}else return this}}get(e){if($e(e))return this.value;{const n=qe(e),r=this.children.get(n);return r?r.get(mt(e)):null}}setTree(e,n){if($e(e))return n;{const r=qe(e),s=(this.children.get(r)||new pt(null)).setTree(mt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new pt(this.value,o)}}fold(e){return this.fold_(rt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,rt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if($e(e))return null;{const s=qe(e),o=this.children.get(s);return o?o.findOnPath_(mt(e),tn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rt(),n)}foreachOnPath_(e,n,r){if($e(e))return this;{this.value&&r(n,this.value);const i=qe(e),s=this.children.get(i);return s?s.foreachOnPath_(mt(e),tn(n,i),r):new pt(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.writeTree_=e}static empty(){return new Or(new pt(null))}}function mu(t,e,n){if($e(e))return new Or(new pt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=gr(i,e);return s=s.updateChild(o,n),new Or(t.writeTree_.set(i,s))}else{const i=new pt(n),s=t.writeTree_.setTree(e,i);return new Or(s)}}}function RT(t,e,n){let r=t;return Tr(n,(i,s)=>{r=mu(r,tn(e,i),s)}),r}function IT(t,e){if($e(e))return Or.empty();{const n=t.writeTree_.setTree(e,new pt(null));return new Or(n)}}function Fg(t,e){return xo(t,e)!=null}function xo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gr(n.path,e)):null}function CT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Cn,(r,i)=>{e.push(new Ke(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ke(r,i.value))}),e}function fs(t,e){if($e(e))return t;{const n=xo(t,e);return n!=null?new Or(new pt(n)):new Or(t.writeTree_.subtree(e))}}function Ug(t){return t.writeTree_.isEmpty()}function Ba(t,e){return ck(rt(),t.writeTree_,e)}function ck(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(se(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=ck(tn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t,e){return gk(e,t)}function T3(t,e,n,r,i){se(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=mu(t.visibleWrites,e,n)),t.lastWriteId=r}function S3(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function R3(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);se(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&I3(a,r.path)?i=!1:xr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return C3(t),!0;if(r.snap)t.visibleWrites=IT(t.visibleWrites,r.path);else{const a=r.children;Tr(a,l=>{t.visibleWrites=IT(t.visibleWrites,tn(r.path,l))})}return!0}else return!1}function I3(t,e){if(t.snap)return xr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xr(tn(t.path,n),e))return!0;return!1}function C3(t){t.visibleWrites=dk(t.allWrites,A3,rt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function A3(t){return t.visible}function dk(t,e,n){let r=Or.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)xr(n,o)?(a=gr(n,o),r=mu(r,a,s.snap)):xr(o,n)&&(a=gr(o,n),r=mu(r,rt(),s.snap.getChild(a)));else if(s.children){if(xr(n,o))a=gr(n,o),r=RT(r,a,s.children);else if(xr(o,n))if(a=gr(o,n),$e(a))r=RT(r,rt(),s.children);else{const l=Da(s.children,qe(a));if(l){const c=l.getChild(mt(a));r=mu(r,rt(),c)}}}else throw Ja("WriteRecord should have .snap or .children")}}return r}function fk(t,e,n,r,i){if(!r&&!i){const s=xo(t.visibleWrites,e);if(s!=null)return s;{const o=fs(t.visibleWrites,e);if(Ug(o))return n;if(n==null&&!Fg(o,rt()))return null;{const a=n||tt.EMPTY_NODE;return Ba(o,a)}}}else{const s=fs(t.visibleWrites,e);if(!i&&Ug(s))return n;if(!i&&n==null&&!Fg(s,rt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(xr(c.path,e)||xr(e,c.path))},a=dk(t.allWrites,o,e),l=n||tt.EMPTY_NODE;return Ba(a,l)}}}function k3(t,e,n){let r=tt.EMPTY_NODE;const i=xo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Cn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=fs(t.visibleWrites,e);return n.forEachChild(Cn,(o,a)=>{const l=Ba(fs(s,new yt(o)),a);r=r.updateImmediateChild(o,l)}),CT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=fs(t.visibleWrites,e);return CT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function P3(t,e,n,r,i){se(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tn(e,n);if(Fg(t.visibleWrites,s))return null;{const o=fs(t.visibleWrites,s);return Ug(o)?i.getChild(n):Ba(o,i.getChild(n))}}function N3(t,e,n,r){const i=tn(e,n),s=xo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=fs(t.visibleWrites,i);return Ba(o,r.getNode().getImmediateChild(n))}else return null}function b3(t,e){return xo(t.visibleWrites,e)}function x3(t,e,n,r,i,s,o){let a;const l=fs(t.visibleWrites,e),c=xo(l,rt());if(c!=null)a=c;else if(n!=null)a=Ba(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=p.getNext();for(;_&&h.length<i;)d(_,r)!==0&&h.push(_),_=p.getNext();return h}else return[]}function D3(){return{visibleWrites:Or.empty(),allWrites:[],lastWriteId:-1}}function jg(t,e,n,r){return fk(t.writeTree,t.treePath,e,n,r)}function pk(t,e){return k3(t.writeTree,t.treePath,e)}function AT(t,e,n,r){return P3(t.writeTree,t.treePath,e,n,r)}function Od(t,e){return b3(t.writeTree,tn(t.treePath,e))}function L3(t,e,n,r,i,s){return x3(t.writeTree,t.treePath,e,n,r,i,s)}function rv(t,e,n){return N3(t.writeTree,t.treePath,e,n)}function mk(t,e){return gk(tn(t.treePath,e),t.writeTree)}function gk(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),se(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,wT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,c3(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,u3(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,wT(r,e.snapshotNode,i.oldSnap));else throw Ja("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const _k=new M3;class iv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new nv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Eo(this.viewCache_),s=L3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function V3(t,e){se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function F3(t,e,n,r,i){const s=new O3;let o,a;if(n.type===Gr.OVERWRITE){const c=n;c.source.fromUser?o=$g(t,e,c.path,c.snap,r,i,s):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),o=Md(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Gr.MERGE){const c=n;c.source.fromUser?o=j3(t,e,c.path,c.children,r,i,s):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Bg(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Gr.ACK_USER_WRITE){const c=n;c.revert?o=z3(t,e,c.path,r,i,s):o=$3(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Gr.LISTEN_COMPLETE)o=B3(t,e,n.path,r,s);else throw Ja("Unknown operation type: "+n.type);const l=s.getChanges();return U3(e,o,l),{viewCache:o,changes:l}}function U3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Vg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(l3(Vg(e)))}}function yk(t,e,n,r,i,s){const o=e.eventCache;if(Od(r,n)!=null)return e;{let a,l;if($e(n))if(se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Eo(e),h=c instanceof tt?c:tt.EMPTY_NODE,d=pk(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=jg(r,Eo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=qe(n);if(c===".priority"){se(ws(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=AT(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=mt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=AT(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=rv(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return pu(e,a,o.isFullyInitialized()||$e(n),t.filter.filtersNodes())}}function Md(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if($e(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=qe(n);if(!l.isCompleteForPath(n)&&ws(n)>1)return e;const y=mt(n),b=l.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?c=h.updatePriority(l.getNode(),b):c=h.updateChild(l.getNode(),_,b,y,_k,null)}const d=uk(e,c,l.isFullyInitialized()||$e(n),h.filtersNodes()),p=new iv(i,d,s);return yk(t,d,n,i,p,a)}function $g(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new iv(i,e,s);if($e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=pu(e,c,!0,t.filter.filtersNodes());else{const d=qe(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=pu(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=mt(n),_=a.getNode().getImmediateChild(d);let y;if($e(p))y=r;else{const E=h.getCompleteChild(d);E!=null?G1(p)===".priority"&&E.getChild(Y1(p)).isEmpty()?y=E:y=E.updateChild(p,r):y=tt.EMPTY_NODE}if(_.equals(y))l=e;else{const E=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=pu(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function kT(t,e){return t.eventCache.isCompleteForChild(e)}function j3(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=tn(n,l);kT(e,qe(h))&&(a=$g(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=tn(n,l);kT(e,qe(h))||(a=$g(t,a,h,c,i,s,o))}),a}function PT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bg(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(n)?c=r:c=new pt(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),y=PT(t,_,p);l=Md(t,l,new yt(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const _=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!_){const y=e.serverCache.getNode().getImmediateChild(d),E=PT(t,y,p);l=Md(t,l,new yt(d),E,i,s,o,a)}}),l}function $3(t,e,n,r,i,s,o){if(Od(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if($e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Md(t,e,n,l.getNode().getChild(n),i,s,a,o);if($e(n)){let c=new pt(null);return l.getNode().forEachChild(Ta,(h,d)=>{c=c.set(new yt(h),d)}),Bg(t,e,n,c,i,s,a,o)}else return e}else{let c=new pt(null);return r.foreach((h,d)=>{const p=tn(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),Bg(t,e,n,c,i,s,a,o)}}function B3(t,e,n,r,i){const s=e.serverCache,o=uk(e,s.getNode(),s.isFullyInitialized()||$e(n),s.isFiltered());return yk(t,o,n,r,_k,i)}function z3(t,e,n,r,i,s){let o;if(Od(r,n)!=null)return e;{const a=new iv(r,e,i),l=e.eventCache.getNode();let c;if($e(n)||qe(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=jg(r,Eo(e));else{const d=e.serverCache.getNode();se(d instanceof tt,"serverChildren would be complete if leaf node"),h=pk(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=qe(n);let d=rv(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,mt(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,tt.EMPTY_NODE,mt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jg(r,Eo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Od(r,rt())!=null,pu(e,c,o,t.filter.filtersNodes())}}function W3(t,e){const n=Eo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$e(e)&&!n.getImmediateChild(qe(e)).isEmpty())?n.getChild(e):null}function NT(t,e,n,r){e.type===Gr.MERGE&&e.source.queryId!==null&&(se(Eo(t.viewCache_),"We should always have a full cache before handling merges"),se(Vg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=F3(t.processor_,i,e,n,r);return V3(t.processor_,s.viewCache),se(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,H3(t,s.changes,s.viewCache.eventCache.getNode())}function H3(t,e,n,r){const i=t.eventRegistrations_;return y3(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bT;function q3(t){se(!bT,"__referenceConstructor has already been defined"),bT=t}function sv(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return se(s!=null,"SyncTree gave us an op for an invalid query."),NT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(NT(o,e,n,r));return s}}function ov(t,e){let n=null;for(const r of t.views.values())n=n||W3(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xT;function K3(t){se(!xT,"__referenceConstructor has already been defined"),xT=t}class DT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pt(null),this.pendingWriteTree_=D3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function G3(t,e,n,r,i){return T3(t.pendingWriteTree_,e,n,r,i),i?bf(t,new wo(sk(),e,n)):[]}function ca(t,e,n=!1){const r=S3(t.pendingWriteTree_,e);if(R3(t.pendingWriteTree_,e)){let s=new pt(null);return r.snap!=null?s=s.set(rt(),!0):Tr(r.children,o=>{s=s.set(new yt(o),!0)}),bf(t,new Ld(r.path,s,n))}else return[]}function Nf(t,e,n){return bf(t,new wo(ok(),e,n))}function Q3(t,e,n){const r=pt.fromObject(n);return bf(t,new Ju(ok(),e,r))}function Y3(t,e,n,r){const i=Tk(t,r);if(i!=null){const s=Sk(i),o=s.path,a=s.queryId,l=gr(o,e),c=new wo(ak(a),l,n);return Rk(t,o,c)}else return[]}function X3(t,e,n,r){const i=Tk(t,r);if(i){const s=Sk(i),o=s.path,a=s.queryId,l=gr(o,e),c=pt.fromObject(n),h=new Ju(ak(a),l,c);return Rk(t,o,h)}else return[]}function vk(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=gr(o,e),c=ov(a,l);if(c)return c});return fk(i,e,s,n,!0)}function bf(t,e){return wk(e,t.syncPointTree_,null,hk(t.pendingWriteTree_,rt()))}function wk(t,e,n,r){if($e(t.path))return Ek(t,e,n,r);{const i=e.get(rt());n==null&&i!=null&&(n=ov(i,rt()));let s=[];const o=qe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=mk(r,o);s=s.concat(wk(a,l,c,h))}return i&&(s=s.concat(sv(i,t,r,n))),s}}function Ek(t,e,n,r){const i=e.get(rt());n==null&&i!=null&&(n=ov(i,rt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=mk(r,o),h=t.operationForChild(o);h&&(s=s.concat(Ek(h,a,l,c)))}),i&&(s=s.concat(sv(i,t,r,n))),s}function Tk(t,e){return t.tagToQueryMap.get(e)}function Sk(t){const e=t.indexOf("$");return se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new yt(t.substr(0,e))}}function Rk(t,e,n){const r=t.syncPointTree_.get(e);se(r,"Missing sync point for query tag that we're tracking");const i=hk(t.pendingWriteTree_,e);return sv(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new av(n)}node(){return this.node_}}class lv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=tn(this.path_,e);return new lv(this.syncTree_,n)}node(){return vk(this.syncTree_,this.path_)}}const J3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},LT=function(t,e,n){if(!t||typeof t!="object")return t;if(se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Z3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return eB(t[".sv"],e);se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Z3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:se(!1,"Unexpected server value: "+t)}},eB=function(t,e,n){t.hasOwnProperty("increment")||se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&se(!1,"Unexpected increment value: "+r);const i=e.node();if(se(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},tB=function(t,e,n,r){return uv(e,new lv(n,t),r)},nB=function(t,e,n){return uv(t,new av(e),n)};function uv(t,e,n){const r=t.getPriority().val(),i=LT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=LT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Xt(a,In(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Xt(i))),o.forEachChild(Cn,(a,l)=>{const c=uv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function hv(t,e){let n=e instanceof yt?e:new yt(e),r=t,i=qe(n);for(;i!==null;){const s=Da(r.node.children,i)||{children:{},childCount:0};r=new cv(i,r,s),n=mt(n),i=qe(n)}return r}function sl(t){return t.node.value}function Ik(t,e){t.node.value=e,zg(t)}function Ck(t){return t.node.childCount>0}function rB(t){return sl(t)===void 0&&!Ck(t)}function xf(t,e){Tr(t.node.children,(n,r)=>{e(new cv(n,t,r))})}function Ak(t,e,n,r){n&&!r&&e(t),xf(t,i=>{Ak(i,e,!0,r)}),n&&r&&e(t)}function iB(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ec(t){return new yt(t.parent===null?t.name:Ec(t.parent)+"/"+t.name)}function zg(t){t.parent!==null&&sB(t.parent,t.name,t)}function sB(t,e,n){const r=rB(n),i=Di(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,zg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,zg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=/[\[\].#$\/\u0000-\u001F\u007F]/,aB=/[\[\].#$\u0000-\u001F\u007F]/,tm=10*1024*1024,kk=function(t){return typeof t=="string"&&t.length!==0&&!oB.test(t)},lB=function(t){return typeof t=="string"&&t.length!==0&&!aB.test(t)},uB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lB(t)},Pk=function(t,e,n){const r=n instanceof yt?new B$(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bs(r)+" with contents = "+e.toString());if(k1(e))throw new Error(t+"contains "+e.toString()+" "+Bs(r));if(typeof e=="string"&&e.length>tm/3&&lf(e)>tm)throw new Error(t+"contains a string greater than "+tm+" utf8 bytes "+Bs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Tr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kk(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z$(r,o),Pk(t,a,r),W$(r)}),i&&s)throw new Error(t+' contains ".value" child '+Bs(r)+" in addition to actual children.")}},cB=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!uB(n))throw new Error(eO(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dB(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!X1(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Do(t,e,n){dB(t,n),fB(t,r=>xr(r,e)||xr(e,r))}function fB(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(pB(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function pB(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();du&&Rn("event: "+n.toString()),vc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="repo_interrupt",gB=25;class _B{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dd(),this.transactionQueueTree_=new cv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yB(t,e,n){if(t.stats_=Xy(t.repoInfo_),t.forceRestClient_||d$())t.server_=new xd(t.repoInfo_,(r,i,s,o)=>{OT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>MT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ln(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ri(t.repoInfo_,e,(r,i,s,o)=>{OT(t,r,i,s,o)},r=>{MT(t,r)},r=>{wB(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=y$(t.repoInfo_,()=>new _3(t.stats_,t.server_)),t.infoData_=new d3,t.infoSyncTree_=new DT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Nf(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),dv(t,"connected",!1),t.serverSyncTree_=new DT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Do(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function vB(t){const n=t.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Nk(t){return J3({timestamp:vB(t)})}function OT(t,e,n,r,i){t.dataUpdateCount++;const s=new yt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=dd(n,c=>In(c));o=X3(t.serverSyncTree_,s,l,i)}else{const l=In(n);o=Y3(t.serverSyncTree_,s,l,i)}else if(r){const l=dd(n,c=>In(c));o=Q3(t.serverSyncTree_,s,l)}else{const l=In(n);o=Nf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=pv(t,s)),Do(t.eventQueue_,a,o)}function MT(t,e){dv(t,"connected",e),e===!1&&TB(t)}function wB(t,e){Tr(e,(n,r)=>{dv(t,n,r)})}function dv(t,e,n){const r=new yt("/.info/"+e),i=In(n);t.infoData_.updateSnapshot(r,i);const s=Nf(t.infoSyncTree_,r,i);Do(t.eventQueue_,r,s)}function EB(t){return t.nextWriteId_++}function TB(t){bk(t,"onDisconnectEvents");const e=Nk(t),n=Dd();Mg(t.onDisconnect_,rt(),(i,s)=>{const o=tB(i,s,t.serverSyncTree_,e);ik(n,i,o)});let r=[];Mg(n,rt(),(i,s)=>{r=r.concat(Nf(t.serverSyncTree_,i,s));const o=CB(t,i);pv(t,o)}),t.onDisconnect_=Dd(),Do(t.eventQueue_,rt(),r)}function SB(t){t.persistentConnection_&&t.persistentConnection_.interrupt(mB)}function bk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Rn(n,...e)}function xk(t,e,n){return vk(t.serverSyncTree_,e,n)||tt.EMPTY_NODE}function fv(t,e=t.transactionQueueTree_){if(e||Df(t,e),sl(e)){const n=Lk(t,e);se(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&RB(t,Ec(e),n)}else Ck(e)&&xf(e,n=>{fv(t,n)})}function RB(t,e,n){const r=n.map(c=>c.currentWriteId),i=xk(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];se(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=gr(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{bk(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(ca(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Df(t,hv(t.transactionQueueTree_,e)),fv(t,t.transactionQueueTree_),Do(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)vc(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ar("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}pv(t,e)}},o)}function pv(t,e){const n=Dk(t,e),r=Ec(n),i=Lk(t,n);return IB(t,i,r),r}function IB(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=gr(n,l.path);let h=!1,d;if(se(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=gB)h=!0,d="maxretry",i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0));else{const p=xk(t,l.path,o);l.currentInputSnapshot=p;const _=e[a].update(p.val());if(_!==void 0){Pk("transaction failed: Data returned ",_,l.path);let y=In(_);typeof _=="object"&&_!=null&&Di(_,".priority")||(y=y.updatePriority(p.getPriority()));const b=l.currentWriteId,R=Nk(t),g=nB(y,p,R);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=g,l.currentWriteId=EB(t),o.splice(o.indexOf(b),1),i=i.concat(G3(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(ca(t.serverSyncTree_,b,!0))}else h=!0,d="nodata",i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0))}Do(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Df(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)vc(r[a]);fv(t,t.transactionQueueTree_)}function Dk(t,e){let n,r=t.transactionQueueTree_;for(n=qe(e);n!==null&&sl(r)===void 0;)r=hv(r,n),e=mt(e),n=qe(e);return r}function Lk(t,e){const n=[];return Ok(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ok(t,e,n){const r=sl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xf(e,i=>{Ok(t,i,n)})}function Df(t,e){const n=sl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ik(e,n.length>0?n:void 0)}xf(e,r=>{Df(t,r)})}function CB(t,e){const n=Ec(Dk(t,e)),r=hv(t.transactionQueueTree_,e);return iB(r,i=>{nm(t,i)}),nm(t,r),Ak(r,i=>{nm(t,i)}),n}function nm(t,e){const n=sl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(se(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(se(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ca(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ik(e,void 0):n.length=s+1,Do(t.eventQueue_,Ec(e),i);for(let o=0;o<r.length;o++)vc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kB(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ar(`Invalid query segment '${n}' in query '${t}'`)}return e}const VT=function(t,e){const n=PB(t),r=n.namespace;n.domain==="firebase.com"&&yo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&yo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||i$();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new m$(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new yt(n.pathString)}},PB=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=AB(t.substring(h,d)));const p=kB(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return $e(this._path)?null:G1(this._path)}get ref(){return new ol(this._repo,this._path)}get _queryIdentifier(){const e=TT(this._queryParams),n=Qy(e);return n==="{}"?"default":n}get _queryObject(){return TT(this._queryParams)}isEqual(e){if(e=kn(e),!(e instanceof mv))return!1;const n=this._repo===e._repo,r=X1(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+$$(this._path)}}class ol extends mv{constructor(e,n){super(e,n,new tv,!1)}get parent(){const e=Y1(this._path);return e===null?null:new ol(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}q3(ol);K3(ol);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="FIREBASE_DATABASE_EMULATOR_HOST",Wg={};let bB=!1;function xB(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||yo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=VT(s,i),a=o.repoInfo,l;typeof process<"u"&&rT&&(l=rT[NB]),l?(s=`http://${l}?ns=${a.namespace}`,o=VT(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new p$(t.name,t.options,e);cB("Invalid Firebase Database URL",o),$e(o.path)||yo("Database URL must point to the root of a Firebase Database (not including a child path).");const h=LB(a,t,c,new f$(t.name,n));return new OB(h,t)}function DB(t,e){const n=Wg[e];(!n||n[t.key]!==t)&&yo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),SB(t),delete n[t.key]}function LB(t,e,n,r){let i=Wg[e.name];i||(i={},Wg[e.name]=i);let s=i[t.toURLString()];return s&&yo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _B(t,bB,n,r),i[t.toURLString()]=s,s}class OB{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ol(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){Jj(ko),Vr(new Er("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return xB(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),qn(iT,sT,t),qn(iT,sT,"esm2017")}Ri.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ri.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};MB();const VB=t=>U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home",className:"capitalize bg-white rounded-3xl text-black px-4 py-2 hover:bg-transparent hover:border hover:border-white hover:text-white border border-transparent transition-all",children:t.title});/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Mk=UB,FT=jB,FB=Object.prototype.toString,ch=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function UB(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var n={},r=e||{},i=r.decode||$B,s=0;s<t.length;){var o=t.indexOf("=",s);if(o===-1)break;var a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<o){s=t.lastIndexOf(";",o-1)+1;continue}var l=t.slice(s,o).trim();if(n[l]===void 0){var c=t.slice(o+1,a).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1)),n[l]=WB(c,i)}s=a+1}return n}function jB(t,e,n){var r=n||{},i=r.encode||BB;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!ch.test(t))throw new TypeError("argument name is invalid");var s=i(e);if(s&&!ch.test(s))throw new TypeError("argument val is invalid");var o=t+"="+s;if(r.maxAge!=null){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!ch.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!ch.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){var l=r.expires;if(!zB(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+l.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority){var c=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(c){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var h=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(h){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function $B(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function BB(t){return encodeURIComponent(t)}function zB(t){return FB.call(t)==="[object Date]"||t instanceof Date}function WB(t,e){try{return e(t)}catch{return t}}function HB(){const t=typeof global>"u"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof t=="boolean"?t:typeof document=="object"&&typeof document.cookie=="string"}function qB(t){return typeof t=="string"?Mk(t):typeof t=="object"&&t!==null?t:{}}function rm(t,e={}){const n=KB(t);if(!e.doNotParse)try{return JSON.parse(n)}catch{}return t}function KB(t){return t&&t[0]==="j"&&t[1]===":"?t.substr(2):t}class Vk{constructor(e,n={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const i=this.cookies;this.cookies=Mk(document.cookie),this._checkChanges(i)};const r=typeof document>"u"?"":document.cookie;this.cookies=qB(e||r),this.defaultSetOptions=n,this.HAS_DOCUMENT_COOKIE=HB()}_emitChange(e){for(let n=0;n<this.changeListeners.length;++n)this.changeListeners[n](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach(r=>{e[r]!==this.cookies[r]&&this._emitChange({name:r,value:rm(this.cookies[r])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e,n={}){return n.doNotUpdate||this.update(),rm(this.cookies[e],n)}getAll(e={}){e.doNotUpdate||this.update();const n={};for(let r in this.cookies)n[r]=rm(this.cookies[r],e);return n}set(e,n,r){r?r=Object.assign(Object.assign({},this.defaultSetOptions),r):r=this.defaultSetOptions;const i=typeof n=="string"?n:JSON.stringify(n);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:i}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=FT(e,i,r)),this._emitChange({name:e,value:n,options:r})}remove(e,n){const r=n=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=FT(e,"",r)),this._emitChange({name:e,value:void 0,options:n})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const n=this.changeListeners.indexOf(e);n>=0&&this.changeListeners.splice(n,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}var Fk={};function GB(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var QB=GB,Oe=QB;function YB(t){return!!t&&typeof t.then=="function"}var gt=YB;function XB(t,e){if(t!=null)return t;throw Oe(e??"Got unexpected null or undefined")}var Tt=XB;function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Lf{getValue(){throw Oe("BaseLoadable")}toPromise(){throw Oe("BaseLoadable")}valueMaybe(){throw Oe("BaseLoadable")}valueOrThrow(){throw Oe(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Oe("BaseLoadable")}promiseOrThrow(){throw Oe(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Oe("BaseLoadable")}errorOrThrow(){throw Oe(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Oe("BaseLoadable")}}class JB extends Lf{constructor(e){super(),De(this,"state","hasValue"),De(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return gt(n)?To(n):za(n)?n:Tc(n)}catch(n){return gt(n)?To(n.next(()=>this.map(e))):Of(n)}}}class ZB extends Lf{constructor(e){super(),De(this,"state","hasError"),De(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class Uk extends Lf{constructor(e){super(),De(this,"state","loading"),De(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return To(this.contents.then(n=>{const r=e(n);if(za(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(gt(n))return n.then(()=>this.map(e).contents);throw n}))}}function Tc(t){return Object.freeze(new JB(t))}function Of(t){return Object.freeze(new ZB(t))}function To(t){return Object.freeze(new Uk(t))}function jk(){return Object.freeze(new Uk(new Promise(()=>{})))}function e9(t){return t.every(e=>e.state==="hasValue")?Tc(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Of(Tt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):To(Promise.all(t.map(e=>e.contents)))}function $k(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>za(i)?i:gt(i)?To(i):Tc(i)),r=e9(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function za(t){return t instanceof Lf}const t9={of:t=>gt(t)?To(t):za(t)?t:Tc(t),error:t=>Of(t),loading:()=>jk(),all:$k,isLoadable:za};var Lo={loadableWithValue:Tc,loadableWithError:Of,loadableWithPromise:To,loadableLoading:jk,loadableAll:$k,isLoadable:za,RecoilLoadable:t9},n9=Lo.loadableWithValue,r9=Lo.loadableWithError,i9=Lo.loadableWithPromise,s9=Lo.loadableLoading,o9=Lo.loadableAll,a9=Lo.isLoadable,l9=Lo.RecoilLoadable,Sc=Object.freeze({__proto__:null,loadableWithValue:n9,loadableWithError:r9,loadableWithPromise:i9,loadableLoading:s9,loadableAll:o9,isLoadable:a9,RecoilLoadable:l9});const Hg={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function u9(t,e){var n,r;const i=(n=Fk[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Oe(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function c9(t,e){var n;const r=(n=Fk[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function h9(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(u9("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Hg.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),c9("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Hg.RECOIL_GKS_ENABLED.add(n)})}))}h9();var al=Hg;function Mf(t){return al.RECOIL_GKS_ENABLED.has(t)}Mf.setPass=t=>{al.RECOIL_GKS_ENABLED.add(t)};Mf.setFail=t=>{al.RECOIL_GKS_ENABLED.delete(t)};Mf.clear=()=>{al.RECOIL_GKS_ENABLED.clear()};var st=Mf;function d9(t,e,{error:n}={}){return null}var f9=d9,gv=f9,im,sm,om;const p9=(im=ut.createMutableSource)!==null&&im!==void 0?im:ut.unstable_createMutableSource,Bk=(sm=ut.useMutableSource)!==null&&sm!==void 0?sm:ut.unstable_useMutableSource,zk=(om=ut.useSyncExternalStore)!==null&&om!==void 0?om:ut.unstable_useSyncExternalStore;function m9(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function g9(){return st("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:st("recoil_sync_external_store")&&zk!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:st("recoil_mutable_source")&&Bk!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?st("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:st("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function _9(){return!1}var Rc={createMutableSource:p9,useMutableSource:Bk,useSyncExternalStore:zk,currentRendererSupportsUseSyncExternalStore:m9,reactMode:g9,isFastRefreshEnabled:_9};class _v{constructor(e){De(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class Wk extends _v{}class Hk extends _v{}function y9(t){return t instanceof Wk||t instanceof Hk}var Vf={AbstractRecoilValue:_v,RecoilState:Wk,RecoilValueReadOnly:Hk,isRecoilValue:y9},v9=Vf.AbstractRecoilValue,w9=Vf.RecoilState,E9=Vf.RecoilValueReadOnly,T9=Vf.isRecoilValue,Wa=Object.freeze({__proto__:null,AbstractRecoilValue:v9,RecoilState:w9,RecoilValueReadOnly:E9,isRecoilValue:T9});function S9(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var Ff=S9;class qk{}const R9=new qk,So=new Map,yv=new Map;function I9(t){return Ff(t,e=>Tt(yv.get(e)))}function C9(t){if(So.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function A9(t){al.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&C9(t.key),So.set(t.key,t);const e=t.set==null?new Wa.RecoilValueReadOnly(t.key):new Wa.RecoilState(t.key);return yv.set(t.key,e),e}class Kk extends Error{}function k9(t){const e=So.get(t);if(e==null)throw new Kk(`Missing definition for RecoilValue: "${t}""`);return e}function P9(t){return So.get(t)}const Vd=new Map;function N9(t){var e;if(!st("recoil_memory_managament_2020"))return;const n=So.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;So.delete(t),(r=Gk(t))===null||r===void 0||r(),Vd.delete(t)}}function b9(t,e){st("recoil_memory_managament_2020")&&(e===void 0?Vd.delete(t):Vd.set(t,e))}function Gk(t){return Vd.get(t)}var Qn={nodes:So,recoilValues:yv,registerNode:A9,getNode:k9,getNodeMaybe:P9,deleteNodeConfigIfPossible:N9,setConfigDeletionHandler:b9,getConfigDeletionHandler:Gk,recoilValuesForKeys:I9,NodeMissingError:Kk,DefaultValue:qk,DEFAULT_VALUE:R9};function x9(t,e){e()}var D9={enqueueExecution:x9};function L9(t,e){return e={exports:{}},t(e,e.exports),e.exports}var O9=L9(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(L){return function(){return L}},h=n.hash=function(F){var L=typeof F>"u"?"undefined":e(F);if(L==="number")return F;L!=="string"&&(F+="");for(var q=0,ne=0,ee=F.length;ne<ee;++ne){var oe=F.charCodeAt(ne);q=(q<<5)-q+oe|0}return q},d=function(L){return L-=L>>1&1431655765,L=(L&858993459)+(L>>2&858993459),L=L+(L>>4)&252645135,L+=L>>8,L+=L>>16,L&127},p=function(L,q){return q>>>L&s},_=function(L){return 1<<L},y=function(L,q){return d(L&q-1)},E=function(L,q,ne,ee){var oe=ee;if(!L){var fe=ee.length;oe=new Array(fe);for(var pe=0;pe<fe;++pe)oe[pe]=ee[pe]}return oe[q]=ne,oe},b=function(L,q,ne){var ee=ne.length-1,oe=0,fe=0,pe=ne;if(L)oe=fe=q;else for(pe=new Array(ee);oe<q;)pe[fe++]=ne[oe++];for(++oe;oe<=ee;)pe[fe++]=ne[oe++];return L&&(pe.length=ee),pe},R=function(L,q,ne,ee){var oe=ee.length;if(L){for(var fe=oe;fe>=q;)ee[fe--]=ee[fe];return ee[q]=ne,ee}for(var pe=0,_e=0,Re=new Array(oe+1);pe<q;)Re[_e++]=ee[pe++];for(Re[q]=ne;pe<oe;)Re[++_e]=ee[pe++];return Re},g=1,I=2,M=3,z=4,P={__hamt_isEmpty:!0},S=function(L){return L===P||L&&L.__hamt_isEmpty},v=function(L,q,ne,ee){return{type:g,edit:L,hash:q,key:ne,value:ee,_modify:J}},T=function(L,q,ne){return{type:I,edit:L,hash:q,children:ne,_modify:de}},A=function(L,q,ne){return{type:M,edit:L,mask:q,children:ne,_modify:Z}},k=function(L,q,ne){return{type:z,edit:L,size:q,children:ne,_modify:le}},D=function(L){return L===P||L.type===g||L.type===I},C=function(L,q,ne,ee,oe){for(var fe=[],pe=ee,_e=0,Re=0;pe;++Re)pe&1&&(fe[Re]=oe[_e++]),pe>>>=1;return fe[q]=ne,k(L,_e+1,fe)},Ae=function(L,q,ne,ee){for(var oe=new Array(q-1),fe=0,pe=0,_e=0,Re=ee.length;_e<Re;++_e)if(_e!==ne){var Je=ee[_e];Je&&!S(Je)&&(oe[fe++]=Je,pe|=1<<_e)}return A(L,pe,oe)},Nt=function F(L,q,ne,ee,oe,fe){if(ne===oe)return T(L,ne,[fe,ee]);var pe=p(q,ne),_e=p(q,oe);return A(L,_(pe)|_(_e),pe===_e?[F(L,q+r,ne,ee,oe,fe)]:pe<_e?[ee,fe]:[fe,ee])},St=function(L,q,ne,ee,oe,fe,pe,_e){for(var Re=oe.length,Je=0;Je<Re;++Je){var Vt=oe[Je];if(ne(pe,Vt.key)){var vt=Vt.value,bt=fe(vt);return bt===vt?oe:bt===l?(--_e.value,b(L,Je,oe)):E(L,Je,v(q,ee,pe,bt),oe)}}var Ht=fe();return Ht===l?oe:(++_e.value,E(L,Re,v(q,ee,pe,Ht),oe))},Le=function(L,q){return L===q.edit},J=function(L,q,ne,ee,oe,fe,pe){if(q(fe,this.key)){var _e=ee(this.value);return _e===this.value?this:_e===l?(--pe.value,P):Le(L,this)?(this.value=_e,this):v(L,oe,fe,_e)}var Re=ee();return Re===l?this:(++pe.value,Nt(L,ne,this.hash,this,oe,v(L,oe,fe,Re)))},de=function(L,q,ne,ee,oe,fe,pe){if(oe===this.hash){var _e=Le(L,this),Re=St(_e,L,q,this.hash,this.children,ee,fe,pe);return Re===this.children?this:Re.length>1?T(L,this.hash,Re):Re[0]}var Je=ee();return Je===l?this:(++pe.value,Nt(L,ne,this.hash,this,oe,v(L,oe,fe,Je)))},Z=function(L,q,ne,ee,oe,fe,pe){var _e=this.mask,Re=this.children,Je=p(ne,oe),Vt=_(Je),vt=y(_e,Vt),bt=_e&Vt,Ht=bt?Re[vt]:P,wt=Ht._modify(L,q,ne+r,ee,oe,fe,pe);if(Ht===wt)return this;var li=Le(L,this),N=_e,x=void 0;if(bt&&S(wt)){if(N&=~Vt,!N)return P;if(Re.length<=2&&D(Re[vt^1]))return Re[vt^1];x=b(li,vt,Re)}else if(!bt&&!S(wt)){if(Re.length>=o)return C(L,Je,wt,_e,Re);N|=Vt,x=R(li,vt,wt,Re)}else x=E(li,vt,wt,Re);return li?(this.mask=N,this.children=x,this):A(L,N,x)},le=function(L,q,ne,ee,oe,fe,pe){var _e=this.size,Re=this.children,Je=p(ne,oe),Vt=Re[Je],vt=(Vt||P)._modify(L,q,ne+r,ee,oe,fe,pe);if(Vt===vt)return this;var bt=Le(L,this),Ht=void 0;if(S(Vt)&&!S(vt))++_e,Ht=E(bt,Je,vt,Re);else if(!S(Vt)&&S(vt)){if(--_e,_e<=a)return Ae(L,_e,Je,Re);Ht=E(bt,Je,P,Re)}else Ht=E(bt,Je,vt,Re);return bt?(this.size=_e,this.children=Ht,this):k(L,_e,Ht)};P._modify=function(F,L,q,ne,ee,oe,fe){var pe=ne();return pe===l?P:(++fe.value,v(F,ee,oe,pe))};function O(F,L,q,ne,ee){this._editable=F,this._edit=L,this._config=q,this._root=ne,this._size=ee}O.prototype.setTree=function(F,L){return this._editable?(this._root=F,this._size=L,this):F===this._root?this:new O(this._editable,this._edit,this._config,F,L)};var H=n.tryGetHash=function(F,L,q,ne){for(var ee=ne._root,oe=0,fe=ne._config.keyEq;;)switch(ee.type){case g:return fe(q,ee.key)?ee.value:F;case I:{if(L===ee.hash)for(var pe=ee.children,_e=0,Re=pe.length;_e<Re;++_e){var Je=pe[_e];if(fe(q,Je.key))return Je.value}return F}case M:{var Vt=p(oe,L),vt=_(Vt);if(ee.mask&vt){ee=ee.children[y(ee.mask,vt)],oe+=r;break}return F}case z:{if(ee=ee.children[p(oe,L)],ee){oe+=r;break}return F}default:return F}};O.prototype.tryGetHash=function(F,L,q){return H(F,L,q,this)};var Q=n.tryGet=function(F,L,q){return H(F,q._config.hash(L),L,q)};O.prototype.tryGet=function(F,L){return Q(F,L,this)};var ce=n.getHash=function(F,L,q){return H(void 0,F,L,q)};O.prototype.getHash=function(F,L){return ce(F,L,this)},n.get=function(F,L){return H(void 0,L._config.hash(F),F,L)},O.prototype.get=function(F,L){return Q(L,F,this)};var ie=n.has=function(F,L,q){return H(l,F,L,q)!==l};O.prototype.hasHash=function(F,L){return ie(F,L,this)};var Te=n.has=function(F,L){return ie(L._config.hash(F),F,L)};O.prototype.has=function(F){return Te(F,this)};var Ne=function(L,q){return L===q};n.make=function(F){return new O(0,0,{keyEq:F&&F.keyEq||Ne,hash:F&&F.hash||h},P,0)},n.empty=n.make();var ge=n.isEmpty=function(F){return F&&!!S(F._root)};O.prototype.isEmpty=function(){return ge(this)};var Ye=n.modifyHash=function(F,L,q,ne){var ee={value:ne._size},oe=ne._root._modify(ne._editable?ne._edit:NaN,ne._config.keyEq,0,F,L,q,ee);return ne.setTree(oe,ee.value)};O.prototype.modifyHash=function(F,L,q){return Ye(q,F,L,this)};var ot=n.modify=function(F,L,q){return Ye(F,q._config.hash(L),L,q)};O.prototype.modify=function(F,L){return ot(L,F,this)};var Se=n.setHash=function(F,L,q,ne){return Ye(c(q),F,L,ne)};O.prototype.setHash=function(F,L,q){return Se(F,L,q,this)};var Be=n.set=function(F,L,q){return Se(q._config.hash(F),F,L,q)};O.prototype.set=function(F,L){return Be(F,L,this)};var Yt=c(l),Yn=n.removeHash=function(F,L,q){return Ye(Yt,F,L,q)};O.prototype.removeHash=O.prototype.deleteHash=function(F,L){return Yn(F,L,this)};var Rt=n.remove=function(F,L){return Yn(L._config.hash(F),F,L)};O.prototype.remove=O.prototype.delete=function(F){return Rt(F,this)};var sn=n.beginMutation=function(F){return new O(F._editable+1,F._edit+1,F._config,F._root,F._size)};O.prototype.beginMutation=function(){return sn(this)};var Vo=n.endMutation=function(F){return F._editable=F._editable&&F._editable-1,F};O.prototype.endMutation=function(){return Vo(this)};var xs=n.mutate=function(F,L){var q=sn(L);return F(q),Vo(q)};O.prototype.mutate=function(F){return xs(F,this)};var ai=function(L){return L&&Ds(L[0],L[1],L[2],L[3],L[4])},Ds=function(L,q,ne,ee,oe){for(;ne<L;){var fe=q[ne++];if(fe&&!S(fe))return Fo(fe,ee,[L,q,ne,ee,oe])}return ai(oe)},Fo=function(L,q,ne){switch(L.type){case g:return{value:q(L),rest:ne};case I:case z:case M:var ee=L.children;return Ds(ee.length,ee,0,q,ne);default:return ai(ne)}},Ls={done:!0};function Xn(F){this.v=F}Xn.prototype.next=function(){if(!this.v)return Ls;var F=this.v;return this.v=ai(F.rest),F},Xn.prototype[Symbol.iterator]=function(){return this};var hr=function(L,q){return new Xn(Fo(L._root,q))},Ot=function(L){return[L.key,L.value]},Mt=n.entries=function(F){return hr(F,Ot)};O.prototype.entries=O.prototype[Symbol.iterator]=function(){return Mt(this)};var Nn=function(L){return L.key},Mn=n.keys=function(F){return hr(F,Nn)};O.prototype.keys=function(){return Mn(this)};var Os=function(L){return L.value},Oi=n.values=O.prototype.values=function(F){return hr(F,Os)};O.prototype.values=function(){return Oi(this)};var $r=n.fold=function(F,L,q){var ne=q._root;if(ne.type===g)return F(L,ne.value,ne.key);for(var ee=[ne.children],oe=void 0;oe=ee.pop();)for(var fe=0,pe=oe.length;fe<pe;){var _e=oe[fe++];_e&&_e.type&&(_e.type===g?L=F(L,_e.value,_e.key):ee.push(_e.children))}return L};O.prototype.fold=function(F,L){return $r(F,L,this)};var Jn=n.forEach=function(F,L){return $r(function(q,ne,ee){return F(ne,ee,L)},null,L)};O.prototype.forEach=function(F){return Jn(F,this)};var Ms=n.count=function(F){return F._size};O.prototype.count=function(){return Ms(this)},Object.defineProperty(O.prototype,"size",{get:O.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class M9{constructor(e){De(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return wv(this)}toMap(){return new Map(this._map)}}class vv{constructor(e){if(De(this,"_hamt",O9.empty.beginMutation()),e instanceof vv){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return wv(this)}toMap(){return new Map(this._hamt)}}function wv(t){return st("recoil_hamt_2020")?new vv(t):new M9(t)}var V9={persistentMap:wv},F9=V9.persistentMap,U9=Object.freeze({__proto__:null,persistentMap:F9});function j9(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var gu=j9;function $9(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Fd=$9;function B9(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function z9(t){return{nodeDeps:Fd(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Fd(t.nodeToNodeSubscriptions,e=>new Set(e))}}function am(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:gu(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Tt(s.get(l)).add(t);if(o){const l=gu(o,e);for(const c of l){if(!s.has(c))return;const h=Tt(s.get(c));h.delete(t),h.size===0&&s.delete(c)}}}function W9(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(am(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);am(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var h;const d=(h=l.nextTree)===null||h===void 0?void 0:h.version;if(d!==void 0){const p=n.getGraph(d);am(t,e,p,c)}}}var Ic={cloneGraph:z9,graph:B9,saveDepsToStore:W9};let H9=0;const q9=()=>H9++;let K9=0;const G9=()=>K9++;let Q9=0;const Y9=()=>Q9++;var Uf={getNextTreeStateVersion:q9,getNextStoreID:G9,getNextComponentID:Y9};const{persistentMap:UT}=U9,{graph:X9}=Ic,{getNextTreeStateVersion:Qk}=Uf;function Yk(){const t=Qk();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:UT(),nonvalidatedAtoms:UT()}}function J9(){const t=Yk();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,X9()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Xk={makeEmptyTreeState:Yk,makeEmptyStoreState:J9,getNextTreeStateVersion:Qk};class Jk{}function Z9(){return new Jk}var jf={RetentionZone:Jk,retentionZone:Z9};function ez(t,e){const n=new Set(t);return n.add(e),n}function tz(t,e){const n=new Set(t);return n.delete(e),n}function nz(t,e,n){const r=new Map(t);return r.set(e,n),r}function rz(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function iz(t,e){const n=new Map(t);return n.delete(e),n}function sz(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var Zk={setByAddingToSet:ez,setByDeletingFromSet:tz,mapBySettingInMap:nz,mapByUpdatingInMap:rz,mapByDeletingFromMap:iz,mapByDeletingMultipleFromMap:sz};function*oz(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var Ev=oz;function az(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var eP=az;const{getNode:Cc,getNodeMaybe:lz,recoilValuesForKeys:jT}=Qn,{RetentionZone:$T}=jf,{setByAddingToSet:uz}=Zk,cz=Object.freeze(new Set);class hz extends Error{}function dz(t,e,n){if(!st("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof $T)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!st("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof $T)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function Tv(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Cc(n),o=dz(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function fz(t,e,n){Tv(t,t.getState().currentTree,e,n)}function pz(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function mz(t,e,n){return Tv(t,e,n,"get"),Cc(n).get(t,e)}function tP(t,e,n){return Cc(n).peek(t,e)}function gz(t,e,n){var r;const i=lz(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:uz(t.dirtyAtoms,e)}}function _z(t,e,n,r){const i=Cc(n);if(i.set==null)throw new hz(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return Tv(t,e,n,"set"),s(t,e,r)}function yz(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Cc(n).nodeType;return eP({type:s},{loadable:()=>tP(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return jT((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:jT(Ev(nP(t,e,new Set([n])),l=>l!==n)),components:Ff((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function nP(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:cz;for(const c of l)r.has(c)||i.push(c)}return r}var Ns={getNodeLoadable:mz,peekNodeLoadable:tP,setNodeValue:_z,initializeNode:fz,cleanUpNode:pz,setUnvalidatedAtomValue_DEPRECATED:gz,peekNodeInfo:yz,getDownstreamNodes:nP};let rP=null;function vz(t){rP=t}function wz(){var t;(t=rP)===null||t===void 0||t()}var iP={setInvalidateMemoizedSnapshot:vz,invalidateMemoizedSnapshot:wz};const{getDownstreamNodes:Ez,getNodeLoadable:sP,setNodeValue:Tz}=Ns,{getNextComponentID:Sz}=Uf,{getNode:Rz,getNodeMaybe:oP}=Qn,{DefaultValue:Sv}=Qn,{reactMode:Iz}=Rc,{AbstractRecoilValue:Cz,RecoilState:Az,RecoilValueReadOnly:kz,isRecoilValue:Pz}=Wa,{invalidateMemoizedSnapshot:Nz}=iP;function bz(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=sP(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function xz(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Sv?n.delete(i):n.set(i,r)}),n}function Dz(t,e,{key:n},r){if(typeof r=="function"){const i=sP(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Oe(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function Lz(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=Dz(t,e,i,s),a=Tz(t,e,i.key,o);for(const[l,c]of a.entries())qg(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;qg(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=oP(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else gv(`Unknown action ${n.type}`)}function qg(t,e,n){n.state==="hasValue"&&n.contents instanceof Sv?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function aP(t,e){t.replaceState(n=>{const r=lP(n);for(const i of e)Lz(t,r,i);return uP(t,r),Nz(),r})}function $f(t,e){if(_u.length){const n=_u[_u.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else aP(t,[e])}const _u=[];function Oz(){const t=new Map;return _u.push(t),()=>{for(const[e,n]of t)aP(e,n);_u.pop()}}function lP(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function uP(t,e){const n=Ez(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=oP(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function cP(t,e,n){$f(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function Mz(t,e,n){if(n instanceof Sv)return cP(t,e,n);$f(t,{type:"setLoadable",recoilValue:e,loadable:n})}function Vz(t,e){$f(t,{type:"markModified",recoilValue:e})}function Fz(t,e,n){$f(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function Uz(t,{key:e},n,r=null){const i=Sz(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Tt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=Iz();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function jz(t,e){var n;const{currentTree:r}=t.getState(),i=Rz(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var si={RecoilValueReadOnly:kz,AbstractRecoilValue:Cz,RecoilState:Az,getRecoilValueAsLoadable:bz,setRecoilValue:cP,setRecoilValueLoadable:Mz,markRecoilValueModified:Vz,setUnvalidatedRecoilValue:Fz,subscribeToRecoilValue:Uz,isRecoilValue:Pz,applyAtomValueWrites:xz,batchStart:Oz,writeLoadableToTreeState:qg,invalidateDownstreams:uP,copyTreeState:lP,refreshRecoilValue:jz};function $z(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var Bz=$z;const{cleanUpNode:zz}=Ns,{deleteNodeConfigIfPossible:Wz,getNode:hP}=Qn,{RetentionZone:dP}=jf,Hz=12e4,fP=new Set;function pP(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof dP)for(const a of Qz(n,o))i.add(a);else i.add(o);const s=qz(t,i);for(const o of s)Gz(t,r,o)}function qz(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,h=Kz(t,r,l,s,o);for(const y of h){var d;if(hP(y).retainedBy==="recoilRoot"){o.add(y);continue}if(((d=n.retention.referenceCounts.get(y))!==null&&d!==void 0?d:0)>0){o.add(y);continue}if(mP(y).some(b=>n.retention.referenceCounts.get(b))){o.add(y);continue}const E=i.nodeToNodeSubscriptions.get(y);if(E&&Bz(E,b=>o.has(b))){o.add(y);continue}s.add(y),c.add(y)}const p=new Set;for(const y of c)for(const E of(_=i.nodeDeps.get(y))!==null&&_!==void 0?_:fP){var _;s.has(E)||p.add(E)}p.size&&a(p)}}function Kz(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Tt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const h=s.nodeToNodeSubscriptions.get(c);if(h)for(const d of h)l(d);a.add(c),n.delete(c),o.push(c)}}function Gz(t,e,n){if(!st("recoil_memory_managament_2020"))return;zz(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=mP(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}Wz(n)}function Qz(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:fP}function mP(t){const e=hP(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof dP?[e]:e}function Yz(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):pP(t,new Set([e]))}function Xz(t,e,n){var r;if(!st("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?gP(t,e):i.set(e,s)}function gP(t,e){if(!st("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),Yz(t,e)}function Jz(t){if(!st("recoil_memory_managament_2020"))return;const e=t.getState();pP(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function Zz(t){return t===void 0?"recoilRoot":t}var Oo={SUSPENSE_TIMEOUT_MS:Hz,updateRetainCount:Xz,updateRetainCountToZero:gP,releaseScheduledRetainablesNow:Jz,retainedByOptionWithDefault:Zz};const{unstable_batchedUpdates:e6}=EI;var t6={unstable_batchedUpdates:e6};const{unstable_batchedUpdates:n6}=t6;var r6={unstable_batchedUpdates:n6};const{batchStart:i6}=si,{unstable_batchedUpdates:s6}=r6;let Rv=s6||(t=>t());const o6=t=>{Rv=t},a6=()=>Rv,l6=t=>{Rv(()=>{let e=()=>{};try{e=i6(),t()}finally{e()}})};var Bf={getBatcher:a6,setBatcher:o6,batchUpdates:l6};function*u6(t){for(const e of t)for(const n of e)yield n}var _P=u6;const yP=typeof Window>"u"||typeof window>"u",c6=t=>!yP&&(t===window||t instanceof Window),h6=typeof navigator<"u"&&navigator.product==="ReactNative";var zf={isSSR:yP,isReactNative:h6,isWindow:c6};function d6(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function f6(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function p6(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var m6={memoizeWithArgsHash:d6,memoizeOneWithArgsHash:f6,memoizeOneWithArgsHashAndInvalidation:p6};const{batchUpdates:Kg}=Bf,{initializeNode:g6,peekNodeInfo:_6}=Ns,{graph:y6}=Ic,{getNextStoreID:v6}=Uf,{DEFAULT_VALUE:w6,recoilValues:BT,recoilValuesForKeys:zT}=Qn,{AbstractRecoilValue:E6,getRecoilValueAsLoadable:T6,setRecoilValue:WT,setUnvalidatedRecoilValue:S6}=si,{updateRetainCount:Vh}=Oo,{setInvalidateMemoizedSnapshot:R6}=iP,{getNextTreeStateVersion:I6,makeEmptyStoreState:C6}=Xk,{isSSR:A6}=zf,{memoizeOneWithArgsHashAndInvalidation:k6}=m6;class Wf{constructor(e,n){De(this,"_store",void 0),De(this,"_refCount",1),De(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),T6(this._store,r))),De(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),De(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return zT(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?BT.values():r.isInitialized===!0?zT(_P([i,s])):Ev(BT.values(),({key:o})=>!i.has(o)&&!s.has(o))}),De(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),_6(this._store,this._store.getState().currentTree,r))),De(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Gg(this,Kg);return r(i),i}),De(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Gg(this,Kg);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:v6(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Tt(i.get(r));const s=y6();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Oe("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)g6(this._store,r,"get"),Vh(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){A6||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!st("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){st("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function vP(t,e,n=!1){const r=t.getState(),i=n?I6():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Ff(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function P6(t){const e=new Wf(C6());return t!=null?e.map(t):e}const[HT,wP]=k6((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Tt(r.previousTree);return new Wf(vP(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});R6(wP);function N6(t,e="latest"){const n=HT(t,e);return n.isRetained()?n:(wP(),HT(t,e))}class Gg extends Wf{constructor(e,n){super(vP(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),De(this,"_batch",void 0),De(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Vh(s,r.key,1),WT(this.getStore_INTERNAL(),r,i)})}),De(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Vh(i,r.key,1),WT(this.getStore_INTERNAL(),r,w6)})}),De(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Kg(()=>{for(const[s,o]of r.entries())Vh(i,s,1),S6(i,new E6(s),o)})}),this._batch=n}}var Hf={Snapshot:Wf,MutableSnapshot:Gg,freshSnapshot:P6,cloneSnapshot:N6},b6=Hf.Snapshot,x6=Hf.MutableSnapshot,D6=Hf.freshSnapshot,L6=Hf.cloneSnapshot,qf=Object.freeze({__proto__:null,Snapshot:b6,MutableSnapshot:x6,freshSnapshot:D6,cloneSnapshot:L6});function O6(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var M6=O6;const{useRef:V6}=ut;function F6(t){const e=V6(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var qT=F6;const{getNextTreeStateVersion:U6,makeEmptyStoreState:EP}=Xk,{cleanUpNode:j6,getDownstreamNodes:$6,initializeNode:B6,setNodeValue:z6,setUnvalidatedAtomValue_DEPRECATED:W6}=Ns,{graph:H6}=Ic,{cloneGraph:q6}=Ic,{getNextStoreID:TP}=Uf,{createMutableSource:lm,reactMode:SP}=Rc,{applyAtomValueWrites:K6}=si,{releaseScheduledRetainablesNow:RP}=Oo,{freshSnapshot:G6}=qf,{useCallback:Q6,useContext:IP,useEffect:Qg,useMemo:Y6,useRef:X6,useState:J6}=ut;function Ll(){throw Oe("This component must be used inside a <RecoilRoot> component.")}const CP=Object.freeze({storeID:TP(),getState:Ll,replaceState:Ll,getGraph:Ll,subscribeToTransactions:Ll,addTransactionMetadata:Ll});let Yg=!1;function KT(t){if(Yg)throw Oe("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){st("recoil_memory_managament_2020")&&st("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&RP(t);const n=e.currentTree.version,r=U6();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,q6(Tt(e.graphsByVersion.get(n))))}}const AP=ut.createContext({current:CP}),Kf=()=>IP(AP),kP=ut.createContext(null);function Z6(){return IP(kP)}function Iv(t,e,n){const r=$6(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function PP(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!SP().early||e.suspendedComponentResolvers.size>0)&&(Iv(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function e5(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,PP(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):gv("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,st("recoil_memory_managament_2020")&&n==null&&RP(t)}finally{e.commitDepth--}}function t5({setNotifyBatcherOfChange:t}){const e=Kf(),[,n]=J6([]);return t(()=>n({})),Qg(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Qg(()=>{D9.enqueueExecution("Batcher",()=>{e5(e.current)})}),null}function n5(t,e){const n=EP();return e({set:(r,i)=>{const s=n.currentTree,o=z6(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:M6(s.dirtyAtoms,a),atomValues:K6(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=W6(n.currentTree,s,i)})}}),n}function r5(t){const e=G6(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let GT=0;function i5({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=_=>{const y=i.current.graphsByVersion;if(y.has(_))return Tt(y.get(_));const E=H6();return y.set(_,E),E},o=(_,y)=>{if(y==null){const{transactionSubscriptions:E}=d.current.getState(),b=GT++;return E.set(b,_),{release:()=>{E.delete(b)}}}else{const{nodeTransactionSubscriptions:E}=d.current.getState();E.has(y)||E.set(y,new Map);const b=GT++;return Tt(E.get(y)).set(b,_),{release:()=>{const R=E.get(y);R&&(R.delete(b),R.size===0&&E.delete(y))}}}},a=_=>{KT(d.current);for(const y of Object.keys(_))Tt(d.current.getState().nextTree).transactionMetadata[y]=_[y]},l=_=>{KT(d.current);const y=Tt(i.current.nextTree);let E;try{Yg=!0,E=_(y)}finally{Yg=!1}E!==y&&(i.current.nextTree=E,SP().early&&Iv(d.current,i.current,E),Tt(c.current)())},c=X6(null),h=Q6(_=>{c.current=_},[c]),d=qT(()=>n??{storeID:TP(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=qT(()=>t!=null?n5(d.current,t):e!=null?r5(e):EP());const p=Y6(()=>lm==null?void 0:lm(i,()=>i.current.currentTree.version),[i]);return Qg(()=>{const _=d.current;for(const y of new Set(_.getState().knownAtoms))B6(_,y,"get");return()=>{for(const y of _.getState().knownAtoms)j6(_,y)}},[d]),ut.createElement(AP.Provider,{value:d},ut.createElement(kP.Provider,{value:p},ut.createElement(t5,{setNotifyBatcherOfChange:h}),r))}function s5(t){const{override:e,...n}=t,r=Kf();return e===!1&&r.current!==CP?t.children:ut.createElement(i5,n)}function o5(){return Kf().current.storeID}var Li={RecoilRoot:s5,useStoreRef:Kf,useRecoilMutableSource:Z6,useRecoilStoreID:o5,notifyComponents_FOR_TESTING:Iv,sendEndOfBatchNotifications_FOR_TESTING:PP};function a5(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var l5=a5;const{useEffect:u5,useRef:c5}=ut;function h5(t){const e=c5();return u5(()=>{e.current=t}),e.current}var NP=h5;const{useStoreRef:d5}=Li,{SUSPENSE_TIMEOUT_MS:f5}=Oo,{updateRetainCount:Ol}=Oo,{RetentionZone:p5}=jf,{useEffect:m5,useRef:g5}=ut,{isSSR:QT}=zf;function _5(t){if(st("recoil_memory_managament_2020"))return y5(t)}function y5(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof p5?o:o.key),r=d5();m5(()=>{if(!st("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!QT)window.clearTimeout(i.current),i.current=null;else for(const a of n)Ol(o,a,1);return()=>{for(const a of n)Ol(o,a,-1)}},[r,...n]);const i=g5(),s=NP(n);if(!QT&&(s===void 0||!l5(s,n))){const o=r.current;for(const a of n)Ol(o,a,1);if(s)for(const a of s)Ol(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Ol(o,a,-1)},f5)}}var Cv=_5;function v5(){return"<component name not available>"}var Ac=v5;const{batchUpdates:w5}=Bf,{DEFAULT_VALUE:bP}=Qn,{currentRendererSupportsUseSyncExternalStore:E5,reactMode:ll,useMutableSource:T5,useSyncExternalStore:S5}=Rc,{useRecoilMutableSource:R5,useStoreRef:oi}=Li,{AbstractRecoilValue:Xg,getRecoilValueAsLoadable:kc,setRecoilValue:Ud,setUnvalidatedRecoilValue:I5,subscribeToRecoilValue:Ha}=si,{useCallback:Gn,useEffect:qa,useMemo:xP,useRef:yu,useState:Av}=ut,{setByAddingToSet:C5}=Zk,{isSSR:A5}=zf;function kv(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),A5&&gt(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Oe(`Invalid value of loadable atom "${e.key}"`)}function k5(){const t=Ac(),e=oi(),[,n]=Av([]),r=yu(new Set);r.current=new Set;const i=yu(new Set),s=yu(new Map),o=Gn(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Gn((l,c)=>{s.current.has(c)&&n([])},[]);return qa(()=>{const l=e.current;gu(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const h=Ha(l,new Xg(c),p=>a(p,c),t);s.current.set(c,h),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),gu(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),qa(()=>{const l=s.current;return gu(r.current,new Set(l.keys())).forEach(c=>{const h=Ha(e.current,new Xg(c),d=>a(d,c),t);l.set(c,h)}),()=>l.forEach((c,h)=>o(h))},[t,e,o,a]),xP(()=>{function l(y){return E=>{Ud(e.current,y,E)}}function c(y){return()=>Ud(e.current,y,bP)}function h(y){var E;r.current.has(y.key)||(r.current=C5(r.current,y.key));const b=e.current.getState();return kc(e.current,y,ll().early&&(E=b.nextTree)!==null&&E!==void 0?E:b.currentTree)}function d(y){const E=h(y);return kv(E,y,e)}function p(y){return[d(y),l(y)]}function _(y){return[h(y),l(y)]}return{getRecoilValue:d,getRecoilValueLoadable:h,getRecoilState:p,getRecoilStateLoadable:_,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const P5={current:0};function N5(t){const e=oi(),n=Ac(),r=Gn(()=>{var a;const l=e.current,c=l.getState(),h=ll().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:kc(l,t,h),key:t.key}},[e,t]),i=Gn(a=>{let l;return()=>{var c,h;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((h=l)===null||h===void 0?void 0:h.key)===d.key?l:(l=d,d)}},[]),s=xP(()=>i(r),[r,i]),o=Gn(a=>{const l=e.current;return Ha(l,t,a,n).release},[e,t,n]);return S5(o,s,s).loadable}function b5(t){const e=oi(),n=Gn(()=>{var c;const h=e.current,d=h.getState(),p=ll().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return kc(h,t,p)},[e,t]),r=Gn(()=>n(),[n]),i=Ac(),s=Gn((c,h)=>{const d=e.current;return Ha(d,t,()=>{if(!st("recoil_suppress_rerender_in_callback"))return h();const _=n();l.current.is(_)||h(),l.current=_},i).release},[e,t,i,n]),o=R5();if(o==null)throw Oe("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=T5(o,r,s),l=yu(a);return qa(()=>{l.current=a}),a}function Jg(t){const e=oi(),n=Ac(),r=Gn(()=>{var l;const c=e.current,h=c.getState(),d=ll().early&&(l=h.nextTree)!==null&&l!==void 0?l:h.currentTree;return kc(c,t,d)},[e,t]),i=Gn(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Gn(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);qa(()=>{const l=Ha(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=Av(i);return o.key!==t.key?i().loadable:o.loadable}function x5(t){const e=oi(),[,n]=Av([]),r=Ac(),i=Gn(()=>{var a;const l=e.current,c=l.getState(),h=ll().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return kc(l,t,h)},[e,t]),s=i(),o=yu(s);return qa(()=>{o.current=s}),qa(()=>{const a=e.current,l=a.getState(),c=Ha(a,t,d=>{var p;if(!st("recoil_suppress_rerender_in_callback"))return n([]);const _=i();(p=o.current)!==null&&p!==void 0&&p.is(_)||n(_),o.current=_},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var h;if(!st("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(h=o.current)!==null&&h!==void 0&&h.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function Pv(t){return st("recoil_memory_managament_2020")&&Cv(t),{TRANSITION_SUPPORT:Jg,SYNC_EXTERNAL_STORE:E5()?N5:Jg,MUTABLE_SOURCE:b5,LEGACY:x5}[ll().mode](t)}function DP(t){const e=oi(),n=Pv(t);return kv(n,t,e)}function Gf(t){const e=oi();return Gn(n=>{Ud(e.current,t,n)},[e,t])}function D5(t){const e=oi();return Gn(()=>{Ud(e.current,t,bP)},[e,t])}function L5(t){return[DP(t),Gf(t)]}function O5(t){return[Pv(t),Gf(t)]}function M5(){const t=oi();return(e,n={})=>{w5(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>I5(t.current,new Xg(i),r))})}}function LP(t){return st("recoil_memory_managament_2020")&&Cv(t),Jg(t)}function OP(t){const e=oi(),n=LP(t);return kv(n,t,e)}function V5(t){return[OP(t),Gf(t)]}var F5={recoilComponentGetRecoilValueCount_FOR_TESTING:P5,useRecoilInterface:k5,useRecoilState:L5,useRecoilStateLoadable:O5,useRecoilValue:DP,useRecoilValueLoadable:Pv,useResetRecoilState:D5,useSetRecoilState:Gf,useSetUnvalidatedAtomValues:M5,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:LP,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:OP,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:V5};function U5(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var j5=U5;function $5(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var B5=$5;function z5(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var W5=z5;const{batchUpdates:H5}=Bf,{DEFAULT_VALUE:q5,getNode:MP,nodes:K5}=Qn,{useStoreRef:Nv}=Li,{AbstractRecoilValue:G5,setRecoilValueLoadable:Q5}=si,{SUSPENSE_TIMEOUT_MS:Y5}=Oo,{cloneSnapshot:jd}=qf,{useCallback:Qf,useEffect:VP,useRef:YT,useState:X5}=ut,{isSSR:XT}=zf;function Yf(t){const e=Nv();VP(()=>e.current.subscribeToTransactions(t).release,[t,e])}function JT(t){const e=t.atomValues.toMap(),n=Fd(j5(e,(r,i)=>{const o=MP(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return W5(t.nonvalidatedAtoms.toMap(),n)}function J5(t){Yf(Qf(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=JT(r),s=JT(n),o=Fd(K5,l=>{var c,h,d,p;return{persistence_UNSTABLE:{type:(c=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.type)!==null&&c!==void 0?c:"none",backButton:(d=(p=l.persistence_UNSTABLE)===null||p===void 0?void 0:p.backButton)!==null&&d!==void 0?d:!1}}}),a=B5(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function Z5(t){Yf(Qf(e=>{const n=jd(e,"latest"),r=jd(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function eW(){const t=Nv(),[e,n]=X5(()=>jd(t.current)),r=NP(e),i=YT(),s=YT();if(Yf(Qf(a=>n(jd(a)),[])),VP(()=>{const a=e.retain();if(i.current&&!XT){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!XT){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},Y5)}return e}function FP(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;H5(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const h of c){var a,l;((a=i.atomValues.get(h))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(h))===null||l===void 0?void 0:l.contents)&&MP(h).shouldRestoreFromSnapshots&&o.add(h)}o.forEach(c=>{Q5(t,new G5(c),s.atomValues.has(c)?Tt(s.atomValues.get(c)):q5)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function tW(){const t=Nv();return Qf(e=>FP(t.current,e),[t])}var UP={useRecoilSnapshot:eW,gotoSnapshot:FP,useGotoRecoilSnapshot:tW,useRecoilTransactionObserver:Z5,useTransactionObservation_DEPRECATED:J5,useTransactionSubscription_DEPRECATED:Yf};const{peekNodeInfo:nW}=Ns,{useStoreRef:rW}=Li;function iW(){const t=rW();return({key:e})=>nW(t.current,t.current.getState().currentTree,e)}var sW=iW;const{reactMode:oW}=Rc,{RecoilRoot:aW,useStoreRef:lW}=Li,{useMemo:uW}=ut;function cW(){oW().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=lW().current;return uW(()=>{function e({children:n}){return ut.createElement(aW,{store_INTERNAL:t},n)}return e},[t])}var hW=cW;const{loadableWithValue:dW}=Sc,{initializeNode:fW}=Ns,{DEFAULT_VALUE:pW,getNode:mW}=Qn,{copyTreeState:gW,getRecoilValueAsLoadable:_W,invalidateDownstreams:yW,writeLoadableToTreeState:vW}=si;function ZT(t){return mW(t.key).nodeType==="atom"}class wW{constructor(e,n){De(this,"_store",void 0),De(this,"_treeState",void 0),De(this,"_changes",void 0),De(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!ZT(r))throw Oe("Reading selectors within atomicUpdate is not supported");const i=_W(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Oe(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),De(this,"set",(r,i)=>{if(!ZT(r))throw Oe("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else fW(this._store,r.key,"set"),this._changes.set(r.key,i)}),De(this,"reset",r=>{this.set(r,pW)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=gW(this._treeState);for(const[n,r]of this._changes)vW(e,n,dW(r));return yW(this._store,e),e}}function EW(t){return e=>{t.replaceState(n=>{const r=new wW(t,n);return e(r),r.newTreeState_INTERNAL()})}}var TW={atomicUpdater:EW},SW=TW.atomicUpdater,jP=Object.freeze({__proto__:null,atomicUpdater:SW});function RW(t,e){if(!t)throw new Error(e)}var IW=RW,Ql=IW;const{atomicUpdater:CW}=jP,{batchUpdates:AW}=Bf,{DEFAULT_VALUE:kW}=Qn,{useStoreRef:PW}=Li,{refreshRecoilValue:NW,setRecoilValue:eS}=si,{cloneSnapshot:bW}=qf,{gotoSnapshot:xW}=UP,{useCallback:DW}=ut;class $P{}const LW=new $P;function BP(t,e,n,r){let i=LW,s;if(AW(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Oe(a);const l=eP({...r??{},set:(h,d)=>eS(t,h,d),reset:h=>eS(t,h,kW),refresh:h=>NW(t,h),gotoSnapshot:h=>xW(t,h),transact_UNSTABLE:h=>CW(t)(h)},{snapshot:()=>{const h=bW(t);return s=h.retain(),h}}),c=e(l);if(typeof c!="function")throw Oe(a);i=c(...n)}),i instanceof $P&&Ql(!1),gt(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function OW(t,e){const n=PW();return DW((...r)=>BP(n.current,t,r),e!=null?[...e,n]:void 0)}var zP={recoilCallback:BP,useRecoilCallback:OW};const{useStoreRef:MW}=Li,{refreshRecoilValue:VW}=si,{useCallback:FW}=ut;function UW(t){const e=MW();return FW(()=>{const n=e.current;VW(n,t)},[t,e])}var jW=UW;const{atomicUpdater:$W}=jP,{useStoreRef:BW}=Li,{useMemo:zW}=ut;function WW(t,e){const n=BW();return zW(()=>(...r)=>{$W(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var HW=WW;class qW{constructor(e){De(this,"value",void 0),this.value=e}}var KW={WrappedValue:qW},GW=KW.WrappedValue,WP=Object.freeze({__proto__:null,WrappedValue:GW});const{isFastRefreshEnabled:QW}=Rc;class tS extends Error{}class YW{constructor(e){var n,r,i;De(this,"_name",void 0),De(this,"_numLeafs",void 0),De(this,"_root",void 0),De(this,"_onHit",void 0),De(this,"_onSet",void 0),De(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,h;for(const[b,R]of e){var d,p,_;const g=this._root;if((g==null?void 0:g.type)==="leaf")throw this.invalidCacheError();const I=c;if(c=I?I.branches.get(h):g,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:b,parent:I,branches:new Map,branchKey:h},c.type!=="branch"||c.nodeKey!==b)throw this.invalidCacheError();I==null||I.branches.set(h,c),r==null||(p=r.onNodeVisit)===null||p===void 0||p.call(r,c),h=this._mapNodeValue(R),this._root=(_=this._root)!==null&&_!==void 0?_:c}const y=c?(s=c)===null||s===void 0?void 0:s.branches.get(h):this._root;if(y!=null&&(y.type!=="leaf"||y.branchKey!==h))throw this.invalidCacheError();const E={type:"leaf",value:n,parent:c,branchKey:h};(o=c)===null||o===void 0||o.branches.set(h,E),this._root=(a=this._root)!==null&&a!==void 0?a:E,this._numLeafs++,this._onSet(E),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,E)};try{i()}catch(s){if(s instanceof tS)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=QW()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw gv(e+(this._name!=null?` - ${this._name}`:"")),new tS}}var XW={TreeCache:YW},JW=XW.TreeCache,HP=Object.freeze({__proto__:null,TreeCache:JW});class ZW{constructor(e){var n;De(this,"_maxSize",void 0),De(this,"_size",void 0),De(this,"_head",void 0),De(this,"_tail",void 0),De(this,"_map",void 0),De(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Tt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var eH={LRUCache:ZW},tH=eH.LRUCache,qP=Object.freeze({__proto__:null,LRUCache:tH});const{LRUCache:nH}=qP,{TreeCache:rH}=HP;function iH({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new nH({maxSize:e}),i=new rH({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var nS=iH;function Cr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Oe("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(gt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>Cr(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return Cr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:Cr(s,e)]=o;return Cr(i,e,n)}return t instanceof Set?Cr(Array.from(t).sort((i,s)=>Cr(i,e).localeCompare(Cr(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Cr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Cr(i,e)}:${Cr(t[i],e,i)}`).join(",")}}`}function sH(t,e={allowFunctions:!1}){return Cr(t,e)}var Xf=sH;const{TreeCache:oH}=HP,hh={equality:"reference",eviction:"keep-all",maxSize:1/0};function aH({equality:t=hh.equality,eviction:e=hh.eviction,maxSize:n=hh.maxSize}=hh,r){const i=lH(t);return uH(e,n,i,r)}function lH(t){switch(t){case"reference":return e=>e;case"value":return e=>Xf(e)}throw Oe(`Unrecognized equality policy ${t}`)}function uH(t,e,n,r){switch(t){case"keep-all":return new oH({name:r,mapNodeValue:n});case"lru":return nS({name:r,maxSize:Tt(e),mapNodeValue:n});case"most-recent":return nS({name:r,maxSize:1,mapNodeValue:n})}throw Oe(`Unrecognized eviction policy ${t}`)}var cH=aH;function hH(t){return()=>null}var dH={startPerfBlock:hH};const{isLoadable:fH,loadableWithError:dh,loadableWithPromise:pH,loadableWithValue:um}=Sc,{WrappedValue:KP}=WP,{getNodeLoadable:fh,peekNodeLoadable:mH,setNodeValue:gH}=Ns,{saveDepsToStore:_H}=Ic,{DEFAULT_VALUE:yH,getConfigDeletionHandler:vH,getNode:wH,registerNode:rS}=Qn,{isRecoilValue:EH}=Wa,{markRecoilValueModified:iS}=si,{retainedByOptionWithDefault:TH}=Oo,{recoilCallback:SH}=zP,{startPerfBlock:RH}=dH;class GP{}const Ml=new GP,Vl=[],ph=new Map,IH=(()=>{let t=0;return()=>t++})();function QP(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=cH(i??{equality:"reference",eviction:"keep-all"},n),l=TH(t.retainedBy_UNSTABLE),c=new Map;let h=0;function d(){return!st("recoil_memory_managament_2020")||h>0}function p(O){return O.getState().knownSelectors.add(n),h++,()=>{h--}}function _(){return vH(n)!==void 0&&!d()}function y(O,H,Q,ce,ie){St(H,ce,ie),E(O,Q)}function E(O,H){Ae(O,H)&&C(O),R(H,!0)}function b(O,H){Ae(O,H)&&(Tt(A(O)).stateVersions.clear(),R(H,!1))}function R(O,H){const Q=ph.get(O);if(Q!=null){for(const ce of Q)iS(ce,Tt(e));H&&ph.delete(O)}}function g(O,H){let Q=ph.get(H);Q==null&&ph.set(H,Q=new Set),Q.add(O)}function I(O,H,Q,ce,ie,Te){return H.then(Ne=>{if(!d())throw C(O),Ml;const ge=um(Ne);return y(O,Q,ie,ge,ce),Ne}).catch(Ne=>{if(!d())throw C(O),Ml;if(gt(Ne))return M(O,Ne,Q,ce,ie,Te);const ge=dh(Ne);throw y(O,Q,ie,ge,ce),Ne})}function M(O,H,Q,ce,ie,Te){return H.then(Ne=>{if(!d())throw C(O),Ml;Te.loadingDepKey!=null&&Te.loadingDepPromise===H?Q.atomValues.set(Te.loadingDepKey,um(Ne)):O.getState().knownSelectors.forEach(Se=>{Q.atomValues.delete(Se)});const ge=S(O,Q);if(ge&&ge.state!=="loading"){if((Ae(O,ie)||A(O)==null)&&E(O,ie),ge.state==="hasValue")return ge.contents;throw ge.contents}if(!Ae(O,ie)){const Se=T(O,Q);if(Se!=null)return Se.loadingLoadable.contents}const[Ye,ot]=P(O,Q,ie);if(Ye.state!=="loading"&&y(O,Q,ie,Ye,ot),Ye.state==="hasError")throw Ye.contents;return Ye.contents}).catch(Ne=>{if(Ne instanceof GP)throw Ml;if(!d())throw C(O),Ml;const ge=dh(Ne);throw y(O,Q,ie,ge,ce),Ne})}function z(O,H,Q,ce){var ie,Te,Ne,ge;if(Ae(O,ce)||H.version===((ie=O.getState())===null||ie===void 0||(Te=ie.currentTree)===null||Te===void 0?void 0:Te.version)||H.version===((Ne=O.getState())===null||Ne===void 0||(ge=Ne.nextTree)===null||ge===void 0?void 0:ge.version)){var Ye,ot,Se;_H(n,Q,O,(Ye=(ot=O.getState())===null||ot===void 0||(Se=ot.nextTree)===null||Se===void 0?void 0:Se.version)!==null&&Ye!==void 0?Ye:O.getState().currentTree.version)}for(const Be of Q)o.add(Be)}function P(O,H,Q){const ce=RH(n);let ie=!0,Te=!0;const Ne=()=>{ce(),Te=!1};let ge,Ye=!1,ot;const Se={loadingDepKey:null,loadingDepPromise:null},Be=new Map;function Yt({key:Rt}){const sn=fh(O,H,Rt);switch(Be.set(Rt,sn),ie||(z(O,H,new Set(Be.keys()),Q),b(O,Q)),sn.state){case"hasValue":return sn.contents;case"hasError":throw sn.contents;case"loading":throw Se.loadingDepKey=Rt,Se.loadingDepPromise=sn.contents,sn.contents}throw Oe("Invalid Loadable state")}const Yn=Rt=>(...sn)=>{if(Te)throw Oe("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Ql(!1),SH(O,Rt,sn,{node:e})};try{ge=r({get:Yt,getCallback:Yn}),ge=EH(ge)?Yt(ge):ge,fH(ge)&&(ge.state==="hasError"&&(Ye=!0),ge=ge.contents),gt(ge)?ge=I(O,ge,H,Be,Q,Se).finally(Ne):Ne(),ge=ge instanceof KP?ge.value:ge}catch(Rt){ge=Rt,gt(ge)?ge=M(O,ge,H,Be,Q,Se).finally(Ne):(Ye=!0,Ne())}return Ye?ot=dh(ge):gt(ge)?ot=pH(ge):ot=um(ge),ie=!1,D(O,Q,Be),z(O,H,new Set(Be.keys()),Q),[ot,Be]}function S(O,H){let Q=H.atomValues.get(n);if(Q!=null)return Q;const ce=new Set;try{Q=a.get(Te=>(typeof Te!="string"&&Ql(!1),fh(O,H,Te).contents),{onNodeVisit:Te=>{Te.type==="branch"&&Te.nodeKey!==n&&ce.add(Te.nodeKey)}})}catch(Te){throw Oe(`Problem with cache lookup for selector "${n}": ${Te.message}`)}if(Q){var ie;H.atomValues.set(n,Q),z(O,H,ce,(ie=A(O))===null||ie===void 0?void 0:ie.executionID)}return Q}function v(O,H){const Q=S(O,H);if(Q!=null)return C(O),Q;const ce=T(O,H);if(ce!=null){var ie;return((ie=ce.loadingLoadable)===null||ie===void 0?void 0:ie.state)==="loading"&&g(O,ce.executionID),ce.loadingLoadable}const Te=IH(),[Ne,ge]=P(O,H,Te);return Ne.state==="loading"?(k(O,Te,Ne,ge,H),g(O,Te)):(C(O),St(H,Ne,ge)),Ne}function T(O,H){const Q=_P([c.has(O)?[Tt(c.get(O))]:[],Ff(Ev(c,([ie])=>ie!==O),([,ie])=>ie)]);function ce(ie){for(const[Te,Ne]of ie)if(!fh(O,H,Te).is(Ne))return!0;return!1}for(const ie of Q){if(ie.stateVersions.get(H.version)||!ce(ie.depValuesDiscoveredSoFarDuringAsyncWork))return ie.stateVersions.set(H.version,!0),ie;ie.stateVersions.set(H.version,!1)}}function A(O){return c.get(O)}function k(O,H,Q,ce,ie){c.set(O,{depValuesDiscoveredSoFarDuringAsyncWork:ce,executionID:H,loadingLoadable:Q,stateVersions:new Map([[ie.version,!0]])})}function D(O,H,Q){if(Ae(O,H)){const ce=A(O);ce!=null&&(ce.depValuesDiscoveredSoFarDuringAsyncWork=Q)}}function C(O){c.delete(O)}function Ae(O,H){var Q;return H===((Q=A(O))===null||Q===void 0?void 0:Q.executionID)}function Nt(O){return Array.from(O.entries()).map(([H,Q])=>[H,Q.contents])}function St(O,H,Q){O.atomValues.set(n,H);try{a.set(Nt(Q),H)}catch(ce){throw Oe(`Problem with setting cache for selector "${n}": ${ce.message}`)}}function Le(O){if(Vl.includes(n)){const H=`Recoil selector has circular dependencies: ${Vl.slice(Vl.indexOf(n)).join("  ")}`;return dh(Oe(H))}Vl.push(n);try{return O()}finally{Vl.pop()}}function J(O,H){const Q=H.atomValues.get(n);return Q??a.get(ce=>{var ie;return typeof ce!="string"&&Ql(!1),(ie=mH(O,H,ce))===null||ie===void 0?void 0:ie.contents})}function de(O,H){return Le(()=>v(O,H))}function Z(O){O.atomValues.delete(n)}function le(O,H){e==null&&Ql(!1);for(const ce of o){var Q;const ie=wH(ce);(Q=ie.clearCache)===null||Q===void 0||Q.call(ie,O,H)}o.clear(),Z(H),a.clear(),iS(O,e)}return s!=null?e=rS({key:n,nodeType:"selector",peek:J,get:de,set:(H,Q,ce)=>{let ie=!1;const Te=new Map;function Ne({key:Se}){if(ie)throw Oe("Recoil: Async selector sets are not currently supported.");const Be=fh(H,Q,Se);if(Be.state==="hasValue")return Be.contents;if(Be.state==="loading"){const Yt=`Getting value of asynchronous atom or selector "${Se}" in a pending state while setting selector "${n}" is not yet supported.`;throw Oe(Yt)}else throw Be.contents}function ge(Se,Be){if(ie)throw Oe("Recoil: Async selector sets are not currently supported.");const Yt=typeof Be=="function"?Be(Ne(Se)):Be;gH(H,Q,Se.key,Yt).forEach((Rt,sn)=>Te.set(sn,Rt))}function Ye(Se){ge(Se,yH)}const ot=s({set:ge,get:Ne,reset:Ye},ce);if(ot!==void 0)throw gt(ot)?Oe("Recoil: Async selector sets are not currently supported."):Oe("Recoil: selector set should be a void function.");return ie=!0,Te},init:p,invalidate:Z,clearCache:le,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=rS({key:n,nodeType:"selector",peek:J,get:de,init:p,invalidate:Z,clearCache:le,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}QP.value=t=>new KP(t);var Ka=QP;const{isLoadable:CH,loadableWithError:cm,loadableWithPromise:hm,loadableWithValue:qo}=Sc,{WrappedValue:YP}=WP,{peekNodeInfo:AH}=Ns,{DEFAULT_VALUE:Ws,DefaultValue:Hi,getConfigDeletionHandler:XP,registerNode:kH,setConfigDeletionHandler:PH}=Qn,{isRecoilValue:NH}=Wa,{getRecoilValueAsLoadable:bH,markRecoilValueModified:xH,setRecoilValue:sS,setRecoilValueLoadable:DH}=si,{retainedByOptionWithDefault:LH}=Oo,Fl=t=>t instanceof YP?t.value:t;function OH(t){const{key:e,persistence_UNSTABLE:n}=t,r=LH(t.retainedBy_UNSTABLE);let i=0;function s(g){return hm(g.then(I=>(o=qo(I),I)).catch(I=>{throw o=cm(I),I}))}let o=gt(t.default)?s(t.default):CH(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:qo(Fl(t.default));o.contents;let a;const l=new Map;function c(g){return g}function h(g,I){const M=I.then(z=>{var P,S;return((S=((P=g.getState().nextTree)!==null&&P!==void 0?P:g.getState().currentTree).atomValues.get(e))===null||S===void 0?void 0:S.contents)===M&&sS(g,R,z),z}).catch(z=>{var P,S;throw((S=((P=g.getState().nextTree)!==null&&P!==void 0?P:g.getState().currentTree).atomValues.get(e))===null||S===void 0?void 0:S.contents)===M&&DH(g,R,cm(z)),z});return M}function d(g,I,M){var z;i++;const P=()=>{var A;i--,(A=l.get(g))===null||A===void 0||A.forEach(k=>k()),l.delete(g)};if(g.getState().knownAtoms.add(e),o.state==="loading"){const A=()=>{var k;((k=g.getState().nextTree)!==null&&k!==void 0?k:g.getState().currentTree).atomValues.has(e)||xH(g,R)};o.contents.finally(A)}const S=(z=t.effects)!==null&&z!==void 0?z:t.effects_UNSTABLE;if(S!=null){let A=function(Z){if(Ae&&Z.key===e){const le=C;return le instanceof Hi?p(g,I):gt(le)?hm(le.then(O=>O instanceof Hi?o.toPromise():O)):qo(le)}return bH(g,Z)},k=function(Z){return A(Z).toPromise()},D=function(Z){var le;const O=AH(g,(le=g.getState().nextTree)!==null&&le!==void 0?le:g.getState().currentTree,Z.key);return Ae&&Z.key===e&&!(C instanceof Hi)?{...O,isSet:!0,loadable:A(Z)}:O},C=Ws,Ae=!0,Nt=!1,St=null;const Le=Z=>le=>{if(Ae){const O=A(R),H=O.state==="hasValue"?O.contents:Ws;C=typeof le=="function"?le(H):le,gt(C)&&(C=C.then(Q=>(St={effect:Z,value:Q},Q)))}else{if(gt(le))throw Oe("Setting atoms to async values is not implemented.");typeof le!="function"&&(St={effect:Z,value:Fl(le)}),sS(g,R,typeof le=="function"?O=>{const H=Fl(le(O));return St={effect:Z,value:H},H}:Fl(le))}},J=Z=>()=>Le(Z)(Ws),de=Z=>le=>{var O;const{release:H}=g.subscribeToTransactions(Q=>{var ce;let{currentTree:ie,previousTree:Te}=Q.getState();Te||(Te=ie);const Ne=(ce=ie.atomValues.get(e))!==null&&ce!==void 0?ce:o;if(Ne.state==="hasValue"){var ge,Ye,ot,Se;const Be=Ne.contents,Yt=(ge=Te.atomValues.get(e))!==null&&ge!==void 0?ge:o,Yn=Yt.state==="hasValue"?Yt.contents:Ws;((Ye=St)===null||Ye===void 0?void 0:Ye.effect)!==Z||((ot=St)===null||ot===void 0?void 0:ot.value)!==Be?le(Be,Yn,!ie.atomValues.has(e)):((Se=St)===null||Se===void 0?void 0:Se.effect)===Z&&(St=null)}},e);l.set(g,[...(O=l.get(g))!==null&&O!==void 0?O:[],H])};for(const Z of S)try{const le=Z({node:R,storeID:g.storeID,parentStoreID_UNSTABLE:g.parentStoreID,trigger:M,setSelf:Le(Z),resetSelf:J(Z),onSet:de(Z),getPromise:k,getLoadable:A,getInfo_UNSTABLE:D});if(le!=null){var v;l.set(g,[...(v=l.get(g))!==null&&v!==void 0?v:[],le])}}catch(le){C=le,Nt=!0}if(Ae=!1,!(C instanceof Hi)){var T;const Z=Nt?cm(C):gt(C)?hm(h(g,C)):qo(Fl(C));Z.contents,I.atomValues.set(e,Z),(T=g.getState().nextTree)===null||T===void 0||T.atomValues.set(e,Z)}}return P}function p(g,I){var M,z;return(M=(z=I.atomValues.get(e))!==null&&z!==void 0?z:a)!==null&&M!==void 0?M:o}function _(g,I){if(I.atomValues.has(e))return Tt(I.atomValues.get(e));if(I.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const M=I.nonvalidatedAtoms.get(e),z=n.validator(M,Ws);return a=z instanceof Hi?o:qo(z),a}else return o}function y(){a=void 0}function E(g,I,M){if(I.atomValues.has(e)){const z=Tt(I.atomValues.get(e));if(z.state==="hasValue"&&M===z.contents)return new Map}else if(!I.nonvalidatedAtoms.has(e)&&M instanceof Hi)return new Map;return a=void 0,new Map().set(e,qo(M))}function b(){return XP(e)!==void 0&&i<=0}const R=kH({key:e,nodeType:"atom",peek:p,get:_,set:E,init:d,invalidate:y,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return R}function bv(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return NH(n)?MH({...e,default:n}):OH({...e,default:n})}function MH(t){const e=bv({...t,default:Ws,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Hi?r:Tt(t.persistence_UNSTABLE).validator(r,Ws)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Ka({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Hi?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return PH(n.key,XP(t.key)),n}bv.value=t=>new YP(t);var JP=bv;class VH{constructor(e){var n;De(this,"_map",void 0),De(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var FH={MapCache:VH},UH=FH.MapCache,jH=Object.freeze({__proto__:null,MapCache:UH});const{LRUCache:oS}=qP,{MapCache:$H}=jH,mh={equality:"reference",eviction:"none",maxSize:1/0};function BH({equality:t=mh.equality,eviction:e=mh.eviction,maxSize:n=mh.maxSize}=mh){const r=zH(t);return WH(e,n,r)}function zH(t){switch(t){case"reference":return e=>e;case"value":return e=>Xf(e)}throw Oe(`Unrecognized equality policy ${t}`)}function WH(t,e,n){switch(t){case"keep-all":return new $H({mapKey:n});case"lru":return new oS({mapKey:n,maxSize:Tt(e)});case"most-recent":return new oS({mapKey:n,maxSize:1})}throw Oe(`Unrecognized eviction policy ${t}`)}var ZP=BH;const{setConfigDeletionHandler:HH}=Qn;function qH(t){var e,n;const r=ZP({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,h="default"in t?t.default:new Promise(()=>{}),d=JP({...c,key:`${t.key}__${(s=Xf(i))!==null&&s!==void 0?s:"void"}`,default:typeof h=="function"?h(i):h,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),HH(d.key,()=>{r.delete(i)}),d}}var KH=qH;const{setConfigDeletionHandler:GH}=Qn;let QH=0;function YH(t){var e,n;const r=ZP({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(p){throw Oe(`Problem with cache lookup for selector ${t.key}: ${p.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=Xf(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${QH++}`,l=p=>t.get(i)(p),c=t.cachePolicy_UNSTABLE,h=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const p=t.set;d=Ka({key:a,get:l,set:(y,E)=>p(i)(y,E),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:h})}else d=Ka({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:h});return r.set(i,d),GH(d.key,()=>{r.delete(i)}),d}}var bs=YH;const XH=bs({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function JH(t){return XH(t)}var ZH=JH;const eq=bs({key:"__error",get:t=>()=>{throw Oe(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function tq(t){return eq(t)}var nq=tq;function rq(t){return t}var iq=rq;const{loadableWithError:eN,loadableWithPromise:tN,loadableWithValue:nN}=Sc;function Jf(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function sq(t){return t!=null&&!gt(t)}function Zf(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Zg(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function Sa(t,e,n){const r=n.map((i,s)=>i==null?nN(e[s]):gt(i)?tN(i):eN(i));return Zg(t,r)}function oq(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const aq=bs({key:"__waitForNone",get:t=>({get:e})=>{const n=Zf(t),[r,i]=Jf(e,n);return Sa(t,r,i)},dangerouslyAllowMutability:!0}),lq=bs({key:"__waitForAny",get:t=>({get:e})=>{const n=Zf(t),[r,i]=Jf(e,n);return i.some(s=>!gt(s))?Sa(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())gt(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(Sa(t,r,i))}).catch(l=>{i[o]=l,s(Sa(t,r,i))})})},dangerouslyAllowMutability:!0}),uq=bs({key:"__waitForAll",get:t=>({get:e})=>{const n=Zf(t),[r,i]=Jf(e,n);if(i.every(o=>o==null))return Zg(t,r);const s=i.find(sq);if(s!=null)throw s;return Promise.all(i).then(o=>Zg(t,oq(r,o)))},dangerouslyAllowMutability:!0}),cq=bs({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=Zf(t),[r,i]=Jf(e,n);return i.every(s=>!gt(s))?Sa(t,r,i):Promise.all(i.map((s,o)=>gt(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>Sa(t,r,i))},dangerouslyAllowMutability:!0}),hq=bs({key:"__noWait",get:t=>({get:e})=>{try{return Ka.value(nN(e(t)))}catch(n){return Ka.value(gt(n)?tN(n):eN(n))}},dangerouslyAllowMutability:!0});var dq={waitForNone:aq,waitForAny:lq,waitForAll:uq,waitForAllSettled:cq,noWait:hq};const{RecoilLoadable:fq}=Sc,{DefaultValue:pq}=Qn,{RecoilRoot:mq,useRecoilStoreID:gq}=Li,{isRecoilValue:_q}=Wa,{retentionZone:yq}=jf,{freshSnapshot:vq}=qf,{useRecoilState:wq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Eq,useRecoilStateLoadable:Tq,useRecoilValue:Sq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Rq,useRecoilValueLoadable:Iq,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Cq,useResetRecoilState:Aq,useSetRecoilState:kq}=F5,{useGotoRecoilSnapshot:Pq,useRecoilSnapshot:Nq,useRecoilTransactionObserver:bq}=UP,{useRecoilCallback:xq}=zP,{noWait:Dq,waitForAll:Lq,waitForAllSettled:Oq,waitForAny:Mq,waitForNone:Vq}=dq;var xv={DefaultValue:pq,isRecoilValue:_q,RecoilLoadable:fq,RecoilEnv:al,RecoilRoot:mq,useRecoilStoreID:gq,useRecoilBridgeAcrossReactRoots_UNSTABLE:hW,atom:JP,selector:Ka,atomFamily:KH,selectorFamily:bs,constSelector:ZH,errorSelector:nq,readOnlySelector:iq,noWait:Dq,waitForNone:Vq,waitForAny:Mq,waitForAll:Lq,waitForAllSettled:Oq,useRecoilValue:Sq,useRecoilValueLoadable:Iq,useRecoilState:wq,useRecoilStateLoadable:Tq,useSetRecoilState:kq,useResetRecoilState:Aq,useGetRecoilValueInfo_UNSTABLE:sW,useRecoilRefresher_UNSTABLE:jW,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Cq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Rq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Eq,useRecoilCallback:xq,useRecoilTransaction_UNSTABLE:HW,useGotoRecoilSnapshot:Pq,useRecoilSnapshot:Nq,useRecoilTransactionObserver_UNSTABLE:bq,snapshot_UNSTABLE:vq,useRetain:Cv,retentionZone:yq},Fq=xv.RecoilRoot,rN=xv.atom,Ur=xv.useRecoilState;const ep=rN({key:"userAtom",default:{}}),Uq=async()=>{const[t,e]=Ur(ep);B.useEffect(()=>{rn.onAuthStateChanged(async n=>{if(n){const r=jn($n,"Users",n.uid),i=await vs(r);i.exists()&&e(i.data())}})},[])},Mo=rN({key:"TasksAtom",default:[]}),jq=t=>{const e=Cs(),[n,r]=Ur(Mo);Uq();const[i,s]=Ur(ep),o=async()=>{await rn.signOut(),r([]),s({}),e("/REACT_VITE_TODOAPP/home")},[a,l]=B.useState();return B.useEffect(()=>{rn.onAuthStateChanged(c=>{l(c)})},[]),U.jsx(U.Fragment,{children:U.jsxs("div",{className:"header container m-auto md:p-5 lg:p-5 flex justify-between items-center py-2 px-2 md:px-10 md:py-5",children:[U.jsx(xa,{to:"/REACT_VITE_TODOAPP/",children:U.jsx("h2",{className:`${t.activeTextAnimation?"animateText":""} text-white`,style:{textShadow:t.activeTextAnimation?"":"1px 1px 3px white"},children:"TODO"})}),U.jsxs("div",{className:"flex items-center gap-2",children:[a?U.jsxs("button",{className:"BtnLogOut",onClick:o,children:[U.jsx("div",{className:"sign",children:U.jsx("svg",{viewBox:"0 0 512 512",children:U.jsx("path",{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"})})}),U.jsx("div",{className:"text",children:"Logout"})]}):U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home/login",className:"btn",style:{textAlign:"center",fontSize:"14px",padding:"5px 10px",height:"fit-content"},children:"Login"}),U.jsx("a",{href:"https://github.com/Elsayed-Rady-Elsayed",children:U.jsx("i",{className:"fa-brands fa-github text-gray-600 hover:text-white transition-all"})}),U.jsx("a",{href:"https://www.linkedin.com/in/elsayed-rady-elsayed-73b541288/",children:U.jsx("i",{className:"fa-brands fa-linkedin text-gray-600 hover:text-[#378fe9] transition-all"})})]})]})})},$q=t=>U.jsxs("div",{className:"onBoarding absolute left-1/2 top-1/2 p-5 text-center",style:{transform:"translate(-50%,-50%)"},children:[U.jsx("h1",{className:`text-white mb-4 py-2 ${t.activeTextAnimation?"animateText-lg":""} text-2xl md:text-4xl lg:text-4xl capitalize`,style:{},children:"start doing your tasks"}),U.jsx(VB,{title:"get started"})]}),Qr=t=>{const e=B.useRef(0),[n,r]=B.useState(""),i=s=>{e.current.style.borderColor=s};return t.setClicked&&n==""?i("red"):t.setClicked&&n.length>0&&i("#596A95"),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:t.name,children:t.placeholder}),U.jsx("input",{ref:e,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:t.name,placeholder:t.placeholder,className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:t.name,autoComplete:"off",type:t.type,value:n,onChange:s=>{s.target.value===""&&i("red"),t.name=="title"&&s.target.value.trim()===""&&i("red"),r(s.target.value),s.target.value.trim().length>0&&t.value(s)}})]})},iN=()=>U.jsx("div",{className:"container m-auto bg-[#121212]",children:U.jsx(uL,{})}),Bq=t=>{const e=B.useRef(0),[n,r]=B.useState(""),i=s=>{e.current.style.borderColor=s};return t.setClicked&&n==""?i("red"):t.setClicked&&n.length>0&&i("#596A95"),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:t.name,children:t.placeholder}),U.jsx("textarea",{ref:e,value:n,rows:"5",name:t.name,autoComplete:"off",placeholder:t.placeholder,id:t.name,style:{resize:"none",boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},onChange:s=>{s.target.value.trim()===""?i("red"):i("#596A95"),r(s.target.value),t.value(s)},className:"bg-[#222630] w-full px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]"})]})},sN=t=>U.jsxs(xa,{to:t.path,children:[U.jsx("i",{className:"fa-solid fa-arrow-left text-white"}),U.jsx("span",{className:"text-white ms-2",children:"back"})]}),tp=async()=>{const[t,e]=Ur(Mo);B.useEffect(()=>{rn.onAuthStateChanged(async n=>{if(n){const r=jn($n,"Users",n.uid),i=await vs(r);i.exists()&&e(s=>[...i.data().taskData])}else e([...JSON.parse(window.localStorage.getItem("tasks"))])})},[])},zq=()=>{tp();const[t,e]=B.useState(!1),[n,r]=Ur(Mo),[i,s]=B.useState(!1),[o,a]=B.useState();new Vk;const l=Cs(),[c,h]=B.useState({title:"",date:"",start:"",end:"",description:"",done:!1,pending:!1}),d=y=>{const{name:E,value:b}=y.target;h(R=>({...R,[E]:b}))};B.useEffect(()=>{rn.onAuthStateChanged(y=>{a(y)})},[]);const p=y=>{y.preventDefault(),rn.onAuthStateChanged(async E=>{E&&c.title.length>0&&c.date.length>0&&c.start.length>0&&c.end.length>0&&c.description.length>0?(await Yu(jn($n,"Users",E.uid),{taskData:[...n,c]}),l("/REACT_VITE_TODOAPP/home")):_()})},_=()=>{c.title.length>0&&c.date.length>0&&c.start.length>0&&c.end.length>0&&c.description.length>0?(s(!0),r(y=>[...y,c]),console.log(n),l("/REACT_VITE_TODOAPP/home")):s(!1)};return U.jsx("form",{onSubmit:p,className:"w-full absolute left-1/2 top-1/2 flex justify-center p-2 md:p-0",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[U.jsx(sN,{path:"/home"}),U.jsx(Qr,{setClicked:t,name:"title",placeholder:"Title",type:"text",value:d}),U.jsx(Qr,{setClicked:t,value:d,name:"date",placeholder:"date",type:"date"}),U.jsxs("div",{className:"time grid grid-cols-2 gap-2 w-full",children:[U.jsx(Qr,{setClicked:t,value:d,name:"start",placeholder:"start time",type:"time"}),U.jsx(Qr,{setClicked:t,value:d,name:"end",placeholder:"end time",type:"time"})," "]}),U.jsx(Bq,{setClicked:t,value:d,name:"description",placeholder:"description"}),U.jsx("button",{onClick:()=>{e(!0)},className:"btn w-full mt-2",children:"add task"})]})})},Wq=t=>{const e=Cs(),n=()=>{window.location.reload()},[r,i]=Ur(Mo),s=()=>{e(`/REACT_VITE_TODOAPP/home/eidtTask/${t.id}`)},o=l=>{rn.onAuthStateChanged(async c=>{if(c){let h=[];const d=jn($n,"Users",c.uid),p=await vs(d);p.exists()&&(h=[...p.data().taskData],h[t.id].done=!l),await Yu(jn($n,"Users",c.uid),{taskData:h}),e("/REACT_VITE_TODOAPP/home"),n()}else i(h=>h.map((d,p)=>p===t.id?{...d,done:!d.done}:d))})},a=()=>{rn.onAuthStateChanged(async l=>{if(l){let c=[];const h=jn($n,"Users",l.uid),d=await vs(h);d.exists()&&(c=[...d.data().taskData],c=c.filter((p,_)=>_!==t.id)),await Yu(jn($n,"Users",l.uid),{taskData:c}),e("/REACT_VITE_TODOAPP/home"),n()}else{let c=[];c=[...r],c=c.filter((h,d)=>d!==t.id),i(c)}})};return U.jsxs("div",{onClick:s,className:"relative overflow-hidden cursor-pointer container m-auto bg-[#222630] w-[100%] outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid hover:border-[#596A95] border-[#2B3040]",children:[U.jsxs("div",{className:"icons absolute end-2 flex z-30",children:[t.iSdone?U.jsx("i",{onClick:l=>{l.stopPropagation(),o(t.iSdone)},className:"fa-solid fa-circle-check text-green-400 py-3 px-2"}):U.jsx("i",{onClick:l=>{l.stopPropagation(),o(t.iSdone)},className:"text-green-400 fa-regular fa-circle-check py-3 px-2"}),U.jsx("i",{onClick:l=>{l.stopPropagation(),a()},className:"fa-regular fa-trash-can text-red-500 py-3 px-2"}),U.jsx("i",{onClick:l=>{l.stopPropagation(),t.iSdone||e(`/REACT_VITE_TODOAPP/home/timer/${t.id}`)},className:"fa-solid fa-stopwatch-20 text-yellow-500 py-3 px-2"})]}),t.iSdone?U.jsx("div",{className:"absolute w-full h-full bg-white/20 text-green-500 text-2xl font-bold flex items-center justify-center",children:"Done Task"}):"",U.jsx("h2",{className:"cursor-pointer capitalize text-2xl m-2",children:t.title}),U.jsx("p",{className:"text-gray-500 text-[12px] m-2",children:t.date}),U.jsxs("div",{className:"flex gap-5 m-2",children:[U.jsx("div",{className:"capitalize text-white text-[12px] ",children:U.jsxs("p",{children:["start : ",t.start]})}),U.jsx("div",{className:"capitalize text-white text-[12px]",children:U.jsxs("p",{children:["end : ",t.end]})})]}),U.jsx("p",{className:"text-[10px] mt-2 text-gray-400 truncate h-7 m-2",children:t.desciption})]})},Hq=t=>{const e=B.useRef(),n=new Vk;return n.get("dontShowWarningLogin"),n.get("dontShowWarningLogin")?"":U.jsxs("div",{className:"alert bg-yellow-500 text-white flex items-center p-1 text-sm w-full",id:"warningItem",ref:e,children:[U.jsx("i",{className:"fa-solid fa-circle-exclamation me-2"}),U.jsx("span",{className:"capitalize text-[8px] md:text-[12px]",children:"you have't logined you can't save your data"}),U.jsx("span",{onClick:()=>{e.current.style.display="none",n.set("dontShowWarningLogin",!0)},className:"cursor-pointer ms-1 inline-block text-[8px] md:text-[12px] underline font-bold",children:"i know"})]})},qq=()=>{tp();const[t,e]=Ur(Mo),[n,r]=B.useState();window.localStorage.setItem("tasks",JSON.stringify(t));const i=t.map((s,o)=>U.jsx(Wq,{iSdone:s.done,id:o,title:s.title,date:s.date,start:s.start,end:s.end,desciption:s.description},o));return B.useEffect(()=>{rn.onAuthStateChanged(s=>{r(s)})},[]),U.jsxs(U.Fragment,{children:[n?"":U.jsx(Hq,{}),U.jsxs("div",{className:" grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 m-5 md:m-3 gap-3 mt-3",children:[U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home/addTask",className:"fixed bottom-10 right-10 cursor-pointer bg-white h-10 w-10 flex items-center justify-center rounded-[50%] hover:rotate-90 transition-all duration-500",children:U.jsx("i",{className:"fa-solid fa-plus"})}),i.length>0&&n!=null?i:i.length==0&&(n==null||n!=null)?U.jsx("div",{className:"w-full text-gray-400 text-sm text-center capitalize absolute top-1/2 left-1/2",style:{transform:"translate(-50%,-50%)"},children:"no tasks yet"}):i.length>0&&n==null?i:U.jsxs("div",{className:"loader",children:[U.jsx("div",{className:"square",id:"sq1"}),U.jsx("div",{className:"square",id:"sq2"}),U.jsx("div",{className:"square",id:"sq3"}),U.jsx("div",{className:"square",id:"sq4"}),U.jsx("div",{className:"square",id:"sq5"}),U.jsx("div",{className:"square",id:"sq6"}),U.jsx("div",{className:"square",id:"sq7"}),U.jsx("div",{className:"square",id:"sq8"}),U.jsx("div",{className:"square",id:"sq9"})]})]})]})},oN=t=>{const e=B.useRef();return U.jsx("div",{className:`alert ${t.color} text-white flex items-center p-1 text-sm w-full`,id:"warningItem",ref:e,children:t.title})},Kq=()=>{const t=Cs(),[e,n]=B.useState(!1),[r,i]=B.useState(!1),[s,o]=Ur(ep),[a,l]=B.useState({color:"",title:""}),[c,h]=B.useState({email:"",password:""}),d=()=>{c.email.length>0&&c.password.length>6?n(!0):n(!1)},p=async y=>{if(y.preventDefault(),e&&r)try{await AV(rn,c.email,c.password);const E=rn.currentUser;l({color:"bg-green-500",title:"logined succesfully"}),setTimeout(()=>{t("/REACT_VITE_TODOAPP/home")},500)}catch(E){l({color:"bg-red-500",title:"email or password is wrong"}),console.log(E)}};B.useEffect(()=>{rn.onAuthStateChanged(async y=>{if(y){const E=jn($n,"Users",y.uid),b=await vs(E);b.exists()&&o(b.data())}})},[]);const _=y=>{const{name:E,value:b}=y.target;h(R=>({...R,[E]:b}))};return U.jsxs(U.Fragment,{children:[e&&r?U.jsx(oN,{title:a.title,color:a.color}):"",U.jsx("div",{className:"w-[90%] md:w-[50%] lg:w-[30%] h-fit absolute top-1/2 left-1/2 p-2 bg-[#222630] px-3 py-2 outline-none text-white rounded-lg border-2 border-solid border-[#2B3040]",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("form",{onSubmit:p,action:"",children:[U.jsx("h2",{className:"font-semibold text-xl text-center mb-4",children:"Login"}),U.jsx(Qr,{setClicked:r,name:"email",placeholder:"email",type:"email",value:_}),U.jsx(Qr,{setClicked:r,name:"password",placeholder:"password",type:"password",value:_}),U.jsx("button",{onClick:()=>{i(!0),d()},className:"btn w-full mt-5",children:"Login"}),U.jsxs("p",{className:"text-center my-2 text-sm",children:["don't have an account?",U.jsxs(xa,{to:"/REACT_VITE_TODOAPP/home/register",className:"underline cursor-pointer font-bold",children:[" ","Register"]})]})]})})]})},Gq=()=>{const t=Cs(),[e,n]=B.useState(!1),[r,i]=B.useState(!1),[s,o]=Ur(ep),[a,l]=B.useState({color:"",title:""}),[c,h]=B.useState({email:"",password:"",firstName:"",lastName:""}),d=()=>{c.email.length>0&&c.password.length>6&&c.firstName.length>0&&c.lastName.length>0?n(!0):n(!1)},p=async y=>{if(y.preventDefault(),e)try{await CV(rn,c.email,c.password);const E=rn.currentUser;E&&await Gj(jn($n,"Users",E.uid),{email:E.email,firstName:c.firstName,lastName:c.lastName}),l({color:"bg-green-500",title:"account created successfully"}),setTimeout(()=>{t("/REACT_VITE_TODOAPP/home")},500)}catch(E){l({color:"bg-red-500",title:"couldnot create your account"}),console.log(E)}};B.useEffect(()=>{rn.onAuthStateChanged(async y=>{if(y){const E=jn($n,"Users",y.uid),b=await vs(E);b.exists()&&o(b.data())}})},[]);const _=y=>{const{name:E,value:b}=y.target;h(R=>({...R,[E]:b}))};return U.jsxs(U.Fragment,{children:[e&&r?U.jsx(oN,{title:a.title,color:a.color}):"",U.jsx("div",{className:"w-[90%] md:w-[50%] lg:w-[30%] h-fit absolute top-1/2 left-1/2 p-2 bg-[#222630] px-3 py-2 outline-none text-white rounded-lg border-2 border-solid border-[#2B3040]",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("form",{onSubmit:p,action:"",children:[U.jsx("h2",{className:"font-semibold text-xl text-center mb-4",children:"Register"}),U.jsx(Qr,{setClicked:r,name:"email",placeholder:"email",type:"email",value:_}),U.jsx(Qr,{setClicked:r,name:"password",placeholder:"password",type:"password",value:_}),U.jsx("p",{className:"text-[10px] mt-1 text-gray-400",children:"password must be more than 6 characters"}),U.jsx(Qr,{setClicked:r,name:"firstName",placeholder:"first Name",type:"text",value:_}),U.jsx(Qr,{setClicked:r,name:"lastName",placeholder:"last name",type:"text",value:_}),U.jsx("button",{onClick:()=>{i(!0),d()},className:"btn w-full mt-5",children:"Register"})]})})]})},Qq=()=>{tp();const[t,e]=Ur(Mo),n=window.location.pathname.split("/").slice(-1).join(),r=Cs(),[i,s]=B.useState({title:"",date:"",start:"",end:"",description:"",done:!1,pending:!1}),[o,a]=B.useState(!1);B.useState(!1),B.useEffect(()=>{t[n]!=null&&s(t[n])},[]);const l=g=>{const{name:I,value:M}=g.target;s(z=>({...z,[I]:M}))},[c,h]=B.useState();B.useEffect(()=>{rn.onAuthStateChanged(g=>{h(g)})},[]),B.useState([]);const d=g=>{g.preventDefault(),rn.onAuthStateChanged(async I=>{if(I&&i.title.length>0&&i.date.length>0&&i.start.length>0&&i.end.length>0&&i.description.length>0){let M=[];const z=jn($n,"Users",I.uid),P=await vs(z);P.exists()&&(M=[...P.data().taskData],M[n]=i),await Yu(jn($n,"Users",I.uid),{taskData:M}),r("/REACT_VITE_TODOAPP/home")}else{let M=[];M=[t],M[n]=i,e(M),i.title.trim().length>0&&i.date.length>0&&i.start.length>0&&i.end.length>0&&i.description.length>0&&(console.log("ok"),r("/REACT_VITE_TODOAPP/home"))}})},p=B.useRef(0),_=B.useRef(0),y=B.useRef(0),E=B.useRef(0),b=B.useRef(0);B.useState("");const R=(g,I)=>{I.current.style.borderColor=g};return U.jsx("form",{onSubmit:d,className:"w-full absolute left-1/2 top-1/2 flex justify-center p-2 md:p-0",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[U.jsx(sN,{path:"/REACT_VITE_TODOAPP/home"}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"Title",children:"Title"}),U.jsx("input",{ref:p,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"title",placeholder:"Title",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"title",autoComplete:"off",type:"text",value:i.title,onChange:g=>{g.target.value===""?R("red",p):R("#596A95",p),g.target.name=="title"&&g.target.value.trim()===""&&R("red",p),l(g)}})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"date",children:"date"}),U.jsx("input",{ref:_,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"date",placeholder:"date",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"date",autoComplete:"off",type:"date",value:i.date,onChange:g=>{g.target.value===""?R("red",_):R("#596A95",_),g.target.name=="title"&&g.target.value.trim()===""&&R("red",_),l(g)}})]}),U.jsxs("div",{className:"time grid grid-cols-2 gap-2 w-full",children:[U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"start",children:"start time"}),U.jsx("input",{ref:y,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"start",placeholder:"start time",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"start",autoComplete:"off",type:"time",value:i.start,onChange:g=>{g.target.value===""?R("red",y):R("#596A95",y),g.target.name=="title"&&g.target.value.trim()===""&&R("red",y),l(g)}})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"end",children:"end time"}),U.jsx("input",{ref:E,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"end",placeholder:"end time",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"end",autoComplete:"off",type:"time",value:i.end,onChange:g=>{g.target.value===""?R("red",E):R("#596A95",E),g.target.name=="title"&&g.target.value.trim()===""&&R("red",E),l(g)}})]})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"description",children:"description"}),U.jsx("textarea",{ref:b,value:i.description,rows:"5",name:"description",autoComplete:"off",placeholder:"description",id:"description",style:{resize:"none",boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},onChange:g=>{g.target.value===""?R("red",b):R("#596A95",b),g.target.name=="title"&&g.target.value.trim()===""&&R("red",b),l(g)},className:"bg-[#222630] w-full px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]"})]}),U.jsx("button",{onClick:()=>{a(!0)},className:"btn w-full mt-2",children:"edit task"})]})})},Yq=t=>{B.useState("");const e=Cs(),n=Number(window.location.pathname.split("/").splice(-1).join()),[r,i]=Ur(Mo),s=()=>{window.location.reload()},[o,a]=B.useState(0),[l,c]=B.useState(!1);B.useEffect(()=>{let p;return l&&(p=setInterval(()=>{a(_=>_+1)},1e3)),()=>clearInterval(p)},[l]);const h=p=>{const _=Math.floor(p/3600),y=Math.floor(p%3600/60),E=p%60;return`${String(_).padStart(2,"0")}:${String(y).padStart(2,"0")}:${String(E).padStart(2,"0")}`},d=()=>{rn.onAuthStateChanged(async p=>{if(p){let _=[];const y=jn($n,"Users",p.uid),E=await vs(y);E.exists()&&(_=[...E.data().taskData],_[n].done=!0),await Yu(jn($n,"Users",p.uid),{taskData:_}),e("/REACT_VITE_TODOAPP/home"),s()}else i(_=>_.map((y,E)=>E===n?{...y,done:!0}:y)),e("/REACT_VITE_TODOAPP/home")})};return U.jsxs("div",{className:"text-center flex flex-col items-center  w-4/5 m-auto ",children:[U.jsx("div",{className:"timer flex items-center justify-center border-4 h-40 w-40 text-3xl mt-6 border-[#596A95] spin rounded-full text-white",children:h(o)}),U.jsxs("div",{className:"btns justify-center items-center flex  md:flex-row w-full gap-2 mt-5",children:[U.jsx("button",{className:"btn bg-lime-500 w-20 text-sm",onClick:()=>{c(!0)},children:"Start"}),U.jsx("button",{className:"btn bg-green-500 w-20 text-sm",onClick:()=>{d(),c(!1)},children:"Done"}),U.jsx("button",{className:"btn bg-yellow-500 w-20 text-sm",onClick:()=>{e("/REACT_VITE_TODOAPP/home"),s(),c(!1)},children:"Pend"}),U.jsx("button",{className:"btn bg-red-500 w-20 text-sm",onClick:()=>{c(!1)},children:"Stop"})]})]})};function Xq(){tp();const[t,e]=B.useState(U.jsxs("div",{className:"loader",children:[U.jsx("div",{className:"square",id:"sq1"}),U.jsx("div",{className:"square",id:"sq2"}),U.jsx("div",{className:"square",id:"sq3"}),U.jsx("div",{className:"square",id:"sq4"}),U.jsx("div",{className:"square",id:"sq5"}),U.jsx("div",{className:"square",id:"sq6"}),U.jsx("div",{className:"square",id:"sq7"}),U.jsx("div",{className:"square",id:"sq8"}),U.jsx("div",{className:"square",id:"sq9"})]}));return setTimeout(()=>{e(U.jsxs(U.Fragment,{children:[U.jsx(jq,{activeTextAnimation:!0}),U.jsx(iN,{})]}))},2e3),U.jsx("div",{className:"bg-[#121212] h-svh",children:t})}const Jq=_L([{path:"/REACT_VITE_TODOAPP/",element:U.jsx(Xq,{}),children:[{path:"/REACT_VITE_TODOAPP/",element:U.jsx($q,{})},{path:"/REACT_VITE_TODOAPP/home",element:U.jsx(iN,{}),children:[{path:"/REACT_VITE_TODOAPP/home/login",element:U.jsx(Kq,{})},{path:"/REACT_VITE_TODOAPP/home/register",element:U.jsx(Gq,{})},{path:"/REACT_VITE_TODOAPP/home",element:U.jsx(qq,{})},{path:"/REACT_VITE_TODOAPP/home/timer/:id",element:U.jsx(Yq,{})},{path:"/REACT_VITE_TODOAPP/home/addTask",element:U.jsx(zq,{})},{path:"/REACT_VITE_TODOAPP/home/eidtTask/:id",element:U.jsx(Qq,{})}]}]}]);dm.createRoot(document.getElementById("root")).render(U.jsx(ut.StrictMode,{children:U.jsx(Fq,{children:U.jsx(CL,{router:Jq})})}));
